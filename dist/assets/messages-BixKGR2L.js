import{_ as v,u as x,R as y,c as j,p as d,r as h,j as s,S as b}from"./index-D7GDf1UU.js";import{j as l}from"./jsx-runtime-Dzj5K_-e.js";import{g as _,u as w,a as D}from"./use-merge-refs-CfDw_vjn.js";import{A as E}from"./index-GgDZoIRm.js";import{I as k}from"./internal-D7cIOF98.js";import{L as T}from"./index-7-OjgWAi.js";import F from"./feedback-dialog-CfAAQ3tU.js";import{CodeViewActions as C,FeedbackActions as V,ChatBubbleAvatar as z}from"./common-components-DpG6i0kV.js";import{supportPromptItems as I,AUTHORS as A,fileTokenGroupI18nStrings as L}from"./config-BaP-wlaR.js";const N=t=>{var{showFileLastModified:i,showFileSize:r,showFileThumbnail:a,alignment:n,limit:e}=t,o=v(t,["showFileLastModified","showFileSize","showFileThumbnail","alignment","limit"]);const u=x("FileTokenGroup",{props:{showFileLastModified:i,showFileSize:r,showFileThumbnail:a,alignment:n,limit:e}});return y.createElement(k,Object.assign({showFileLastModified:i,showFileSize:r,showFileThumbnail:a,alignment:n,limit:e},o,u))};j(N,"FileTokenGroup");const f={root:"awsui_root_pac4k_foszn_11","variant-gen-ai":"awsui_variant-gen-ai_pac4k_foszn_55","variant-gen-ai-masked":"awsui_variant-gen-ai-masked_pac4k_foszn_56",searchbar:"awsui_searchbar_pac4k_foszn_1","searchbar-rtl":"awsui_searchbar-rtl_pac4k_foszn_1"};function S({variant:t,__internalRootRef:i,...r}){return l.jsx("div",{ref:i,..._(r),className:d([f.root,f[`variant-${t}`]])})}const c={root:"awsui_root_cdujn_d2scy_11","message-area":"awsui_message-area_cdujn_d2scy_45","with-loading-bar":"awsui_with-loading-bar_cdujn_d2scy_57","chat-bubble-type-outgoing":"awsui_chat-bubble-type-outgoing_cdujn_d2scy_60","chat-bubble-type-incoming":"awsui_chat-bubble-type-incoming_cdujn_d2scy_64",avatar:"awsui_avatar_cdujn_d2scy_69",hide:"awsui_hide_cdujn_d2scy_72",content:"awsui_content_cdujn_d2scy_76",actions:"awsui_actions_cdujn_d2scy_80"};function B({type:t,children:i,avatar:r,actions:a,showLoadingBar:n,hideAvatar:e=!1,ariaLabel:o,__internalRootRef:u=null,...m}){const p=h.useRef(null);return h.useEffect(()=>{p.current&&(p.current.inert=e)},[e]),l.jsxs("div",{className:c.root,..._(m),ref:u,role:"group","aria-label":o,children:[r&&l.jsx("div",{ref:p,className:d(c.avatar,e&&c.hide),children:r}),l.jsxs("div",{className:d(c["message-area"],c[`chat-bubble-type-${t}`],{[c["with-loading-bar"]]:n}),children:[l.jsx("div",{className:c.content,children:i}),a&&l.jsx("div",{className:c.actions,children:a}),n&&l.jsx(S,{variant:"gen-ai-masked"})]})]})}function g({type:t,hideAvatar:i,showLoadingBar:r,...a}){const n=w("ChatBubble",{props:{type:t}});return l.jsx(B,{type:t,hideAvatar:i,showLoadingBar:r,...a,...n})}D(g,"ChatBubble");function $({messages:t=[],setShowFeedbackDialog:i,addMessage:r}){const a=t[t.length-1],n=I.map(e=>e.text);return s.jsxDEV("div",{className:"messages",role:"region","aria-label":"Chat",children:[s.jsxDEV(T,{hidden:!0,assertive:(a==null?void 0:a.type)==="alert",children:[(a==null?void 0:a.type)==="alert"&&a.header,a==null?void 0:a.content,(a==null?void 0:a.type)==="chat-bubble"&&a.supportPrompts&&`There are ${n.length} support prompts accompanying this message. ${n}`]},void 0,!0,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:32,columnNumber:7},this),t.map((e,o)=>{if(e.type==="alert")return s.jsxDEV(E,{header:e.header,type:"error",statusIconAriaLabel:"Error","data-testid":"error-alert"+o,children:e.content},"error-alert"+o,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:43,columnNumber:13},this);const u=A[e.authorId];return s.jsxDEV(b,{size:"xs",children:[s.jsxDEV(g,{avatar:s.jsxDEV(z,{...u,loading:e.avatarLoading},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:60,columnNumber:23},this),ariaLabel:`${u.name} at ${e.timestamp}`,type:u.type==="gen-ai"?"incoming":"outgoing",hideAvatar:e.hideAvatar,actions:e.actions==="code-view"?s.jsxDEV(C,{contentToCopy:e.contentToCopy||""},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:66,columnNumber:19},this):e.actions==="feedback"?s.jsxDEV(V,{contentToCopy:e.contentToCopy||"",onNotHelpfulFeedback:()=>i(o,!0)},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:68,columnNumber:19},this):null,children:s.jsxDEV(b,{size:"xs",children:[s.jsxDEV("div",{children:e.content},e.authorId+e.timestamp+"content",!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:76,columnNumber:17},this),e.files&&e.files.length>0&&s.jsxDEV(N,{readOnly:!0,items:e.files.map(m=>({file:m})),limit:3,onDismiss:()=>{},alignment:"horizontal",showFileThumbnail:!0,i18nStrings:L},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:78,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:75,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:59,columnNumber:13},this),e.showFeedbackDialog&&s.jsxDEV("div",{className:"other-content-vertically-align",children:s.jsxDEV(F,{onDismiss:()=>i(o,!1),onSubmit:()=>{i(o,!1),r(o+1,{type:"chat-bubble",authorId:"gen-ai",content:"Your feedback has been submitted. Thank you for your additional feedback.",timestamp:new Date().toLocaleTimeString(),hideAvatar:!0})}},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:95,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:94,columnNumber:15},this),a.type==="chat-bubble"&&a.supportPrompts&&o===t.length-1&&s.jsxDEV("div",{className:"other-content-vertically-align",children:e.supportPrompts},void 0,!1,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:112,columnNumber:15},this)]},e.authorId+e.timestamp,!0,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:58,columnNumber:11},this)})]},void 0,!0,{fileName:"/app/code/src/pages/chat/messages.tsx",lineNumber:31,columnNumber:5},this)}const K=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{N as F,$ as M,K as m};
