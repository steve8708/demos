import{R as t,_ as Ve,n as Me,m as ke,M as je,w as Ne,r as c,o as R,ax as I,Y as Be,p as qe,aC as He,O as Ke}from"./index-DLMN1afU.js";import{c as Ue,u as We,a as Ye,D as V}from"./index-CgWRm0rq.js";import{u as ze,p as Ge,a as Je,c as Qe,F as Xe,T as Ze,V as $e,P as et}from"./use-select-CGMio23-.js";import{c as tt}from"./index-DJYuq0HF.js";const nt={root:"awsui_root_r2vco_w90gc_145"},lt=t.forwardRef((w,M)=>{var f,{options:a,filteringType:l="none",filteringPlaceholder:k,filteringAriaLabel:j,filteringClearAriaLabel:N,filteringResultsText:b,inlineLabelText:C,ariaRequired:B,placeholder:q,disabled:P,readOnly:S,ariaLabel:H,statusType:m="finished",empty:K,loadingText:U,finishedText:W,errorText:Y,noMatch:z,triggerVariant:G="label",renderHighlightedAriaLive:J,selectedOption:s,onBlur:Q,onFocus:X,onLoadItems:T,onChange:F,virtualScroll:Z,expandToViewport:$,autoFocus:ee,__inFilteringToken:_,__internalRootRef:te=null}=w,r=Ve(w,["options","filteringType","filteringPlaceholder","filteringAriaLabel","filteringClearAriaLabel","filteringResultsText","inlineLabelText","ariaRequired","placeholder","disabled","readOnly","ariaLabel","statusType","empty","loadingText","finishedText","errorText","noMatch","triggerVariant","renderHighlightedAriaLive","selectedOption","onBlur","onFocus","onLoadItems","onChange","virtualScroll","expandToViewport","autoFocus","__inFilteringToken","__internalRootRef"]);const A=Me(r),v=ke(r),L=je("select"),ne=L("errorIconAriaLabel",r.errorIconAriaLabel),oe=L("selectedAriaLabel",r.selectedAriaLabel),re=L("recoveryText",r.recoveryText);r.recoveryText&&!T&&Ne("Select","`onLoadItems` must be provided for `recoveryText` to be displayed.");const{handleLoadMore:ie,handleRecoveryClick:ae,fireLoadItems:le}=ze({onLoadItems:T,options:a,statusType:m});tt("Select","selectedOption",s,"onChange",F),Ue("Select","options",a);const[d,se]=c.useState(""),{filteredOptions:n,parentMap:ce,totalCount:de,matchesCount:ge}=Ge(a,l,d),pe=c.useRef(null),ue=c.useRef(null),he=R("trigger"),y=(f=v.controlId)!==null&&f!==void 0?f:he,O=c.useRef(null),{isOpen:i,highlightType:fe,highlightedOption:g,highlightedIndex:E,getTriggerProps:be,getDropdownProps:me,getFilterProps:Te,getMenuProps:ve,getOptionProps:Le,highlightOption:ye,selectOption:Oe,announceSelected:xe}=Je({selectedOptions:s?[s]:[],updateSelectedOption:e=>Ke(F,{selectedOption:e}),options:n,filteringType:l,onBlur:Q,onFocus:X,externalRef:M,fireLoadItems:le,setFilteringValue:se,statusType:m}),Re=Qe({isEnabled:l==="none"&&!S,options:n,highlightOption:i?ye:Oe,highlightedOption:i?g==null?void 0:g.option:s}),p=R("select-arialabel-"),u=R("footer");c.useEffect(()=>{var e;(e=O.current)===null||e===void 0||e.call(O,E)},[E]);const Ie=t.createElement(Xe,Object.assign({clearAriaLabel:N,filteringType:l,placeholder:k,ariaLabel:j,ariaRequired:B,value:d},Te())),we=t.createElement(Ze,Object.assign({ref:ue,placeholder:q,disabled:P,readOnly:S,triggerVariant:G,triggerProps:be(P,ee),selectedOption:s,isOpen:i,inFilteringToken:_,inlineLabelText:C},v,{controlId:y,ariaLabelledby:I(v.ariaLabelledby,p)})),Ce=!a||a.length===0,Pe=n&&n.length===0,D=l!=="none"&&d.length>0&&n&&n.length>0,Se=D?b==null?void 0:b(ge,de):void 0,o=We({statusType:m,empty:K,loadingText:U,finishedText:W,errorText:Y,recoveryText:re,isEmpty:Ce,isNoMatch:Pe,noMatch:z,isFiltered:D,filteringResultsText:Se,errorIconAriaLabel:ne,onRecoveryClick:ae,hasRecoveryCallback:!!T}),Fe=Object.assign(Object.assign({},ve()),{onLoadMore:ie,ariaLabelledby:I(p,y),ariaDescribedby:o.content?u:void 0}),_e=Ye({announceSelected:xe,highlightedOption:g,getParent:e=>{var h;return(h=ce.get(e))===null||h===void 0?void 0:h.option},selectedAriaLabel:oe,renderHighlightedAriaLive:J}),Ae=Z?$e:et,Ee=e=>{e.target!==document.activeElement&&e.preventDefault()},De=Be(pe,te),x=me();return t.createElement("div",Object.assign({},A,{ref:De,className:qe(nt.root,A.className),onKeyDown:Re}),t.createElement(He,Object.assign({},x,{ariaLabelledby:x.dropdownContentRole?I(p,y):void 0,ariaDescribedby:x.dropdownContentRole&&o.content?u:void 0,open:i,stretchTriggerHeight:!!_,stretchBeyondTriggerWidth:!0,trigger:we,header:Ie,onMouseDown:Ee,footer:o.isSticky?t.createElement(V,{content:i?o.content:null,id:u}):null,expandToViewport:$}),t.createElement(Ae,{listBottom:o.isSticky?null:t.createElement(V,{content:i?o.content:null,id:u}),menuProps:Fe,getOptionProps:Le,filteredOptions:n,filteringValue:d,ref:O,hasDropdownStatus:o.content!==null,screenReaderContent:_e,highlightType:fe})),t.createElement("div",{hidden:!0,id:p},H||C))});export{lt as I};
