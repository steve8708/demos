import{r as s}from"./index-BE4yRgP3.js";function x(){const e=s.useRef({currentPageIndex:1}),[u,i]=s.useState([]),[a,o]=s.useState("finished");async function c({filteringText:r,currentPageIndex:n}){o("loading");try{const{origins:t,hasNextPage:d}=await window.FakeServer.fetchContentOrigins({filteringText:r,currentPageIndex:n});if(r!==e.current.filteringText)return;i(n===1?t:g=>[...g,...t]),o(d?"pending":"finished")}catch{o("error")}}const f=s.useMemo(()=>({onLoadItems({detail:{filteringText:r,firstPage:n,samePage:t}}){n?(e.current={filteringText:r,currentPageIndex:1},i([])):t||(e.current={...e.current,currentPageIndex:e.current.currentPageIndex+1}),c(e.current)}}),[]);return[{options:u,filteringText:e.current.filteringText,status:a},f]}export{x as default};
