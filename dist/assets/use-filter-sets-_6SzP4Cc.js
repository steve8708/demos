import{av as je,r as j,j as U}from"./index-DLMN1afU.js";import{d as W,e as Pe,f as _e,b as Le,c as Ie,a as P,g as he,h as Ce,j as k,k as De,_ as Q,l as Me}from"./_cacheHas-B-mmQT_5.js";import{_ as Ge,a as Ue}from"./_setToArray-B2DXeqCu.js";import{i as M,b as Be,_ as Fe,a as Ke}from"./isObjectLike-CEkGVVHI.js";import{UpdateFilterSetModal as qe,DeleteFilterSetModal as Re,SaveFilterSetModal as He}from"./filter-set-modals-DhLu6U4L.js";import"./index-CmXkoEfJ.js";import"./internal-BwoLqu24.js";import"./index-BRXORN4l.js";import"./index-CrLnEVMr.js";import"./internal-BWpMHlT2.js";import"./index-DLCKwPn4.js";import"./index-CRaad7Bu.js";import"./internal-DdS2MN2J.js";import"./index-CFlkabIj.js";import"./internal-CjecXZ_i.js";import"./reset-contexts-for-modal-BjjT4_Gz.js";var Ne=W;function We(){this.__data__=new Ne,this.size=0}var ke=We;function Qe(e){var r=this.__data__,a=r.delete(e);return this.size=r.size,a}var ze=Qe;function Xe(e){return this.__data__.get(e)}var Ye=Xe;function Ze(e){return this.__data__.has(e)}var Je=Ze,Ve=W,er=_e,rr=Pe,ar=200;function tr(e,r){var a=this.__data__;if(a instanceof Ve){var t=a.__data__;if(!er||t.length<ar-1)return t.push([e,r]),this.size=++a.size,this;a=this.__data__=new rr(t)}return a.set(e,r),this.size=a.size,this}var sr=tr,nr=W,ir=ke,lr=ze,ur=Ye,or=Je,fr=sr;function E(e){var r=this.__data__=new nr(e);this.size=r.size}E.prototype.clear=ir;E.prototype.delete=lr;E.prototype.get=ur;E.prototype.has=or;E.prototype.set=fr;var cr=E;function vr(e,r){for(var a=-1,t=e==null?0:e.length;++a<t;)if(r(e[a],a,e))return!0;return!1}var pr=vr,gr=Le,dr=pr,yr=Ie,br=1,_r=2;function Ar(e,r,a,t,l,n){var i=a&br,f=e.length,v=r.length;if(f!=v&&!(i&&v>f))return!1;var u=n.get(e),m=n.get(r);if(u&&m)return u==r&&m==e;var g=-1,s=!0,_=a&_r?new gr:void 0;for(n.set(e,r),n.set(r,e);++g<f;){var y=e[g],p=r[g];if(t)var d=i?t(p,y,g,r,e,n):t(y,p,g,e,r,n);if(d!==void 0){if(d)continue;s=!1;break}if(_){if(!dr(r,function(b,$){if(!yr(_,$)&&(y===b||l(y,b,a,t,n)))return _.push($)})){s=!1;break}}else if(!(y===p||l(y,p,a,t,n))){s=!1;break}}return n.delete(e),n.delete(r),s}var Ae=Ar,mr=P,$r=mr.Uint8Array,Tr=$r;function Or(e){var r=-1,a=Array(e.size);return e.forEach(function(t,l){a[++r]=[l,t]}),a}var Sr=Or,Z=he,J=Tr,xr=Ce,Er=Ae,wr=Sr,jr=Ge,Pr=1,Lr=2,Ir="[object Boolean]",hr="[object Date]",Cr="[object Error]",Dr="[object Map]",Mr="[object Number]",Gr="[object RegExp]",Ur="[object Set]",Br="[object String]",Fr="[object Symbol]",Kr="[object ArrayBuffer]",qr="[object DataView]",V=Z?Z.prototype:void 0,B=V?V.valueOf:void 0;function Rr(e,r,a,t,l,n,i){switch(a){case qr:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Kr:return!(e.byteLength!=r.byteLength||!n(new J(e),new J(r)));case Ir:case hr:case Mr:return xr(+e,+r);case Cr:return e.name==r.name&&e.message==r.message;case Gr:case Br:return e==r+"";case Dr:var f=wr;case Ur:var v=t&Pr;if(f||(f=jr),e.size!=r.size&&!v)return!1;var u=i.get(e);if(u)return u==r;t|=Lr,i.set(e,r);var m=Er(f(e),f(r),t,l,n,i);return i.delete(e),m;case Fr:if(B)return B.call(e)==B.call(r)}return!1}var Hr=Rr;function Nr(e,r){for(var a=-1,t=r.length,l=e.length;++a<t;)e[l+a]=r[a];return e}var Wr=Nr,kr=Array.isArray,z=kr,Qr=Wr,zr=z;function Xr(e,r,a){var t=r(e);return zr(e)?t:Qr(t,a(e))}var Yr=Xr;function Zr(e,r){for(var a=-1,t=e==null?0:e.length,l=0,n=[];++a<t;){var i=e[a];r(i,a,e)&&(n[l++]=i)}return n}var Jr=Zr;function Vr(){return[]}var ea=Vr,ra=Jr,aa=ea,ta=Object.prototype,sa=ta.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,na=ee?function(e){return e==null?[]:(e=Object(e),ra(ee(e),function(r){return sa.call(e,r)}))}:aa,ia=na;function la(e,r){for(var a=-1,t=Array(e);++a<e;)t[a]=r(a);return t}var ua=la,oa=k,fa=M,ca="[object Arguments]";function va(e){return fa(e)&&oa(e)==ca}var pa=va,re=pa,ga=M,me=Object.prototype,da=me.hasOwnProperty,ya=me.propertyIsEnumerable,ba=re(function(){return arguments}())?re:function(e){return ga(e)&&da.call(e,"callee")&&!ya.call(e,"callee")},_a=ba,C={exports:{}};function Aa(){return!1}var ma=Aa;C.exports;(function(e,r){var a=P,t=ma,l=r&&!r.nodeType&&r,n=l&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===l,f=i?a.Buffer:void 0,v=f?f.isBuffer:void 0,u=v||t;e.exports=u})(C,C.exports);var $e=C.exports,$a=9007199254740991,Ta=/^(?:0|[1-9]\d*)$/;function Oa(e,r){var a=typeof e;return r=r??$a,!!r&&(a=="number"||a!="symbol"&&Ta.test(e))&&e>-1&&e%1==0&&e<r}var Sa=Oa,xa=k,Ea=Be,wa=M,ja="[object Arguments]",Pa="[object Array]",La="[object Boolean]",Ia="[object Date]",ha="[object Error]",Ca="[object Function]",Da="[object Map]",Ma="[object Number]",Ga="[object Object]",Ua="[object RegExp]",Ba="[object Set]",Fa="[object String]",Ka="[object WeakMap]",qa="[object ArrayBuffer]",Ra="[object DataView]",Ha="[object Float32Array]",Na="[object Float64Array]",Wa="[object Int8Array]",ka="[object Int16Array]",Qa="[object Int32Array]",za="[object Uint8Array]",Xa="[object Uint8ClampedArray]",Ya="[object Uint16Array]",Za="[object Uint32Array]",c={};c[Ha]=c[Na]=c[Wa]=c[ka]=c[Qa]=c[za]=c[Xa]=c[Ya]=c[Za]=!0;c[ja]=c[Pa]=c[qa]=c[La]=c[Ra]=c[Ia]=c[ha]=c[Ca]=c[Da]=c[Ma]=c[Ga]=c[Ua]=c[Ba]=c[Fa]=c[Ka]=!1;function Ja(e){return wa(e)&&Ea(e.length)&&!!c[xa(e)]}var Va=Ja,D={exports:{}};D.exports;(function(e,r){var a=De,t=r&&!r.nodeType&&r,l=t&&!0&&e&&!e.nodeType&&e,n=l&&l.exports===t,i=n&&a.process,f=function(){try{var v=l&&l.require&&l.require("util").types;return v||i&&i.binding&&i.binding("util")}catch{}}();e.exports=f})(D,D.exports);var et=D.exports,rt=Va,at=Fe,ae=et,te=ae&&ae.isTypedArray,tt=te?at(te):rt,Te=tt,st=ua,nt=_a,it=z,lt=$e,ut=Sa,ot=Te,ft=Object.prototype,ct=ft.hasOwnProperty;function vt(e,r){var a=it(e),t=!a&&nt(e),l=!a&&!t&&lt(e),n=!a&&!t&&!l&&ot(e),i=a||t||l||n,f=i?st(e.length,String):[],v=f.length;for(var u in e)(r||ct.call(e,u))&&!(i&&(u=="length"||l&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ut(u,v)))&&f.push(u);return f}var pt=vt,gt=Object.prototype;function dt(e){var r=e&&e.constructor,a=typeof r=="function"&&r.prototype||gt;return e===a}var yt=dt;function bt(e,r){return function(a){return e(r(a))}}var _t=bt,At=_t,mt=At(Object.keys,Object),$t=mt,Tt=yt,Ot=$t,St=Object.prototype,xt=St.hasOwnProperty;function Et(e){if(!Tt(e))return Ot(e);var r=[];for(var a in Object(e))xt.call(e,a)&&a!="constructor"&&r.push(a);return r}var wt=Et,jt=pt,Pt=wt,Lt=Ke;function It(e){return Lt(e)?jt(e):Pt(e)}var ht=It,Ct=Yr,Dt=ia,Mt=ht;function Gt(e){return Ct(e,Mt,Dt)}var Ut=Gt,se=Ut,Bt=1,Ft=Object.prototype,Kt=Ft.hasOwnProperty;function qt(e,r,a,t,l,n){var i=a&Bt,f=se(e),v=f.length,u=se(r),m=u.length;if(v!=m&&!i)return!1;for(var g=v;g--;){var s=f[g];if(!(i?s in r:Kt.call(r,s)))return!1}var _=n.get(e),y=n.get(r);if(_&&y)return _==r&&y==e;var p=!0;n.set(e,r),n.set(r,e);for(var d=i;++g<v;){s=f[g];var b=e[s],$=r[s];if(t)var S=i?t($,b,s,r,e,n):t(b,$,s,e,r,n);if(!(S===void 0?b===$||l(b,$,a,t,n):S)){p=!1;break}d||(d=s=="constructor")}if(p&&!d){var T=e.constructor,x=r.constructor;T!=x&&"constructor"in e&&"constructor"in r&&!(typeof T=="function"&&T instanceof T&&typeof x=="function"&&x instanceof x)&&(p=!1)}return n.delete(e),n.delete(r),p}var Rt=qt,Ht=Q,Nt=P,Wt=Ht(Nt,"DataView"),kt=Wt,Qt=Q,zt=P,Xt=Qt(zt,"Promise"),Yt=Xt,Zt=Q,Jt=P,Vt=Zt(Jt,"WeakMap"),es=Vt,K=kt,q=_e,R=Yt,H=Ue,N=es,Oe=k,w=Me,ne="[object Map]",rs="[object Object]",ie="[object Promise]",le="[object Set]",ue="[object WeakMap]",oe="[object DataView]",as=w(K),ts=w(q),ss=w(R),ns=w(H),is=w(N),O=Oe;(K&&O(new K(new ArrayBuffer(1)))!=oe||q&&O(new q)!=ne||R&&O(R.resolve())!=ie||H&&O(new H)!=le||N&&O(new N)!=ue)&&(O=function(e){var r=Oe(e),a=r==rs?e.constructor:void 0,t=a?w(a):"";if(t)switch(t){case as:return oe;case ts:return ne;case ss:return ie;case ns:return le;case is:return ue}return r});var ls=O,F=cr,us=Ae,os=Hr,fs=Rt,fe=ls,ce=z,ve=$e,cs=Te,vs=1,pe="[object Arguments]",ge="[object Array]",h="[object Object]",ps=Object.prototype,de=ps.hasOwnProperty;function gs(e,r,a,t,l,n){var i=ce(e),f=ce(r),v=i?ge:fe(e),u=f?ge:fe(r);v=v==pe?h:v,u=u==pe?h:u;var m=v==h,g=u==h,s=v==u;if(s&&ve(e)){if(!ve(r))return!1;i=!0,m=!1}if(s&&!m)return n||(n=new F),i||cs(e)?us(e,r,a,t,l,n):os(e,r,v,a,t,l,n);if(!(a&vs)){var _=m&&de.call(e,"__wrapped__"),y=g&&de.call(r,"__wrapped__");if(_||y){var p=_?e.value():e,d=y?r.value():r;return n||(n=new F),l(p,d,a,t,n)}}return s?(n||(n=new F),fs(e,r,a,t,l,n)):!1}var ds=gs,ys=ds,ye=M;function Se(e,r,a,t,l){return e===r?!0:e==null||r==null||!ye(e)&&!ye(r)?e!==e&&r!==r:ys(e,r,a,t,Se,l)}var bs=Se,_s=bs;function As(e,r){return _s(e,r)}var ms=As;const $s=je(ms);function Ts(e){return(!e.tokenGroups||e.tokenGroups.length===0)&&e.tokens.length===0}function be(e,r){return $s(e,r)}function Fs({filterSets:e=[],query:r,filteringProperties:a,selectRef:t,updateFilters:l,updateSavedFilterSets:n,showNotification:i,saveAsURL:f,defaultSelectedFilterSetValue:v,updateSelectedFilterValue:u}){const[m,g]=j.useState(v??null),[s,_]=j.useState(e.find(o=>o.name===m)??null),[y,p]=j.useState(null),[d,b]=j.useState(!1),$={value:"___unsaved___",label:s?`${s.name} (unsaved)`:void 0},S=e.map(o=>({value:o.name,description:o.description,labelTag:o.default?"Default":void 0})),T=d&&s;T&&S.unshift($);const x=T?$:S.find(({value:o})=>o===m)??null;j.useEffect(()=>{var A;const o=!Ts(r);o?!d&&o?(!s||!be(r,s.query))&&b(!0):d&&s&&be(r,s.query)&&b(!1):(b(!1),_(null),g(null),(A=t==null?void 0:t.current)==null||A.focus())},[s,d,r,t]);const xe={placeholder:"Choose a filter set",options:S,selectedOption:x,empty:"No saved filter sets",onChange:({detail:o})=>{if(!o.selectedOption||o.selectedOption===$)return;const A=e.find(({name:I})=>I===o.selectedOption.value)??null;_(A),A&&l(A.query),u==null||u(o.selectedOption.value??null),g(o.selectedOption.value??null),b(!1)}},Ee={ariaLabel:"Filter actions",mainAction:{text:"Clear filters",onClick:()=>{l({operation:"and",tokens:[]}),_(null),b(!1),g(null)}},items:[{id:"new",text:"Save as new filter set"},{id:"update",text:"Update current filter set",disabled:!d||!s},{id:"delete",text:"Delete current filter set",disabled:d||!s},...f?[{id:"url",text:"Copy filters as URL"}]:[],{id:"settings",text:"Settings",itemType:"group",items:[{id:"default",text:"Set as default",itemType:"checkbox",checked:(s==null?void 0:s.default)??!1,disabled:d||!s,disabledReason:s?d?"This action is available when changes have been saved.":void 0:"This action is available after selecting a filter set."}]}],onItemClick:({detail:{id:o}})=>p(o)};let L=null;if(y==="default"&&s){const o=(s==null?void 0:s.default)??!1;_({...s,default:!o}),n([...e.map(A=>({...A,default:A.name===s.name?!o:!1}))]),p(null)}else y==="update"&&s&&d?L=U.jsxDEV(qe,{filterSet:s,filteringProperties:a,newQuery:r,onCancel:()=>{p(null)},onSubmit:()=>{p(null),d&&(i==null||i({content:`Successfully updated "${s.name}"`,type:"success",statusIconAriaLabel:"Success",dismissible:!0,dismissLabel:"Dismiss message",id:`saved-filter-updated-${s.name}`}),s.query=r,n([...e]),g(s.name),b(!1))}},void 0,!1,{fileName:"/app/code/src/pages/table-saved-filters/use-filter-sets.tsx",lineNumber:200,columnNumber:7},this):y==="delete"&&s?L=U.jsxDEV(Re,{filterSet:s,filteringProperties:a,onCancel:()=>{p(null)},onSubmit:()=>{var A;p(null),i==null||i({content:`Successfully deleted "${s.name}"`,type:"success",statusIconAriaLabel:"Success",dismissible:!0,dismissLabel:"Dismiss message",id:`saved-filter-deleted-${s.name}`});const o=e.indexOf(s);e.splice(o,1),n([...e]),g(null),b(!1),l({operation:"and",tokens:[]}),(A=t==null?void 0:t.current)==null||A.focus()}},void 0,!1,{fileName:"/app/code/src/pages/table-saved-filters/use-filter-sets.tsx",lineNumber:234,columnNumber:7},this):y==="new"&&(L=U.jsxDEV(He,{query:r,filteringProperties:a,onCancel:()=>{p(null)},onSubmit:({name:o,description:A,isDefault:I})=>{var X;p(null),i==null||i({content:`Successfully saved "${o}"`,type:"success",statusIconAriaLabel:"Success",dismissible:!0,dismissLabel:"Dismiss message",id:`saved-filter-saved-${o}`});const G={name:o,description:A,query:r,default:I||!1},we=[...e.map(Y=>({...Y,default:I?!1:Y.default})),G];n(we),_(G),g(G.name),b(!1),(X=t==null?void 0:t.current)==null||X.focus()}},void 0,!1,{fileName:"/app/code/src/pages/table-saved-filters/use-filter-sets.tsx",lineNumber:268,columnNumber:7},this));return{currentFilterSet:s,selectProps:xe,buttonDropdownProps:Ee,actionModal:L}}export{Fs as useFilterSets};
