import{j as f}from"./jsx-runtime-BWtseb7k.js";import{be as vt,bf as _t,bg as wt,ch as q,bi as G,b4 as xt,r as h,p as y,ai as yt,I as rt,C as Dt}from"./index-DWytQeHI.js";import{C as It}from"./utilities.esm-B5npNyjX.js";var at="board-components",J="3.0.0 (69b272ab)",Tt="open-source-visual-refresh";const Et=(e,t)=>e;function jt(e,t){const n=Et(Tt);vt(e,{packageSource:at,packageVersion:J,theme:n},t)}wt(at,J);function kt(e,t){return jt(e,t),{__internalRootRef:_t(e,J)}}function Ct(e,t){e.displayName=t}function Nt(e){const t={};return Object.keys(e).forEach(n=>{n.startsWith("data-")&&(t[n]=e[n])}),t}class _{static fromEvent(t,{isRtl:n}){const i=q(t,n),o=t.clientY;return new _({x:i,y:o})}static cursorOffset(t,n){return new _({x:t.x-n.x+(t.scrollX-n.scrollX),y:t.y-n.y+(t.scrollY-n.scrollY)})}constructor({x:t,y:n}){this.__type="Coordinates",this.scrollX=window.scrollX,this.scrollY=window.scrollY,this.x=t,this.y=n}}class At{constructor(){this.listeners=new Map}on(t,n){return this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n),()=>{this.listeners.set(t,this.listeners.get(t).filter(i=>i!==n))}}emit(t,...n){var i;for(const o of(i=this.listeners.get(t))!==null&&i!==void 0?i:[])o(...n)}}function zt(e,t){return e.top>=t.top&&e.left>=t.left&&e.right<=t.right&&e.bottom<=t.bottom}function Ht(e,t){return Rt(e,t)>0}function Rt(e,t){let n=0;t.left<=e.left&&e.left<=t.right?n=Math.min(e.right,t.right)-e.left:t.left<=e.right&&e.right<=t.right?n=e.right-Math.max(e.left,t.left):e.left<=t.left&&t.left<=e.right?n=Math.min(e.right,t.right)-t.left:e.left<=t.right&&t.right<=e.right&&(n=t.right-Math.max(e.left,t.left));let i=0;return t.top<=e.top&&e.top<=t.bottom?i=Math.min(e.bottom,t.bottom)-e.top:t.top<=e.bottom&&e.bottom<=t.bottom?i=e.bottom-Math.max(e.top,t.top):e.top<=t.top&&t.top<=e.bottom?i=Math.min(e.bottom,t.bottom)-t.top:e.top<=t.bottom&&t.bottom<=e.bottom&&(i=t.bottom-Math.max(e.top,t.top)),n*i}function Pt(e,t){function n(o,a,c){const r=Math.abs(o-c);return Math.abs(a-c)<r?a:o}let i={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,right:Number.POSITIVE_INFINITY,bottom:Number.POSITIVE_INFINITY};for(const o of t)Ht(o,e)&&(i={top:n(i.top,o.top,e.top),left:n(i.left,o.left,e.left),right:n(i.right,o.right,e.right),bottom:n(i.bottom,o.bottom,e.bottom)});return i}function Mt({target:e,sources:t,direction:n,isRtl:i}){const o=r=>{var l;return(l=r[0])!==null&&l!==void 0?l:null},a=(r,l)=>Math.abs(r.top-e.top)-Math.abs(l.top-e.top),c=(r,l)=>Math.abs(r.left-e.left)-Math.abs(l.left-e.left);switch(i&&n==="left"?n="right":i&&n==="right"&&(n="left"),n){case"left":return o(t.filter(r=>r.right<=e.left).sort((r,l)=>l.left-r.left||a(r,l)));case"right":return o(t.filter(r=>r.left>=e.right).sort((r,l)=>r.left-l.left||a(r,l)));case"up":return o(t.filter(r=>r.bottom<=e.top).sort((r,l)=>l.top-r.top||c(r,l)));case"down":return o(t.filter(r=>r.top>=e.bottom).sort((r,l)=>r.top-l.top||c(r,l)))}}function R(e){const{insetInlineStart:t,insetInlineEnd:n,insetBlockStart:i,insetBlockEnd:o,inlineSize:a,blockSize:c}=G(e),r=e.ownerDocument.defaultView.pageXOffset-window.scrollX,l=e.ownerDocument.defaultView.pageYOffset-window.scrollY;return{left:t+r,right:n+r,top:i+l,bottom:o+l,width:a,height:c}}function St(e,t){const n=t.map(([,o])=>R(o)),i=Pt(e,n);return t.filter((o,a)=>zt(n[a],i)).map(([o])=>o)}class Bt extends At{constructor(){super(...arguments),this.droppables=new Map,this.transition=null}start(t){this.transition={...t},this.emit("start",this.getDragAndDropData(t.startCoordinates))}update(t){this.emit("update",this.getDragAndDropData(t))}submit(){this.emit("submit"),this.transition=null}discard(){this.emit("discard"),this.transition=null}acquire(t,n){if(!this.transition)throw new Error("Invariant violation: no transition present for acquire.");this.emit("acquire",{droppableId:t,draggableItem:this.transition.draggableItem,renderAcquiredItem:n})}addDroppable(t,n,i){this.droppables.set(t,{element:i,context:n})}removeDroppable(t){this.droppables.delete(t)}getDroppables(){return[...this.droppables.entries()]}getDragAndDropData(t){if(!this.transition)throw new Error("Invariant violation: no transition present for interaction.");const n=_.cursorOffset(t,this.transition.startCoordinates),i=this.getCollisionRect(this.transition,t),{collisionIds:o,dropTarget:a}=this.getCollisions(i);return{...this.transition,positionOffset:n,coordinates:t,collisionRect:i,collisionIds:o,dropTarget:a}}getCollisionRect(t,n){const i=t.getCollisionRect(t.operation,n,null),{dropTarget:o}=this.getCollisions(i);return t.getCollisionRect(t.operation,n,o)}getCollisions(t){const n=[...this.droppables.entries()],i=n.map(([c,r])=>[c,r.element]),o=St(t,i);if(o.length===0)return{collisionIds:o,dropTarget:null};const a=n.find(([c])=>c===o[0]);if(!a)throw new Error("Invariant violation: no droppable matches collision.");return{collisionIds:o,dropTarget:a[1].context}}}const I=new Bt;function K(e,t){const n=xt(t);h.useEffect(()=>I.on(e,n),[e,n])}function Yt({draggableItem:e,getCollisionRect:t}){return{start(n,i,o){I.start({operation:n,interactionType:i,draggableItem:e,getCollisionRect:t,startCoordinates:o})},updateTransition(n){I.update(n)},submitTransition(){I.submit()},discardTransition(){I.discard()},acquire(n,i){I.acquire(n,i)},getDroppables(){return I.getDroppables()}}}function ie({itemId:e,context:t,getElement:n}){h.useEffect(()=>(I.addDroppable(e,t,n()),()=>I.removeDroppable(e)),[e,t,n])}function Lt(e,t){let n=!1,i=null,o=null,a=null;function c(){if(n===!0||i===null||o===null)return;const p=Date.now();p-o>=t?(e.apply(i.this,i.args),o=p,i=null,a=null):r()}function r(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(c)}function l(...p){o===null?(o=Date.now(),e.apply(this,p)):(i={this:this,args:p},r())}return l.cancel=()=>{a&&cancelAnimationFrame(a),i=null,o=null,a=null,n=!0},l}function Ot(e,t,n,i){var o,a;const{left:c,top:r,width:l,height:p}=R(t);switch(e){case"reorder":return{left:n.x,right:n.x+l,top:n.y,bottom:n.y+p};case"resize":return{left:c,top:r,right:n.x,bottom:n.y};case"insert":return{left:n.x,top:n.y,right:n.x+((o=i==null?void 0:i.width)!==null&&o!==void 0?o:l),bottom:n.y+((a=i==null?void 0:i.height)!==null&&a!==void 0?a:p)}}}function Vt({draggableElement:e,droppables:t,direction:n,isRtl:i}){var o;const a=R(e),c=new Map(t.map(([l,p])=>[R(p.element),l])),r=Mt({target:a,sources:[...c.keys()],direction:n,isRtl:i});return(o=c.get(r))!==null&&o!==void 0?o:null}const E={root:"awsui_root_lljvd_1evk7_5",inTransition:"awsui_inTransition_lljvd_1evk7_11",transformed:"awsui_transformed_lljvd_1evk7_16",removed:"awsui_removed_lljvd_1evk7_21",dragged:"awsui_dragged_lljvd_1evk7_25",resized:"awsui_resized_lljvd_1evk7_30",hidden:"awsui_hidden_lljvd_1evk7_35"},lt=h.createContext(null);function Kt(){const e=h.useContext(lt);if(!e)throw new Error("Unable to find BoardItem context.");return e}const oe=h.forwardRef(Ft);function Ft({item:e,placed:t,acquired:n,inTransition:i,transform:o,getItemSize:a,onKeyMove:c,children:r,isRtl:l},p){var j,k,C,N,A,X;const $=h.useRef({width:0,height:0}),U=h.useRef(new _({x:0,y:0})),P=h.useRef(null),[d,M]=h.useState(null),[Q,W]=h.useState(!1),S=h.useRef(!1),z=h.useRef(null),g=Yt({draggableItem:e,getCollisionRect:(s,u,m)=>{const b=s==="insert"&&m?a(m):null;return Ot(s,z.current,u,b)}});function Z({operation:s,interactionType:u,draggableItem:m,collisionRect:b,coordinates:v,dropTarget:x}){if(e.id===m.id){const[T,O]=[b.right-b.left,b.bottom-b.top],V=U.current;s==="resize"?M({operation:s,interactionType:u,itemId:m.id,sizeTransform:{width:Math.max(a(null).minWidth,Math.min(a(null).maxWidth,T-V.x)),height:Math.max(a(null).minHeight,O-V.y)},positionTransform:null}):(s==="insert"||s==="reorder")&&M({operation:s,interactionType:u,itemId:m.id,sizeTransform:x?a(x):$.current,positionTransform:{x:v.x-V.x,y:v.y-V.y},hasDropTarget:!!x})}}K("start",s=>Z(s)),K("update",s=>Z(s)),K("submit",()=>{M(null),W(!1),S.current=!1}),K("discard",()=>{M(null),W(!1),S.current=!1});const B=(j=d==null?void 0:d.interactionType)!==null&&j!==void 0?j:null,Y=(k=d==null?void 0:d.itemId)!==null&&k!==void 0?k:null;h.useEffect(()=>{const s=Lt(m=>{var b,v,x,T;const O=_.fromEvent(m,{isRtl:l()});g.updateTransition(new _({x:Math.max(O.x,(v=(b=P.current)===null||b===void 0?void 0:b.x)!==null&&v!==void 0?v:Number.NEGATIVE_INFINITY),y:Math.max(O.y,(T=(x=P.current)===null||x===void 0?void 0:x.y)!==null&&T!==void 0?T:Number.NEGATIVE_INFINITY)}))},10),u=()=>{s.cancel(),g.submitTransition()};return B==="pointer"&&Y===e.id&&(window.addEventListener("pointermove",s),window.addEventListener("pointerup",u)),()=>{window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",u)}},[e.id,B,Y]),h.useEffect(()=>{if(B==="keyboard"&&Y===e.id){const s=()=>g.submitTransition();return window.addEventListener("pointerdown",s,!0),()=>{window.removeEventListener("pointerdown",s,!0)}}},[e.id,B,Y]);function ut(s){if(n)return g.submitTransition();if(d)g.submitTransition();else{const u=R(z.current),m=new _({x:s==="drag"?u.left:u.right,y:s==="drag"?u.top:u.bottom});s==="drag"&&!t?g.start("insert","keyboard",m):s==="drag"?g.start("reorder","keyboard",m):g.start("resize","keyboard",m)}}function ct(s){const u=g.getDroppables(),m=Vt({draggableElement:z.current,droppables:u,direction:s,isRtl:l()});m&&(g.acquire(m,()=>r(!0)),W(!0),S.current=!0)}function tt(s,u){const m=d&&s==="drag"&&!t,b=d||s==="drag",v=T=>{m?ct(T):b&&(c==null||c(T))},x=()=>{(d||n)&&g.discardTransition()};switch(u.key){case"ArrowUp":return v("up");case"ArrowDown":return v("down");case"ArrowLeft":return v("left");case"ArrowRight":return v("right");case" ":case"Enter":return ut(s);case"Escape":return x()}}function ft(){d&&d.interactionType==="keyboard"&&!S.current&&g.submitTransition()}function ht(s){const u=G(z.current),m=q(s,l()),b=s.clientY;U.current=new _({x:m-u.insetInlineStart,y:b-u.insetBlockStart}),$.current={width:u.inlineSize,height:u.blockSize},P.current=null,g.start(t?"reorder":"insert","pointer",_.fromEvent(s,{isRtl:l()}))}function mt(s){tt("drag",s)}function pt(s){const u=G(z.current),m=q(s,l()),b=s.clientY;U.current=new _({x:m-u.insetInlineEnd,y:b-u.insetBlockEnd}),$.current={width:u.inlineSize,height:u.blockSize};const v=a(null).minWidth,x=a(null).minHeight;P.current=new _({x:m-u.inlineSize+v,y:b-u.blockSize+x}),g.start("resize","pointer",_.fromEvent(s,{isRtl:l()}))}function bt(s){tt("resize",s)}const D={},H=[];i&&H.push(E.inTransition),d&&d.interactionType==="pointer"&&(H.push(d.operation==="resize"?E.resized:E.dragged),D.insetInlineStart=(C=d.positionTransform)===null||C===void 0?void 0:C.x,D.insetBlockStart=(N=d.positionTransform)===null||N===void 0?void 0:N.y,D.inlineSize=(A=d.sizeTransform)===null||A===void 0?void 0:A.width,D.blockSize=(X=d.sizeTransform)===null||X===void 0?void 0:X.height,D.pointerEvents="none"),Q&&H.push(E.hidden),o&&(o.type==="move"&&(H.push(E.transformed),D.transform=It.Transform.toString({x:o.x,y:o.y,scaleX:1,scaleY:1}),D.width=o.width+"px",D.height=o.height+"px"),o.type==="remove"&&H.push(E.removed));const et=h.useRef(null);h.useImperativeHandle(p,()=>({focusDragHandle:()=>{var s;return(s=et.current)===null||s===void 0?void 0:s.focus()}}));const L=!!d&&!Q||!!n,gt=(d==null?void 0:d.operation)==="insert"&&(d==null?void 0:d.interactionType)==="pointer",nt=h.useRef(null);(!i||L)&&(nt.current=r(!!(d!=null&&d.hasDropTarget)));const it=f.jsx("div",{ref:z,className:y(E.root,...H),style:D,"data-item-id":e.id,onBlur:ft,children:f.jsx(lt.Provider,{value:{isActive:L,dragHandle:{ref:et,onPointerDown:ht,onKeyDown:mt,isActive:L&&(d==null?void 0:d.operation)==="reorder"},resizeHandle:t?{onPointerDown:pt,onKeyDown:bt,isActive:L&&(d==null?void 0:d.operation)==="resize"}:null},children:nt.current})});return gt?f.jsx("div",{children:yt.createPortal(it,document.body)}):it}const Xt={root:"awsui_root_3gfu1_3lgbu_5"};function F(e){return f.jsx("span",{...e,className:y(Xt.root,e.className)})}const $t={handle:"awsui_handle_cc1pu_v7z7o_5"};function Ut(e,t){function n(i){var o;i.button===0&&((o=e.onPointerDown)===null||o===void 0||o.call(e,i))}return f.jsx("button",{...e,onPointerDown:n,className:y($t.handle,e.className),ref:t})}const dt=h.forwardRef(Ut),ot={handle:"awsui_handle_umbhe_1ftli_9",active:"awsui_active_umbhe_1ftli_17"};function Wt({ariaLabelledBy:e,ariaDescribedBy:t,onPointerDown:n,onKeyDown:i,isActive:o},a){return f.jsx(dt,{ref:a,className:y(ot.handle,o&&ot.active),"aria-labelledby":e,"aria-describedby":t,onPointerDown:n,onKeyDown:i,children:f.jsx(rt,{name:"drag-indicator"})})}const qt=h.forwardRef(Wt),st={handle:"awsui_handle_19hnz_imz5c_9",active:"awsui_active_19hnz_imz5c_16"};function Gt({ariaLabelledBy:e,ariaDescribedBy:t,onPointerDown:n,onKeyDown:i,isActive:o}){return f.jsx(dt,{className:y(st.handle,o&&st.active),"aria-labelledby":e,"aria-describedby":t,onPointerDown:n,onKeyDown:i,children:f.jsx(rt,{name:"resize-area"})})}const w={root:"awsui_root_9ckv7_h5u0j_9","container-override":"awsui_container-override_9ckv7_h5u0j_14",active:"awsui_active_9ckv7_h5u0j_14",header:"awsui_header_9ckv7_h5u0j_36",flexible:"awsui_flexible_9ckv7_h5u0j_43",handle:"awsui_handle_9ckv7_h5u0j_47",refresh:"awsui_refresh_9ckv7_h5u0j_50","header-content":"awsui_header-content_9ckv7_h5u0j_54",settings:"awsui_settings_9ckv7_h5u0j_58",fixed:"awsui_fixed_9ckv7_h5u0j_66",resizer:"awsui_resizer_9ckv7_h5u0j_70"};function Jt({handle:e,children:t,settings:n}){return f.jsxs("div",{className:y(w.header,w.refresh),children:[f.jsx("div",{className:y(w.fixed,w.handle),children:e}),f.jsx("div",{className:y(w.flexible,w["header-content"]),children:t}),n?f.jsx("div",{className:y(w.fixed,w.settings),children:n}):null]})}function Qt({children:e,header:t,settings:n,disableContentPaddings:i,footer:o,i18nStrings:a,__internalRootRef:c,...r}){const{dragHandle:l,resizeHandle:p,isActive:j}=Kt(),k=h.useId(),C=h.useId(),N=h.useId(),A=h.useId();return f.jsxs("div",{ref:c,className:w.root,...Nt(r),children:[f.jsx(Dt,{fitHeight:!0,disableHeaderPaddings:!0,header:f.jsx(Jt,{handle:f.jsx(qt,{ref:l.ref,ariaLabelledBy:k,ariaDescribedBy:C,onPointerDown:l.onPointerDown,onKeyDown:l.onKeyDown,isActive:l.isActive}),settings:n,children:t}),footer:o,disableContentPaddings:i,className:y(w["container-override"],j&&w.active),children:e}),p&&f.jsx("div",{className:w.resizer,children:f.jsx(Gt,{ariaLabelledBy:N,ariaDescribedBy:A,onPointerDown:p.onPointerDown,onKeyDown:p.onKeyDown,isActive:p.isActive})}),f.jsx(F,{id:k,children:a.dragHandleAriaLabel}),f.jsx(F,{id:C,children:a.dragHandleAriaDescription}),f.jsx(F,{id:N,children:a.resizeHandleAriaLabel}),f.jsx(F,{id:A,children:a.resizeHandleAriaDescription})]})}function Zt(e){const t=kt("BoardItem",{props:{disableContentPaddings:e.disableContentPaddings}});return f.jsx(Qt,{...e,...t})}Ct(Zt,"BoardItem");export{Zt as B,_ as C,oe as I,F as S,kt as a,Ct as b,ie as c,Nt as g,K as u};
