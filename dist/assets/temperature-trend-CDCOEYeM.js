import{R as l,r as N,b6 as O,Y as F,p as y,b3 as j,aL as k,b7 as A,O as T,P as C,b8 as $,_ as H,n as P,u as B,c as M,j as i,C as v,B as w,H as D,I as S}from"./index-BE4yRgP3.js";import{S as K}from"./index-8wIlR2Xv.js";import{L as z}from"./index-CjMt4hiR.js";import{I as U}from"./internal-BV8Tvtkr.js";import{I as E}from"./internal-BwkHy2e0.js";import"./internal-DAQawv_t.js";import"./index-lJMXPkzM.js";import"./internal-DWOdD0Qw.js";import"./index-CWZQ9OB-.js";import"./index-Le2aB-FB.js";import"./use-select-BUQYPFrV.js";import"./dismiss-button-Pv9gVCkh.js";import"./index-DFd9ICZj.js";import"./is-development-CxJkH8d1.js";import"./internal-CXCLALy2.js";import"./index-5qndC0qu.js";import"./index-ByYgjtW3.js";const p={segment:"awsui_segment_8cbea_y85gu_161",refresh:"awsui_refresh_8cbea_y85gu_187",disabled:"awsui_disabled_8cbea_y85gu_193",selected:"awsui_selected_8cbea_y85gu_256",icon:"awsui_icon_8cbea_y85gu_279","with-text":"awsui_with-text_8cbea_y85gu_283","with-no-text":"awsui_with-no-text_8cbea_y85gu_289",root:"awsui_root_8cbea_y85gu_294","segment-part":"awsui_segment-part_8cbea_y85gu_326",select:"awsui_select_8cbea_y85gu_256","segment-count-2":"awsui_segment-count-2_8cbea_y85gu_362","segment-count-3":"awsui_segment-count-3_8cbea_y85gu_366","segment-count-4":"awsui_segment-count-4_8cbea_y85gu_370","segment-count-5":"awsui_segment-count-5_8cbea_y85gu_374","segment-count-6":"awsui_segment-count-6_8cbea_y85gu_378","disabled-reason-tooltip":"awsui_disabled-reason-tooltip_8cbea_y85gu_382"},W=l.forwardRef(({disabled:r,disabledReason:a,text:g,iconName:n,iconAlt:h,iconUrl:b,iconSvg:f,isActive:u,onClick:s,onKeyDown:x,tabIndex:_,id:t},c)=>{const e=N.useRef(null),[o,d]=N.useState(!1),m=r&&!!a,{targetProps:V,descriptionEl:I}=O(a),L=j();return l.createElement("button",Object.assign({className:y(p.segment,{[p.disabled]:!!r},{[p.selected]:u},{[p.refresh]:L}),ref:F(c,e),onClick:s,onKeyDown:x,disabled:r&&!a,"aria-disabled":m?"true":void 0,type:"button",tabIndex:_,"aria-pressed":u?"true":"false","aria-label":g?void 0:h,onFocus:m?()=>d(!0):void 0,onBlur:m?()=>d(!1):void 0,onMouseEnter:m?()=>d(!0):void 0,onMouseLeave:m?()=>d(!1):void 0},m?V:{},{"data-testid":t}),(n||b||f)&&l.createElement(k,{className:y(p.icon,g?p["with-text"]:p["with-no-text"]),name:n,url:b,svg:f,alt:h,variant:r?"disabled":"normal"}),l.createElement("span",null,g),m&&l.createElement(l.Fragment,null,I,o&&l.createElement(A,{className:p["disabled-reason-tooltip"],trackRef:e,value:a,onDismiss:()=>d(!1)})))});function Y({selectedId:r,options:a,label:g,ariaLabelledby:n,onChange:h}){const b=N.useRef({}),f=(a||[]).filter(t=>t.id===r),u=f.length?f[0]:null,s=(a||[]).filter(t=>!t.disabled||t.disabled&&!!t.disabledReason),x=(t,c)=>{var e;if(t.keyCode!==C.right&&t.keyCode!==C.left)return;let o=c;$(t,{onInlineStart:()=>o=c===0?s.length-1:c-1,onInlineEnd:()=>o=c+1===s.length?0:c+1});const d=s[o].id;(e=b.current[d])===null||e===void 0||e.focus()},_=j();return l.createElement("div",{className:y(p["segment-part"],p[`segment-count-${a==null?void 0:a.length}`],{[p.refresh]:_}),"aria-label":g,"aria-labelledby":n,role:"toolbar"},a&&a.map((t,c)=>{const e=r===t.id,o=s.indexOf(t);let d=e?0:-1;return u===null&&o===0&&(d=0),l.createElement(W,{key:c,id:t.id,disabled:!!t.disabled,disabledReason:t.disabledReason,iconName:t.iconName,iconAlt:t.iconAlt,iconUrl:t.iconUrl,iconSvg:t.iconSvg,text:t.text,isActive:e,tabIndex:d,ref:m=>{m?b.current[t.id]=m:delete b.current[t.id]},onClick:()=>{t.disabled||r!==t.id&&T(h,{selectedId:t.id})},onKeyDown:m=>x(m,o)})}))}function q(r){var{selectedId:a,options:g,label:n,ariaLabelledby:h,onChange:b,__internalRootRef:f=null}=r,u=H(r,["selectedId","options","label","ariaLabelledby","onChange","__internalRootRef"]);const s=P(u),x=(g||[]).map(e=>{const o=e.text||e.iconAlt;return Object.assign(Object.assign({},e),{label:o,value:e.id})}),_=x.filter(e=>e.value===a),t=_.length?_[0]:null,c={options:x,selectedOption:t,triggerVariant:"option",onChange:e=>T(b,{selectedId:e.detail.selectedOption.value})};return l.createElement("div",Object.assign({},s,{className:y(s.className,p.root),ref:f}),l.createElement(Y,{selectedId:a,options:g,label:n,ariaLabelledby:h,onChange:b}),l.createElement("div",{className:p.select},h&&l.createElement(E,Object.assign({},c,{ariaLabelledby:h})),!h&&n&&l.createElement(U,{label:n,stretch:!0},l.createElement(E,Object.assign({},c))),!h&&!n&&l.createElement(E,Object.assign({},c))))}function R(r){var a;const g=B("SegmentedControl",{props:{},metadata:{hasDisabledReasons:((a=r.options)!==null&&a!==void 0?a:[]).some(n=>!!n.disabledReason)}});return l.createElement(q,Object.assign({},r,g))}M(R,"SegmentedControl");function ue({hourlyData:r,dailyData:a,loading:g}){const[n,h]=N.useState("hourly");if(g)return i.jsxDEV(v,{header:i.jsxDEV(D,{variant:"h2",children:"Temperature Trends"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:27,columnNumber:26},this),children:i.jsxDEV(w,{textAlign:"center",padding:"xl",children:[i.jsxDEV(K,{size:"large"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:29,columnNumber:11},this),i.jsxDEV(w,{variant:"p",margin:{top:"s"},children:"Loading temperature data..."},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:30,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:28,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:27,columnNumber:7},this);if(!r&&!a)return i.jsxDEV(v,{header:i.jsxDEV(D,{variant:"h2",children:"Temperature Trends"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:40,columnNumber:26},this),children:i.jsxDEV(w,{textAlign:"center",padding:"xl",children:[i.jsxDEV(S,{name:"status-warning",size:"large"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:42,columnNumber:11},this),i.jsxDEV(w,{variant:"p",margin:{top:"s"},children:"Temperature data unavailable"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:43,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:41,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:40,columnNumber:7},this);const b=()=>{if(!r||!r.time||r.time.length===0)return[];const e=Math.min(48,r.time.length);return r.time.slice(0,e).map((o,d)=>({x:new Date(o),y:Math.round(r.temperature_2m[d]*10)/10}))},f=()=>{if(!a||!a.time||a.time.length===0)return{maxData:[],minData:[]};const e=a.time.map((d,m)=>({x:new Date(d),y:Math.round(a.temperature_2m_max[m]*10)/10})),o=a.time.map((d,m)=>({x:new Date(d),y:Math.round(a.temperature_2m_min[m]*10)/10}));return{maxData:e,minData:o}},u=b(),s=f(),x=u.length>0?[u[0].x,u[u.length-1].x]:[new Date,new Date],_=s.maxData.length>0?[s.maxData[0].x,s.maxData[s.maxData.length-1].x]:[new Date,new Date],t=n==="hourly"?[{title:"Temperature",type:"line",data:u,valueFormatter:e=>`${e}°C`}]:[{title:"Daily High",type:"line",data:s.maxData,valueFormatter:e=>`${e}°C`},{title:"Daily Low",type:"line",data:s.minData,valueFormatter:e=>`${e}°C`}],c=n==="hourly"?x:_;return i.jsxDEV(v,{header:i.jsxDEV(D,{variant:"h2",description:"Temperature changes over time",actions:i.jsxDEV(R,{selectedId:n,onChange:({detail:e})=>h(e.selectedId),options:[{id:"hourly",text:"Hourly (48h)"},{id:"daily",text:"Daily (7d)"}]},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:125,columnNumber:13},this),children:"Temperature Trends"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:121,columnNumber:9},this),children:n==="hourly"&&u.length===0||n==="daily"&&s.maxData.length===0?i.jsxDEV(w,{textAlign:"center",padding:"xl",children:[i.jsxDEV(S,{name:"status-warning",size:"large"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:142,columnNumber:11},this),i.jsxDEV(w,{variant:"p",margin:{top:"s"},children:["No ",n," temperature data available"]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:143,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:141,columnNumber:9},this):i.jsxDEV(z,{series:t,xDomain:c,xScaleType:"time",xTitle:"Time",yTitle:"Temperature (°C)",height:300,hideFilter:!0,hideLegend:!1,ariaLabel:`${n==="hourly"?"Hourly":"Daily"} temperature chart`,ariaDescription:`Line chart showing temperature ${n==="hourly"?"for the next 48 hours":"highs and lows for the next 7 days"}`,i18nStrings:{filterLabel:"Filter displayed data",filterPlaceholder:"Filter data",filterSelectedAriaLabel:"selected",legendAriaLabel:"Legend",chartAriaRoleDescription:"line chart",xTickFormatter:e=>n==="hourly"?new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),yTickFormatter:e=>`${e}°C`},detailPopoverSeriesContent:({series:e,y:o})=>({key:e.title,value:`${o}°C`})},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:148,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/temperature-trend.tsx",lineNumber:119,columnNumber:5},this)}export{ue as TemperatureTrendWidget};
