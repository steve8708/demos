import{v as q,r as b,D as ie,t as ae,R as i,aR as Ce,az as $,p as E,bf as ke,bN as Te,bO as he,a3 as we,bP as M,bQ as G,x as Q,a4 as ye,o as Ae,A as se,E as je,aY as Ie,_ as re,n as Le,aT as Be,Y as ze,ap as Oe,M as Re,w as ee,bR as Fe,O as Y,u as Pe,G as De,a1 as $e,c as Ue,j as T}from"./index-D7GDf1UU.js";import{H as Me}from"./index-rKPC9sZl.js";import{I as Ve}from"./internal-THOVUYuj.js";import{ExternalLinkGroup as We}from"./external-link-group-CGOo0M8r.js";import{InfoLink as He}from"./info-link-BUuWadNp.js";import"./help-panel--kfHykU3.js";import{Notifications as Ke}from"./notifications-CbwoBAyE.js";import{CustomAppLayout as Ye}from"./common-components-B8mKgWVL.js";import qe from"./step1-JRmO2n62.js";import Ge from"./step2-BmKR5Qle.js";import Qe from"./step3-CLTDAv2p.js";import Je from"./step4-Bt9g2D7A.js";import{TOOLS_CONTENT as le,DEFAULT_STEP_INFO as Xe}from"./steps-config-CohlbCSH.js";import{Breadcrumbs as Ze,Navigation as et}from"./wizard-components-CIITetOo.js";import"./internal-D9lY1pv7.js";import"./index-fxqSwigp.js";import"./disclaimer-flashbar-item-BebvEA8G.js";import"./all.en-CcUG2Ztv.js";import"./apply-mode-BcR-LfXG.js";import"./local-storage-JknLDoWi.js";import"./breadcrumbs-qiXrpGnq.js";import"./index-CqlHI4IQ.js";import"./external-link-71GuX4w8.js";import"./full-page-header-BXIASHo3.js";import"./navigation-BIDWPOVH.js";import"./index-BlYptjXd.js";import"./internal-BD_qYRjX.js";import"./is-development-CxJkH8d1.js";import"./index-CzmrE8hw.js";import"./internal-DCHtC1V6.js";import"./index-C7dlS6m8.js";import"./internal-Basygvw4.js";import"./radio-group-BfVKeN4q.js";import"./index-D5tI8lFG.js";import"./internal-DQx_AHCB.js";import"./index-DOUzosrE.js";import"./index-C8soZkHE.js";import"./use-select-BZucm8VV.js";import"./index-CrIdmadX.js";import"./index-D013joPb.js";import"./internal-DSVXbpju.js";import"./index-NcvgQLDV.js";import"./index-GgDZoIRm.js";import"./index-wVODuUbl.js";import"./internal-CcQJaSSR.js";import"./index-CqfGKjfD.js";import"./index-BmhwJCRy.js";import"./index-B_G3Jq6_.js";function tt(t,o,a){const n=b.useRef(!1);b.useEffect(()=>{const s=setTimeout(()=>n.current=!0,0);return()=>{clearTimeout(s),n.current=!1}},[t]);const e=a.map(s=>s.title).join();b.useEffect(()=>{!t||!n.current||ie.funnelChange({funnelInteractionId:t,funnelIdentifier:o,stepConfiguration:ce(a)})},[t,e])}function ce(t){return t.map((o,a)=>{var n;const e=q(o);return{name:o.title,number:a+1,isOptional:(n=o.isOptional)!==null&&n!==void 0?n:!1,stepIdentifier:e==null?void 0:e.instanceIdentifier}})}const U=(t,o,a=!1,n)=>{const e={detail:{targetStepIndex:`${t}`,reason:o}};return a&&(e.action="navigate"),n&&(e.detail.label=n),ae(e)};class te extends i.Component{componentWillUnmount(){this.props.onUnmount()}render(){return this.props.children}}const l={root:"awsui_root_1xupv_2js2v_145",wizard:"awsui_wizard_1xupv_2js2v_177",refresh:"awsui_refresh_1xupv_2js2v_177","small-container":"awsui_small-container_1xupv_2js2v_184",navigation:"awsui_navigation_1xupv_2js2v_193",number:"awsui_number_1xupv_2js2v_226",circle:"awsui_circle_1xupv_2js2v_242",title:"awsui_title_1xupv_2js2v_253",active:"awsui_active_1xupv_2js2v_284",disabled:"awsui_disabled_1xupv_2js2v_295",enabled:"awsui_enabled_1xupv_2js2v_305",form:"awsui_form_1xupv_2js2v_349","form-header":"awsui_form-header_1xupv_2js2v_354","form-header-content":"awsui_form-header-content_1xupv_2js2v_369","form-component":"awsui_form-component_1xupv_2js2v_373",hidden:"awsui_hidden_1xupv_2js2v_387","collapsed-steps":"awsui_collapsed-steps_1xupv_2js2v_391","collapsed-steps-hidden":"awsui_collapsed-steps-hidden_1xupv_2js2v_396","form-header-component-wrapper":"awsui_form-header-component-wrapper_1xupv_2js2v_400","form-header-component":"awsui_form-header-component_1xupv_2js2v_400","navigation-link":"awsui_navigation-link_1xupv_2js2v_416","navigation-link-item":"awsui_navigation-link-item_1xupv_2js2v_417","navigation-link-label":"awsui_navigation-link-label_1xupv_2js2v_418","navigation-link-active":"awsui_navigation-link-active_1xupv_2js2v_422","navigation-link-disabled":"awsui_navigation-link-disabled_1xupv_2js2v_427","cancel-button":"awsui_cancel-button_1xupv_2js2v_431","previous-button":"awsui_previous-button_1xupv_2js2v_432","primary-button":"awsui_primary-button_1xupv_2js2v_433","skip-to-button":"awsui_skip-to-button_1xupv_2js2v_434","action-buttons":"awsui_action-buttons_1xupv_2js2v_438"};function nt({cancelButtonText:t,onCancelClick:o,isPrimaryLoading:a,primaryButtonText:n,primaryButtonLoadingText:e,onPrimaryClick:s,showPrevious:c,previousButtonText:m,onPreviousClick:d,showSkipTo:r,skipToButtonText:g,onSkipToClick:u,isLastStep:v,activeStepIndex:S,skipToStepIndex:h}){const w=b.useRef(null),C=b.useRef(null),y=()=>{var x,p;((x=w.current)===null||x===void 0?void 0:x.querySelector(`.${l["previous-button"]}`))===document.activeElement&&((p=C.current)===null||p===void 0||p.focus())},I=()=>{var x,p;((x=w.current)===null||x===void 0?void 0:x.querySelector(`.${l["skip-to-button"]}`))===document.activeElement&&((p=C.current)===null||p===void 0||p.focus())};return i.createElement("div",{ref:w},i.createElement(Ce,{direction:"horizontal",size:"xs",className:l["action-buttons"]},i.createElement($,{className:l["cancel-button"],variant:"link",formAction:"none",onClick:o,analyticsAction:"cancel"},t),r&&g&&i.createElement(te,{onUnmount:I},i.createElement("span",Object.assign({},U(h,"skip")),i.createElement($,{className:l["skip-to-button"],onClick:u,formAction:"none",disabled:a,analyticsAction:"navigate"},g))),c&&i.createElement(te,{onUnmount:y},i.createElement("span",Object.assign({},U(S-1,"previous")),i.createElement($,{className:l["previous-button"],onClick:d,formAction:"none",disabled:a,analyticsAction:"navigate"},m))),i.createElement("span",Object.assign({},v?{}:U(S+1,"next")),i.createElement($,{ref:C,className:l["primary-button"],variant:"primary",formAction:"none",onClick:s,loading:a,loadingText:e,analyticsAction:v?"submit":"navigate"},n))))}function ot({children:t}){return i.createElement("div",{className:E(l["form-header"],l["form-header-refresh"])},i.createElement("div",{className:l["form-header-content"]},t))}const ue=`[${M}="${G}"]`;function it(t){const o=q(t.steps[t.activeStepIndex]),a=ke("WizardForm",Te,Object.assign({},o)),n=b.useRef(null);return he(()=>{var e;n&&n.current&&((e=n.current)===null||e===void 0||e.focus())},[t.activeStepIndex]),i.createElement(we,{stepIdentifier:o==null?void 0:o.instanceIdentifier,stepErrorContext:o==null?void 0:o.errorContext,stepNameSelector:ue,stepNumber:t.activeStepIndex+1},i.createElement(at,Object.assign({stepHeaderRef:n,__internalRootRef:a},t)))}function at({__internalRootRef:t,stepHeaderRef:o,steps:a,activeStepIndex:n,showCollapsedSteps:e,i18nStrings:s,submitButtonText:c,isPrimaryLoading:m,allowSkipTo:d,secondaryActions:r,onCancelClick:g,onPreviousClick:u,onPrimaryClick:v,onSkipToClick:S}){var h;const{title:w,info:C,description:y,content:I,errorText:x,isOptional:p}=a[n]||{},L=n>=a.length-1,A=st(a,n),{funnelInteractionId:R,funnelIdentifier:P}=Q(),_=ye(),k=Ae("wizard-error-"),V=d&&A!==-1,W=A!==-1&&s.skipToButtonLabel?s.skipToButtonLabel(a[A],A+1):void 0;return b.useEffect(()=>{var O,F;if(R&&x){const H=se(_.current.stepNameSelector);ie.funnelStepError({funnelInteractionId:R,stepNumber:_.current.stepNumber,stepNameSelector:_.current.stepNameSelector,stepName:H,stepIdentifier:_.current.stepIdentifier,currentDocument:(O=t==null?void 0:t.current)===null||O===void 0?void 0:O.ownerDocument,totalSubSteps:_.current.subStepCount.current,funnelIdentifier:P,subStepAllSelector:je(),stepErrorContext:_.current.stepErrorContext,subStepConfiguration:(F=_.current.subStepConfiguration.current)===null||F===void 0?void 0:F.get(_.current.stepNumber),stepErrorSelector:"#"+k})}},[R,P,L,x,t,k,_]),i.createElement(i.Fragment,null,i.createElement(ot,null,i.createElement("div",{className:E(l["collapsed-steps"],!e&&l["collapsed-steps-hidden"])},(h=s.collapsedStepsLabel)===null||h===void 0?void 0:h.call(s,n+1,a.length)),i.createElement(Ie,{className:l["form-header-component"],variant:"h1",description:y,info:C,__headingTagRef:o,__headingTagTabIndex:-1},i.createElement("span",{className:l["form-header-component-wrapper"]},i.createElement("span",Object.assign({},{[M]:G}),w),p&&i.createElement("i",null,` - ${s.optional}`)))),i.createElement(Ve,Object.assign({__internalRootRef:t,className:l["form-component"],actions:i.createElement(nt,{cancelButtonText:s.cancelButton,primaryButtonText:L?c??s.submitButton:s.nextButton,primaryButtonLoadingText:L?s.submitButtonLoadingAnnouncement:s.nextButtonLoadingAnnouncement,previousButtonText:s.previousButton,onCancelClick:g,onPreviousClick:u,onPrimaryClick:v,onSkipToClick:()=>S(A),showPrevious:n!==0,isPrimaryLoading:m,showSkipTo:V,skipToButtonText:W,isLastStep:L,activeStepIndex:n,skipToStepIndex:A}),secondaryActions:r,errorText:x,__errorSlotId:k,errorIconAriaLabel:s.errorIconAriaLabel},_.current.funnelStepProps),I))}function st(t,o){let a=o;do a++;while(a<t.length-1&&t[a].isOptional);return a>o+1?a:-1}const ne={"step-title":"awsui_step-title_zr0a1_2uwax_5"};var f;(function(t){t.Active="active",t.Unvisited="unvisited",t.Visited="visited",t.Next="next"})(f||(f={}));function rt({activeStepIndex:t,farthestStepIndex:o,allowSkipTo:a,hidden:n,i18nStrings:e,isLoadingNextStep:s,onStepClick:c,onSkipToClick:m,steps:d}){return i.createElement("nav",{className:E(l.navigation,n&&l.hidden,l.refresh),"aria-label":e.navigationAriaLabel},i.createElement("ul",{className:E(l.refresh)},d.map((u,v)=>i.createElement(lt,{i18nStrings:e,index:v,key:v,onStepClick:c,onSkipToClick:m,status:r(v),step:u}))));function r(u){return t===u?f.Active:s?f.Unvisited:o>=u?f.Visited:a&&g(t+1,u)?f.Next:f.Unvisited}function g(u,v){let S=u;do{if(!d[S].isOptional)return!1;S++}while(S<v);return!0}}function lt({i18nStrings:t,index:o,onStepClick:a,onSkipToClick:n,status:e,step:s}){function c(){e===f.Visited&&a(o),e===f.Next&&n(o)}const m={active:"active",unvisited:"disabled",visited:"enabled",next:"enabled"}[e],d=E(l["navigation-link"],{[l["navigation-link-active"]]:e===f.Active,[l["navigation-link-disabled"]]:e===f.Unvisited});return i.createElement("li",{className:E(l[`${m}`],l["navigation-link-item"])},i.createElement("hr",null),i.createElement("span",{className:E(l.number,l["navigation-link-label"])},t.stepNumberLabel&&t.stepNumberLabel(o+1),s.isOptional&&i.createElement("i",null,` - ${t.optional}`)),i.createElement("a",Object.assign({className:d,"aria-current":e===f.Active?"step":void 0,"aria-disabled":e===f.Unvisited?"true":void 0,onClick:r=>{r.preventDefault(),c()},onKeyDown:r=>{(r.key===" "||r.key==="Enter")&&r.preventDefault(),r.key==="Enter"&&c()},onKeyUp:r=>{r.key===" "&&c()},role:"button",tabIndex:e===f.Visited||e===f.Next?0:void 0},e===f.Unvisited?{}:U(o,"step",!0,`.${ne["step-title"]}`)),i.createElement("div",{className:l.circle}),i.createElement("span",{className:E(l.title,ne["step-title"])},s.title)))}function ct(t){var o,a,n,e,s,c,m,d,{steps:r,activeStepIndex:g,submitButtonText:u,isLoadingNextStep:v=!1,allowSkipTo:S=!1,secondaryActions:h,onCancel:w,onSubmit:C,onNavigate:y,__internalRootRef:I,__injectAnalyticsComponentMetadata:x=!1}=t,p=re(t,["steps","activeStepIndex","submitButtonText","isLoadingNextStep","allowSkipTo","secondaryActions","onCancel","onSubmit","onNavigate","__internalRootRef","__injectAnalyticsComponentMetadata"]);const L=Le(p),[A,R]=Be(["xs"]),P=ze(R,I),_=A==="default",[k,V]=Oe(g,y,0,{componentName:"Wizard",controlledProp:"activeStepIndex",changeHandler:"onNavigate"}),{funnelIdentifier:W,funnelInteractionId:O,funnelSubmit:F,funnelCancel:H,funnelProps:ve,funnelNextOrSubmitAttempt:fe}=Q(),B=k?Math.min(k,r.length-1):0,K=b.useRef(B);K.current=Math.max(K.current,B);const _e=B>=r.length-1,D=(N,z)=>{O&&se(ue),V(N),Y(y,{requestedStepIndex:N,reason:z})},be=N=>D(N,"step"),J=N=>D(N,"skip"),ge=()=>{H(),Y(w)},Se=()=>D(B-1,"previous"),xe=()=>{fe(),_e?(F(),Y(C)):D(B+1,"next")};tt(O,W,r);const j=Re("wizard"),X=j("i18nStrings.skipToButtonLabel",(o=p.i18nStrings)===null||o===void 0?void 0:o.skipToButtonLabel,N=>z=>N({task__title:z.title})),Z=Object.assign(Object.assign({},p.i18nStrings),{skipToButtonLabel:X,stepNumberLabel:j("i18nStrings.stepNumberLabel",(a=p.i18nStrings)===null||a===void 0?void 0:a.stepNumberLabel,N=>z=>N({stepNumber:z})),collapsedStepsLabel:j("i18nStrings.collapsedStepsLabel",(n=p.i18nStrings)===null||n===void 0?void 0:n.collapsedStepsLabel,N=>(z,Ee)=>N({stepNumber:z,stepsCount:Ee})),navigationAriaLabel:j("i18nStrings.navigationAriaLabel",(e=p.i18nStrings)===null||e===void 0?void 0:e.navigationAriaLabel),cancelButton:j("i18nStrings.cancelButton",(s=p.i18nStrings)===null||s===void 0?void 0:s.cancelButton),previousButton:j("i18nStrings.previousButton",(c=p.i18nStrings)===null||c===void 0?void 0:c.previousButton),nextButton:j("i18nStrings.nextButton",(m=p.i18nStrings)===null||m===void 0?void 0:m.nextButton),optional:j("i18nStrings.optional",(d=p.i18nStrings)===null||d===void 0?void 0:d.optional)});k&&k>=r.length&&ee("Wizard",`You have set \`activeStepIndex\` to ${k} but you have provided only ${r.length} steps. Its value is ignored and the component uses ${r.length-1} instead.`),S&&!X&&ee("Wizard","You have set `allowSkipTo` but you have not provided `i18nStrings.skipToButtonLabel`. The skip-to button will not be rendered.");const Ne={name:"awsui.Wizard",label:{root:"body",selector:`[${M}="${Fe}"]`},properties:Object.assign({stepsCount:`${(r||[]).length}`,activeStepIndex:`${k}`,activeStepLabel:`[${M}="${G}"]`},p.analyticsMetadata||{})};return i.createElement("div",Object.assign({},L,ve,{ref:P,className:E(l.root,L.className)},x?ae({component:Ne}):{}),i.createElement("div",{className:E(l.wizard,l.refresh,_&&l["small-container"])},i.createElement(rt,{activeStepIndex:B,farthestStepIndex:K.current,allowSkipTo:S,hidden:_,i18nStrings:Z,isLoadingNextStep:v,onStepClick:be,onSkipToClick:J,steps:r}),i.createElement("div",{className:E(l.form,l.refresh,_&&l["small-container"])},i.createElement(it,{steps:r,showCollapsedSteps:_,i18nStrings:Z,submitButtonText:u,activeStepIndex:B,isPrimaryLoading:v,allowSkipTo:S,secondaryActions:h,onCancelClick:ge,onPreviousClick:Se,onSkipToClick:J,onPrimaryClick:xe}))))}function pe(t){var{isLoadingNextStep:o=!1,allowSkipTo:a=!1}=t,n=re(t,["isLoadingNextStep","allowSkipTo"]);const e=q(n),s=Pe("Wizard",{props:{allowSkipTo:a,flowType:e.flowType},metadata:{hasInstanceIdentifier:!!(e!=null&&e.instanceIdentifier),hasResourceType:!!(e!=null&&e.resourceType)}},e),{wizardCount:c}=Q(),m=De(n);return b.useEffect(()=>(c.current++,()=>void c.current--),[c]),i.createElement($e,{funnelIdentifier:e==null?void 0:e.instanceIdentifier,funnelFlowType:e==null?void 0:e.flowType,funnelErrorContext:e==null?void 0:e.errorContext,funnelResourceType:e==null?void 0:e.resourceType,funnelType:"multi-page",optionalStepNumbers:n.steps.map((d,r)=>d.isOptional?r+1:-1).filter(d=>d!==-1),totalFunnelSteps:n.steps.length,stepConfiguration:ce(n.steps)},i.createElement(ct,Object.assign({isLoadingNextStep:o,allowSkipTo:a},m,s,{__injectAnalyticsComponentMetadata:!0})))}Ue(pe,"Wizard");const de=[{title:"Select engine type",stateKey:"engine",StepContent:qe},{title:"Specify instance details",stateKey:"details",StepContent:Ge},{title:"Configure settings",stateKey:"advanced",StepContent:Qe},{title:"Review and create",stateKey:"review",StepContent:Je}],ut={submitButton:"Create DB instance",stepNumberLabel:t=>`Step ${t}`,collapsedStepsLabel:(t,o)=>`Step ${t} of ${o}`},me=t=>le[de[t].stateKey].default,oe=t=>T.jsxDEV(Me,{header:T.jsxDEV("h2",{children:t.title},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:53,columnNumber:22},void 0),footer:T.jsxDEV(We,{items:t.links},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:53,columnNumber:54},void 0),children:t.content},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:53,columnNumber:3},void 0),pt=()=>{const[t,o]=b.useState(oe(me(0))),[a,n]=b.useState(!1),e=b.useRef(null),s=r=>{o(oe(r))};return{toolsContent:t,isToolsOpen:a,setHelpPanelContent:r=>{var g;r&&s(r),n(!0),(g=e.current)==null||g.focusToolsClose()},closeTools:()=>n(!1),setFormattedToolsContent:s,onToolsChange:r=>n(r.detail.open),appLayoutRef:e}},dt=(t,o)=>{const[a,n]=b.useState(0),[e,s]=b.useState(Xe),c=b.useCallback((u,v)=>{s({...e,[u]:{...e[u],...v}})},[e]),m=u=>{n(u),o(me(u)),t()};return{activeStepIndex:a,stepsInfo:e,setActiveStepIndexAndCloseTools:m,onStepInfoChange:c,onNavigate:u=>{m(u.detail.requestedStepIndex)},onCancel:()=>{console.log("Cancel")},onSubmit:()=>{console.log(e)}}},ln=()=>{const{toolsContent:t,isToolsOpen:o,setHelpPanelContent:a,closeTools:n,setFormattedToolsContent:e,onToolsChange:s,appLayoutRef:c}=pt(),{activeStepIndex:m,stepsInfo:d,setActiveStepIndexAndCloseTools:r,onStepInfoChange:g,onNavigate:u,onCancel:v,onSubmit:S}=dt(n,e),h=de.map(({title:w,stateKey:C,StepContent:y})=>({title:w,info:T.jsxDEV(He,{onFollow:()=>a(le[C].default)},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:159,columnNumber:11},void 0),content:T.jsxDEV(y,{info:d,onChange:I=>g(C,I),setHelpPanelContent:a,setActiveStepIndex:r},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:161,columnNumber:7},void 0)}));return T.jsxDEV(Ye,{ref:c,navigation:T.jsxDEV(et,{},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:172,columnNumber:19},void 0),tools:t,toolsOpen:o,onToolsChange:s,breadcrumbs:T.jsxDEV(Ze,{},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:176,columnNumber:20},void 0),contentType:"wizard",content:T.jsxDEV(pe,{steps:h,activeStepIndex:m,i18nStrings:ut,onNavigate:u,onCancel:v,onSubmit:S},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:179,columnNumber:9},void 0),notifications:T.jsxDEV(Ke,{},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:188,columnNumber:22},void 0)},void 0,!1,{fileName:"/app/code/src/pages/wizard/root.tsx",lineNumber:170,columnNumber:5},void 0)};export{ln as default};
