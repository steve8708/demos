import{r as _,R as o,o as T,p as f,bl as C,aE as x,aR as G,b9 as K,_ as P,n as H,Y,M as Z,O as J}from"./index-DWytQeHI.js";import{D as Q,u as V,T as X,t as D}from"./dismiss-button-D1Zmt1gw.js";import{F as ee,b as ie}from"./internal-MwMY9qEn.js";import{p as A,f as oe}from"./format-date-B0wWljPd.js";const te=e=>{const s=A(`${e.getHours()}`,2),m=A(`${e.getMinutes()}`,2),l=A(`${e.getSeconds()}`,2);return`${s}:${m}:${l}`};function ae(e){return oe(e)+"T"+te(e)}const ne=1e3,O=Math.pow(1e3,2),U=Math.pow(1e3,3),W=Math.pow(1e3,4);function le(e){return e<O?`${(e/ne).toFixed(2)} KB`:e<U?`${(e/O).toFixed(2)} MB`:e<W?`${(e/U).toFixed(2)} GB`:`${(e/W).toFixed(2)} TB`}function se(e){return ae(e)}const t={root:"awsui_root_39ths_7bxfe_209","file-loading-overlay":"awsui_file-loading-overlay_39ths_7bxfe_241","file-loading-overlay-single-row":"awsui_file-loading-overlay-single-row_39ths_7bxfe_246","file-option-name":"awsui_file-option-name_39ths_7bxfe_250","file-option-size":"awsui_file-option-size_39ths_7bxfe_251","file-option-last-modified":"awsui_file-option-last-modified_39ths_7bxfe_252","file-option":"awsui_file-option_39ths_7bxfe_250","file-option-thumbnail":"awsui_file-option-thumbnail_39ths_7bxfe_265","file-option-thumbnail-image":"awsui_file-option-thumbnail-image_39ths_7bxfe_269","file-option-metadata":"awsui_file-option-metadata_39ths_7bxfe_282","with-image":"awsui_with-image_39ths_7bxfe_285","single-row-loading":"awsui_single-row-loading_39ths_7bxfe_288",token:"awsui_token_39ths_7bxfe_292","token-grid":"awsui_token-grid_39ths_7bxfe_299","token-contains-image":"awsui_token-contains-image_39ths_7bxfe_308","token-box":"awsui_token-box_39ths_7bxfe_312",horizontal:"awsui_horizontal_39ths_7bxfe_331",error:"awsui_error_39ths_7bxfe_339",warning:"awsui_warning_39ths_7bxfe_349","read-only":"awsui_read-only_39ths_7bxfe_359",loading:"awsui_loading_39ths_7bxfe_372"};function re({file:e}){const[s,m]=_.useState("");return _.useEffect(()=>{if(URL.createObjectURL){const l=URL.createObjectURL(e);return m(l),()=>{URL.revokeObjectURL(l)}}},[e]),o.createElement("div",{className:t["file-option-thumbnail"],"aria-hidden":!0},o.createElement("img",{className:t["file-option-thumbnail-image"],alt:e.name,src:s}))}const F={root:"awsui_root_polq8_6ggi7_5","file-option-name":"awsui_file-option-name_polq8_6ggi7_7","file-option-size":"awsui_file-option-size_polq8_6ggi7_8","file-option-last-modified":"awsui_file-option-last-modified_polq8_6ggi7_9","ellipsis-active":"awsui_ellipsis-active_polq8_6ggi7_10"};function me({file:e,showFileLastModified:s,showFileSize:m,showFileThumbnail:l,i18nStrings:a,onDismiss:i,errorText:d,warningText:b,readOnly:L,loading:r,alignment:E,groupContainsImage:p,isImage:h,index:I}){var u,v;const z=(u=a==null?void 0:a.formatFileSize)!==null&&u!==void 0?u:le,M=(v=a==null?void 0:a.formatFileLastModified)!==null&&v!==void 0?v:se,R=T("error"),c=T("warning"),n=b&&!d,g=_.useRef(null),y=_.useRef(null),S=_.useRef(null),[q,N]=_.useState(!1),j=k=>{var w;return(w=a==null?void 0:a.removeFileAriaLabel)===null||w===void 0?void 0:w.call(a,k)};function $(){const k=y.current,w=S.current;return k&&w?k.offsetWidth>=w.offsetWidth:!1}const B=!s&&!m&&(!p||p&&!l);return o.createElement("div",{ref:g,className:f(t.token,{[t["token-grid"]]:E==="horizontal",[t["token-contains-image"]]:p&&l}),role:"group","aria-label":e.name,"aria-describedby":d?R:b?c:void 0,"aria-disabled":r,"data-index":I},o.createElement("div",{className:f(t["token-box"],{[t.loading]:r,[t.error]:d,[t.warning]:n,[t.horizontal]:E==="horizontal",[t["read-only"]]:L})},r&&o.createElement("div",{className:f(t["file-loading-overlay"],{[t["file-loading-overlay-single-row"]]:r&&B})},o.createElement(C,{variant:"disabled",size:"normal"})),o.createElement(x,{className:t["file-option"]},l&&h&&o.createElement(re,{file:e}),o.createElement("div",{className:f(t["file-option-metadata"],{[t["with-image"]]:l&&h,[t["single-row-loading"]]:r&&B})},o.createElement(G,{direction:"vertical",size:"xxxs"},o.createElement("div",{onMouseOver:()=>N(!0),onMouseOut:()=>N(!1),ref:S},o.createElement(x,{fontWeight:"normal",className:f(t["file-option-name"],F["file-option-name"],{[F["ellipsis-active"]]:$()})},o.createElement("span",{ref:y},e.name))),m&&e.size?o.createElement(x,{fontSize:"body-s",color:"text-body-secondary",className:f(t["file-option-size"],F["file-option-size"])},z(e.size)):null,s&&e.lastModified?o.createElement(x,{fontSize:"body-s",color:"text-body-secondary",className:f(t["file-option-last-modified"],F["file-option-last-modified"])},M(new Date(e.lastModified))):null))),i&&!L&&o.createElement(Q,{dismissLabel:j(I),onDismiss:i})),d&&o.createElement(ee,{id:R,errorIconAriaLabel:a==null?void 0:a.errorIconAriaLabel},d),n&&o.createElement(ie,{id:c,warningIconAriaLabel:a==null?void 0:a.warningIconAriaLabel},b),q&&$()&&o.createElement(K,{trackRef:g,trackKey:e.name,value:o.createElement(x,{fontWeight:"normal"},e.name),onDismiss:()=>N(!1)}))}function ue(e){var{items:s,showFileLastModified:m,showFileSize:l,showFileThumbnail:a,i18nStrings:i,onDismiss:d,limit:b,readOnly:L,alignment:r="vertical",__internalRootRef:E}=e,p=P(e,["items","showFileLastModified","showFileSize","showFileThumbnail","i18nStrings","onDismiss","limit","readOnly","alignment","__internalRootRef"]);const h=H(p),[I,u]=_.useState(null),v=V({nextFocusIndex:I,onFocusMoved:n=>{n.focus(),u(null)},listItemSelector:`.${D["list-item"]}`,showMoreSelector:`.${D.toggle}`}),z=Y(E,v),M=n=>n.type.startsWith("image/"),R=s.filter(n=>M(n.file)).length>0,c=Z("file-token-group");return o.createElement("div",Object.assign({},h,{ref:z,className:f(h.className,t.root,F.root)}),o.createElement(X,{alignment:r==="horizontal"?"horizontal-grid":r,items:s,renderItem:(n,g)=>o.createElement(me,{file:n.file,showFileLastModified:m,showFileSize:l,showFileThumbnail:a,onDismiss:()=>{J(d,{fileIndex:g}),u(g)},errorText:n.errorText,warningText:n.warningText,i18nStrings:{removeFileAriaLabel:c("i18nStrings.removeFileAriaLabel",i==null?void 0:i.removeFileAriaLabel,y=>S=>y({fileIndex:S+1})),errorIconAriaLabel:c("i18nStrings.errorIconAriaLabel",i==null?void 0:i.errorIconAriaLabel),warningIconAriaLabel:c("i18nStrings.warningIconAriaLabel",i==null?void 0:i.warningIconAriaLabel),formatFileSize:i==null?void 0:i.formatFileSize,formatFileLastModified:i==null?void 0:i.formatFileLastModified},loading:n.loading,readOnly:L,alignment:r,groupContainsImage:R,isImage:M(n.file),index:g}),limit:b,i18nStrings:{limitShowFewer:c("i18nStrings.limitShowFewer",i==null?void 0:i.limitShowFewer),limitShowMore:c("i18nStrings.limitShowMore",i==null?void 0:i.limitShowMore)}}))}export{ue as I};
