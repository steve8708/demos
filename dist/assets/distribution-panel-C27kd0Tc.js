import{R as u,_ as J,r as R,M as se,n as ce,o as I,Y as me,w as P,m as pe,ay as ue,aR as de,p as fe,aE as be,O as q,u as he,G as xe,c as ge,j as i,C as Ne,S as D,a as Y,H as ve}from"./index-D7GDf1UU.js";import{C as Se}from"./index-7YwAc2dD.js";import{D as Fe,T as we}from"./index-B7Ms8rH9.js";import{E as Ee}from"./index-CqfGKjfD.js";import{u as Te,I as De}from"./use-files-dragging-BD-tB1eb.js";import{I as Le,f as Ce}from"./internal-B8uLkLXq.js";import{I as je}from"./internal-D7cIOF98.js";import{F as ye,b as Ie,C as Ve}from"./internal-DCHtC1V6.js";import{c as Re}from"./index-CrIdmadX.js";import{u as Ae,t as $}from"./dismiss-button-CxYB8qlP.js";import{F as h}from"./index-CzmrE8hw.js";import{I as ke}from"./index-BmhwJCRy.js";import{R as Me}from"./index-C7dlS6m8.js";import{S as W}from"./index-D5tI8lFG.js";import{T as Oe}from"./index-om7sV26D.js";import"./common-components-B8mKgWVL.js";import Be from"./use-content-origins-BPLyunop.js";import{CUSTOM_SSL_CERTIFICATES as _e,SUPPORTED_HTTP_VERSIONS_OPTIONS as ze}from"./form-config-N3XWZB5L.js";import T from"./form-validation-config-DmOjk-Dn.js";import{InfoLink as V}from"./info-link-BUuWadNp.js";import"./index-5qndC0qu.js";import"./index-ByYgjtW3.js";import"./format-date-B0wWljPd.js";import"./internal-BD_qYRjX.js";import"./is-development-CxJkH8d1.js";import"./internal-Basygvw4.js";import"./radio-group-BfVKeN4q.js";import"./internal-DQx_AHCB.js";import"./index-DOUzosrE.js";import"./index-C8soZkHE.js";import"./use-select-BZucm8VV.js";import"./all.en-CcUG2Ztv.js";import"./apply-mode-BcR-LfXG.js";import"./local-storage-JknLDoWi.js";import"./breadcrumbs-qiXrpGnq.js";import"./index-CqlHI4IQ.js";import"./external-link-71GuX4w8.js";import"./external-link-group-CGOo0M8r.js";import"./index-fxqSwigp.js";import"./full-page-header-BXIASHo3.js";import"./help-panel--kfHykU3.js";import"./navigation-BIDWPOVH.js";import"./index-BlYptjXd.js";import"./notifications-CbwoBAyE.js";import"./disclaimer-flashbar-item-BebvEA8G.js";import"./_cacheHas-CYLlYDNj.js";import"./_arrayIncludesWith-DkxKNHnR.js";import"./_setToArray-D5OH3LE_.js";const H={root:"awsui_root_1ubbm_139m0_9",hints:"awsui_hints_1ubbm_139m0_10"},Ue=u.forwardRef(Pe);function Pe(l,m){var t,o,x,{accept:c,ariaRequired:n,multiple:a=!1,onChange:S,value:f,tokenLimit:L,showFileSize:N,showFileLastModified:C,showFileThumbnail:F,i18nStrings:e,__internalRootRef:b=null,constraintText:p,errorText:s,warningText:w,fileErrors:d,fileWarnings:j,fileTokenAlignment:Q="vertical"}=l,E=J(l,["accept","ariaRequired","multiple","onChange","value","tokenLimit","showFileSize","showFileLastModified","showFileThumbnail","i18nStrings","__internalRootRef","constraintText","errorText","warningText","fileErrors","fileWarnings","fileTokenAlignment"]);const[X,A]=R.useState(null),Z=Ae({nextFocusIndex:X,onFocusMoved:r=>{r.focus(),A(null)},listItemSelector:`.${$["list-item"]}`,showMoreSelector:`.${$.toggle}`,fallbackSelector:`.${Ce["file-input"]}`}),g=se("file-upload"),k=ce(E),y={showFileSize:N,showFileLastModified:C,showFileThumbnail:F},M=I("error-"),O=I("warning-"),B=I("constraint-text-"),ee=R.useRef(null),ie=me(ee,m);Re("FileUpload","value",f,"onChange",S),!a&&f.length>1&&P("FileUpload","Value must be an array of size 0 or 1 when `multiple=false`.");const _=r=>{const v=a?[...f,...r]:r[0]?r.slice(0,1):[...f];q(S,{value:v})},oe=r=>{const v=f.filter((Ye,le)=>le!==r);q(S,{value:v}),A(r)},{areFilesDragging:te}=Te(),z=w&&!s;w&&s&&P("FileUpload","Both `errorText` and `warningText` exist. `warningText` will not be shown.");const U=pe(E),ne=ue((t=E.ariaDescribedby)!==null&&t!==void 0?t:U.ariaDescribedby,s?M:void 0,z?O:void 0,p?B:void 0),re=!!(s||d!=null&&d.filter(Boolean).length),ae=E.invalid||U.invalid||re;return u.createElement(de,Object.assign({},k,{size:"xs",className:fe(k.className,H.root),__internalRootRef:b,ref:Z}),u.createElement(be,null,te?u.createElement(De,{onChange:r=>_(r.detail.value)},g("i18nStrings.dropzoneText",(o=e==null?void 0:e.dropzoneText)===null||o===void 0?void 0:o.call(e,a),r=>r({multiple:`${a}`}))):u.createElement(Le,{ref:ie,accept:c,ariaRequired:n,multiple:a,onChange:r=>_(r.detail.value),value:f,ariaLabelledby:E.ariaLabelledby,controlId:E.controlId,ariaDescribedby:ne,invalid:ae},g("i18nStrings.uploadButtonText",(x=e==null?void 0:e.uploadButtonText)===null||x===void 0?void 0:x.call(e,a),r=>r({multiple:`${a}`}))),(p||s||w)&&u.createElement("div",{className:H.hints},s&&u.createElement(ye,{id:M,errorIconAriaLabel:g("i18nStrings.errorIconAriaLabel",e==null?void 0:e.errorIconAriaLabel)},s),z&&u.createElement(Ie,{id:O,warningIconAriaLabel:g("i18nStrings.warningIconAriaLabel",e==null?void 0:e.warningIconAriaLabel)},w),p&&u.createElement(Ve,{id:B,hasValidationText:!!s||!!w},p))),f.length>0?u.createElement(je,{limit:L,alignment:Q,items:f.map((r,v)=>({file:r,errorText:d==null?void 0:d[v],warningText:j==null?void 0:j[v]})),showFileLastModified:y.showFileLastModified,showFileSize:y.showFileSize,showFileThumbnail:y.showFileThumbnail,i18nStrings:{removeFileAriaLabel:g("i18nStrings.removeFileAriaLabel",e==null?void 0:e.removeFileAriaLabel,r=>v=>r({fileIndex:v+1})),limitShowFewer:g("i18nStrings.limitShowFewer",e==null?void 0:e.limitShowFewer),limitShowMore:g("i18nStrings.limitShowMore",e==null?void 0:e.limitShowMore),formatFileSize:e==null?void 0:e.formatFileSize,formatFileLastModified:e==null?void 0:e.formatFileLastModified,errorIconAriaLabel:g("i18nStrings.errorIconAriaLabel",e==null?void 0:e.errorIconAriaLabel),warningIconAriaLabel:g("i18nStrings.warningIconAriaLabel",e==null?void 0:e.warningIconAriaLabel)},onDismiss:r=>oe(r.detail.fileIndex)}):null)}const K=u.forwardRef((l,m)=>{var{multiple:t,showFileSize:o,showFileLastModified:x,showFileThumbnail:c}=l,n=J(l,["multiple","showFileSize","showFileLastModified","showFileThumbnail"]);const a=he("FileUpload",{props:{multiple:t,showFileLastModified:x,showFileSize:o,showFileThumbnail:c,tokenLimit:n.tokenLimit}}),S=xe(n);return u.createElement(Ue,Object.assign({ref:m,multiple:t,showFileSize:o,showFileLastModified:x,showFileThumbnail:c},S,a))});ge(K,"FileUpload");function qe({state:l,onChange:m}){return i.jsxDEV(Ee,{headerText:"Additional settings",variant:"footer",children:i.jsxDEV(D,{size:"l",children:[i.jsxDEV(h,{label:"Supported HTTP versions",description:"Choose the version of the HTTP protocol that you want CloudFront to accept for viewer requests.",stretch:!0,children:i.jsxDEV(Me,{items:ze,ariaRequired:!0,value:l.httpVersion,onChange:({detail:{value:t}})=>m("httpVersion",t)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:40,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:35,columnNumber:9},this),i.jsxDEV(h,{label:"IPv6",children:i.jsxDEV(Se,{checked:l.ipv6isOn,onChange:({detail:{checked:t}})=>m("ipv6isOn",t),children:"Turn on"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:47,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:34,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:33,columnNumber:5},this)}const G=(l,m)=>l==="s3BucketSelectedOption"&&m==="CloudFront isn't allowed to write logs to this bucket. You must enable access control lists (ACL) for the bucket.";function _i({loadHelpPanelContent:l,validation:m=!1,data:t,errors:o,setData:x,setErrors:c,refs:n}){const[a,S]=Be(),[f,L]=R.useState(null),N=(e,b)=>{var p;if(x({[e]:b}),!(!m||!o||!c)&&((p=o[e])==null?void 0:p.length)>0){const{errorText:s}=T(e,b);G(e,s)?c({[e]:""}):c({[e]:s})}},C=({detail:e})=>{const b=e.value;if(x({functions:b}),m){const{errorText:p}=T("functions",b),s=b.map(d=>T("functionFile",d).errorText),w=s.every(d=>!d||d.length===0);c==null||c({functions:p,functionFiles:w?[]:s})}},F=e=>{if(!m||!c)return;const b=t[e],{errorText:p}=T(e,b);G(e,p)||c({[e]:p})};return i.jsxDEV(Ne,{id:"distribution-panel",header:i.jsxDEV(ve,{variant:"h2",children:"Distribution settings"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:131,columnNumber:15},this),footer:i.jsxDEV(qe,{state:t,onChange:N},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:132,columnNumber:15},this),children:i.jsxDEV(D,{size:"l",children:[i.jsxDEV(h,{label:"Root object",info:i.jsxDEV(V,{id:"root-object-info-link",onFollow:()=>l(2)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:137,columnNumber:17},this),description:"Enter the URL of the object that you want CloudFront to return when a viewer request points to your root URL.",constraintText:"Enter a  valid root object. Example: https://example.com",errorText:o==null?void 0:o.cloudFrontRootObject,i18nStrings:{errorIconAriaLabel:"Error"},children:i.jsxDEV(ke,{value:t.cloudFrontRootObject,ariaRequired:!0,placeholder:"https://example.com",onChange:({detail:{value:e}})=>N("cloudFrontRootObject",e),onBlur:()=>F("cloudFrontRootObject"),ref:n==null?void 0:n.cloudFrontRootObject,"data-testid":"root-input"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:143,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:135,columnNumber:9},this),i.jsxDEV(h,{label:i.jsxDEV(i.Fragment,{children:["Custom SSL certificate - ",i.jsxDEV("i",{children:"optional"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:157,columnNumber:40},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:156,columnNumber:13},this),description:"Choose a certificate from AWS Certificate Manager",secondaryControl:i.jsxDEV(D,{direction:"horizontal",size:"m",children:[i.jsxDEV(Y,{formAction:"none",iconName:"refresh",ariaLabel:"Refresh custom SSL certificates"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:163,columnNumber:15},this),i.jsxDEV(Y,{formAction:"none",variant:"link",external:!0,children:"Create SSL certificate"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:162,columnNumber:13},this),children:i.jsxDEV(W,{options:_e,selectedOption:f,placeholder:"Choose a custom SSL certificate",onChange:({detail:{selectedOption:e}})=>L(e)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:171,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:154,columnNumber:9},this),i.jsxDEV(h,{label:i.jsxDEV(i.Fragment,{children:["Alternative domain names (CNAMEs)",i.jsxDEV("i",{children:" - optional"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:181,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:180,columnNumber:13},this),info:i.jsxDEV(V,{id:"cnames-info-link",onFollow:()=>l(3)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:184,columnNumber:17},this),description:"List any custom domain names that you use in addition to the CloudFront domain name for the URLs for your files.",constraintText:"Specify up to 3 CNAMEs separated with commas.",stretch:!0,errorText:o==null?void 0:o.alternativeDomainNames,i18nStrings:{errorIconAriaLabel:"Error"},children:i.jsxDEV(Oe,{placeholder:"www.one.example.com, www.two.example.com",value:t.alternativeDomainNames,onChange:({detail:{value:e}})=>N("alternativeDomainNames",e),onBlur:()=>F("alternativeDomainNames"),ref:n==null?void 0:n.alternativeDomainNames},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:191,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:178,columnNumber:9},this),i.jsxDEV(h,{label:"S3 bucket for logs",description:"The Amazon S3 bucket that you want CloudFront to store your access logs in.",errorText:o==null?void 0:o.s3BucketSelectedOption,i18nStrings:{errorIconAriaLabel:"Error"},children:i.jsxDEV(W,{...S,"data-testid":"s3-selector",options:a.options,selectedAriaLabel:"Selected",statusType:a.status,placeholder:"Choose an S3 bucket",loadingText:"Loading buckets",errorText:"Error fetching buckets.",recoveryText:"Retry",finishedText:a.filteringText?`End of "${a.filteringText}" results`:"End of all results",empty:a.filteringText?"We can't find a match":"No origins",filteringType:"manual",filteringAriaLabel:"Filter buckets",filteringClearAriaLabel:"Clear",ariaRequired:!0,selectedOption:t.s3BucketSelectedOption,onChange:({detail:{selectedOption:e}})=>N("s3BucketSelectedOption",e),onBlur:()=>F("s3BucketSelectedOption"),ref:n==null?void 0:n.s3BucketSelectedOption},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:205,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:199,columnNumber:9},this),i.jsxDEV(h,{stretch:!0,label:i.jsxDEV("span",{id:"certificate-expiry-label",children:"Certificate expiry"},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:232,columnNumber:42},this),children:i.jsxDEV(D,{size:"s",direction:"horizontal",children:[i.jsxDEV(h,{stretch:!0,description:"Specify the date when the certificate should expire.",className:"date-time-container",errorText:o==null?void 0:o.certificateExpiryDate,constraintText:"Use YYYY/MM/DD format.",i18nStrings:{errorIconAriaLabel:"Error"},children:i.jsxDEV(Fe,{ariaLabelledby:"certificate-expiry-label",placeholder:"YYYY/MM/DD",previousMonthAriaLabel:"Previous month",nextMonthAriaLabel:"Next month",todayAriaLabel:"Today",value:t.certificateExpiryDate,ariaRequired:!0,onChange:({detail:{value:e}})=>N("certificateExpiryDate",e),openCalendarAriaLabel:e=>"Choose certificate expiry date"+(e?`, selected date is ${e}`:""),onBlur:()=>F("certificateExpiryDate"),ref:n==null?void 0:n.certificateExpiryDate},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:242,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:234,columnNumber:13},this),i.jsxDEV(h,{stretch:!0,description:"Specify the time when the certificate should expire",constraintText:"Use 24-hour format.",className:"date-time-container",errorText:o==null?void 0:o.certificateExpiryTime,i18nStrings:{errorIconAriaLabel:"Error"},children:i.jsxDEV(we,{ariaLabelledby:"certificate-expiry-label",use24Hour:!0,placeholder:"hh:mm:ss",ariaRequired:!0,value:(t==null?void 0:t.certificateExpiryTime)??"",onChange:({detail:{value:e}})=>N("certificateExpiryTime",e),onBlur:()=>F("certificateExpiryTime"),ref:n==null?void 0:n.certificateExpiryTime},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:266,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:258,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:233,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:232,columnNumber:9},this),i.jsxDEV(h,{label:"Functions",description:"Upload Cloudfront function and test objects.",info:i.jsxDEV(V,{onFollow:()=>l(11)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:283,columnNumber:17},this),children:i.jsxDEV(K,{multiple:!0,showFileSize:!0,showFileLastModified:!0,accept:"text/javascript, application/json",value:(t==null?void 0:t.functions)??[],tokenLimit:3,onChange:C,errorText:o==null?void 0:o.functions,fileErrors:o==null?void 0:o.functionFiles,ariaRequired:!0,constraintText:"Upload function code as *.js file and optional test objects as *.json files.",i18nStrings:{uploadButtonText:e=>e?"Choose files":"Choose file",dropzoneText:e=>e?"Drop files to upload":"Drop file to upload",removeFileAriaLabel:e=>`Remove file ${e+1}`,limitShowFewer:"Show fewer files",limitShowMore:"Show more files",errorIconAriaLabel:"Error"},ref:n==null?void 0:n.functions},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:285,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:134,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/pages/form/components/distribution-panel.tsx",lineNumber:129,columnNumber:5},this)}export{_i as default};
