import{r as p,aO as Ne,R as w,p as de,bD as Qe,M as qe,b2 as Ke,o as et,P as se,bA as Ze,aD as Ae,K as tt,bj as De,_ as nt,u as at,n as rt,aI as st,aq as Oe,O as Fe,Y as it,c as ot,j as Te,H as lt}from"./index-WOunTE3s.js";import{c as z,p as ct,r as ut,u as dt,S as gt,C as ht,a as mt,b as Xe,d as ft,g as pt,e as vt,L as bt,f as yt,F as Rt}from"./index-B_NUQvSj.js";import{c as _t,a as xt}from"./index-D-NGCnrk.js";import{percentageFormatter as Ie}from"./chart-commons-Bmao3v8G.js";import"./internal-CN81xZnG.js";import"./internal-ByWVb8WS.js";import"./index-BKstH4kc.js";import"./index-B0LTniq4.js";import"./use-select-C5da4KZ8.js";import"./dismiss-button-ESE9k303.js";import"./index-CW5Ds-ha.js";import"./is-development-CxJkH8d1.js";import"./internal-DeB20z8e.js";var je=Math.abs,j=Math.atan2,ue=Math.cos,wt=Math.max,Ce=Math.min,G=Math.sin,he=Math.sqrt,V=1e-12,pe=Math.PI,_e=pe/2,Re=2*pe;function Mt(e){return e>1?0:e<-1?pe:Math.acos(e)}function ze(e){return e>=1?_e:e<=-1?-_e:Math.asin(e)}function At(e){return e.innerRadius}function Ct(e){return e.outerRadius}function Et(e){return e.startAngle}function Pt(e){return e.endAngle}function St(e){return e&&e.padAngle}function Lt(e,n,o,l,c,u,g,t){var s=o-e,a=l-n,f=g-c,r=t-u,i=r*s-f*a;if(!(i*i<V))return i=(f*(n-u)-r*(e-c))/i,[e+i*s,n+i*a]}function be(e,n,o,l,c,u,g){var t=e-o,s=n-l,a=(g?u:-u)/he(t*t+s*s),f=a*s,r=-a*t,i=e+f,_=n+r,d=o+f,v=l+r,m=(i+d)/2,x=(_+v)/2,C=d-i,b=v-_,y=C*C+b*b,L=c-u,E=i*v-d*_,D=(b<0?-1:1)*he(wt(0,L*L*y-E*E)),T=(E*b-C*D)/y,A=(-E*C-b*D)/y,k=(E*b+C*D)/y,O=(-E*C+b*D)/y,h=T-m,R=A-x,F=k-m,B=O-x;return h*h+R*R>F*F+B*B&&(T=k,A=O),{cx:T,cy:A,x01:-f,y01:-r,x11:T*(c/L-1),y11:A*(c/L-1)}}function xe(){var e=At,n=Ct,o=z(0),l=null,c=Et,u=Pt,g=St,t=null;function s(){var a,f,r=+e.apply(this,arguments),i=+n.apply(this,arguments),_=c.apply(this,arguments)-_e,d=u.apply(this,arguments)-_e,v=je(d-_),m=d>_;if(t||(t=a=ct()),i<r&&(f=i,i=r,r=f),!(i>V))t.moveTo(0,0);else if(v>Re-V)t.moveTo(i*ue(_),i*G(_)),t.arc(0,0,i,_,d,!m),r>V&&(t.moveTo(r*ue(d),r*G(d)),t.arc(0,0,r,d,_,m));else{var x=_,C=d,b=_,y=d,L=v,E=v,D=g.apply(this,arguments)/2,T=D>V&&(l?+l.apply(this,arguments):he(r*r+i*i)),A=Ce(je(i-r)/2,+o.apply(this,arguments)),k=A,O=A,h,R;if(T>V){var F=ze(T/r*G(D)),B=ze(T/i*G(D));(L-=F*2)>V?(F*=m?1:-1,b+=F,y-=F):(L=0,b=y=(_+d)/2),(E-=B*2)>V?(B*=m?1:-1,x+=B,C-=B):(E=0,x=C=(_+d)/2)}var H=i*ue(x),$=i*G(x),K=r*ue(y),U=r*G(y);if(A>V){var W=i*ue(C),J=i*G(C),Z=r*ue(b),I=r*G(b),q;if(v<pe&&(q=Lt(H,$,Z,I,W,J,K,U))){var X=H-q[0],te=$-q[1],Q=W-q[0],ne=J-q[1],ie=1/G(Mt((X*Q+te*ne)/(he(X*X+te*te)*he(Q*Q+ne*ne)))/2),oe=he(q[0]*q[0]+q[1]*q[1]);k=Ce(A,(r-oe)/(ie-1)),O=Ce(A,(i-oe)/(ie+1))}}E>V?O>V?(h=be(Z,I,H,$,i,O,m),R=be(W,J,K,U,i,O,m),t.moveTo(h.cx+h.x01,h.cy+h.y01),O<A?t.arc(h.cx,h.cy,O,j(h.y01,h.x01),j(R.y01,R.x01),!m):(t.arc(h.cx,h.cy,O,j(h.y01,h.x01),j(h.y11,h.x11),!m),t.arc(0,0,i,j(h.cy+h.y11,h.cx+h.x11),j(R.cy+R.y11,R.cx+R.x11),!m),t.arc(R.cx,R.cy,O,j(R.y11,R.x11),j(R.y01,R.x01),!m))):(t.moveTo(H,$),t.arc(0,0,i,x,C,!m)):t.moveTo(H,$),!(r>V)||!(L>V)?t.lineTo(K,U):k>V?(h=be(K,U,W,J,r,-k,m),R=be(H,$,Z,I,r,-k,m),t.lineTo(h.cx+h.x01,h.cy+h.y01),k<A?t.arc(h.cx,h.cy,k,j(h.y01,h.x01),j(R.y01,R.x01),!m):(t.arc(h.cx,h.cy,k,j(h.y01,h.x01),j(h.y11,h.x11),!m),t.arc(0,0,r,j(h.cy+h.y11,h.cx+h.x11),j(R.cy+R.y11,R.cx+R.x11),m),t.arc(R.cx,R.cy,k,j(R.y11,R.x11),j(R.y01,R.x01),!m))):t.arc(0,0,r,y,b,m)}if(t.closePath(),a)return t=null,a+""||null}return s.centroid=function(){var a=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,f=(+c.apply(this,arguments)+ +u.apply(this,arguments))/2-pe/2;return[ue(f)*a,G(f)*a]},s.innerRadius=function(a){return arguments.length?(e=typeof a=="function"?a:z(+a),s):e},s.outerRadius=function(a){return arguments.length?(n=typeof a=="function"?a:z(+a),s):n},s.cornerRadius=function(a){return arguments.length?(o=typeof a=="function"?a:z(+a),s):o},s.padRadius=function(a){return arguments.length?(l=a==null?null:typeof a=="function"?a:z(+a),s):l},s.startAngle=function(a){return arguments.length?(c=typeof a=="function"?a:z(+a),s):c},s.endAngle=function(a){return arguments.length?(u=typeof a=="function"?a:z(+a),s):u},s.padAngle=function(a){return arguments.length?(g=typeof a=="function"?a:z(+a),s):g},s.context=function(a){return arguments.length?(t=a??null,s):t},s}function Tt(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function kt(e){return e}function Nt(){var e=kt,n=Tt,o=null,l=z(0),c=z(Re),u=z(0);function g(t){var s,a=t.length,f,r,i=0,_=new Array(a),d=new Array(a),v=+l.apply(this,arguments),m=Math.min(Re,Math.max(-Re,c.apply(this,arguments)-v)),x,C=Math.min(Math.abs(m)/a,u.apply(this,arguments)),b=C*(m<0?-1:1),y;for(s=0;s<a;++s)(y=d[_[s]=s]=+e(t[s],s,t))>0&&(i+=y);for(n!=null?_.sort(function(L,E){return n(d[L],d[E])}):o!=null&&_.sort(function(L,E){return o(t[L],t[E])}),s=0,r=i?(m-a*b)/i:0;s<a;++s,v=x)f=_[s],y=d[f],x=v+(y>0?y*r:0)+b,d[f]={data:t[f],index:s,value:y,startAngle:v,endAngle:x,padAngle:C};return d}return g.value=function(t){return arguments.length?(e=typeof t=="function"?t:z(+t),g):e},g.sortValues=function(t){return arguments.length?(n=t,o=null,g):n},g.sort=function(t){return arguments.length?(o=t,n=null,g):o},g.startAngle=function(t){return arguments.length?(l=typeof t=="function"?t:z(+t),g):l},g.endAngle=function(t){return arguments.length?(c=typeof t=="function"?t:z(+t),g):c},g.padAngle=function(t){return arguments.length?(u=typeof t=="function"?t:z(+t),g):u},g}const Be=p.memo(Dt);function Dt({x:e,y:n,rightSide:o,className:l,children:c,containerBoundaries:u}){const g=p.useRef(null),t=p.useRef(null);return o=(g.current?Ne(g.current):!1)?!o:o,p.useEffect(()=>{const a=setTimeout(()=>{const f=Ne(t.current),r=t.current.getBoundingClientRect(),i=u?Ot(r,u):0;ut(g.current,c,i,f)},25);return()=>clearTimeout(a)}),w.createElement(w.Fragment,null,w.createElement("text",{ref:t,x:e,y:n,style:{textAnchor:o?"start":"end",visibility:"hidden"},"aria-hidden":"true",className:l},c),w.createElement("text",{ref:g,x:e,y:n,style:{textAnchor:o?"start":"end"},className:l},c))}function Ot(e,n){return e.left<n.left?e.right-n.left:e.right>n.right?n.right-e.left:n.right-n.left}const P={segment__path:"awsui_segment__path_1edmh_w3g10_161",segment:"awsui_segment_1edmh_w3g10_161",segment__hover:"awsui_segment__hover_1edmh_w3g10_188",label:"awsui_label_1edmh_w3g10_202",root:"awsui_root_1edmh_w3g10_216",content:"awsui_content_1edmh_w3g10_220","content--small":"awsui_content--small_1edmh_w3g10_220","content--fit-height":"awsui_content--fit-height_1edmh_w3g10_223","content--without-labels":"awsui_content--without-labels_1edmh_w3g10_226","content--medium":"awsui_content--medium_1edmh_w3g10_232","content--large":"awsui_content--large_1edmh_w3g10_244","status-container":"awsui_status-container_1edmh_w3g10_261","chart-container":"awsui_chart-container_1edmh_w3g10_265","chart-container--fit-height":"awsui_chart-container--fit-height_1edmh_w3g10_269","chart-container-chart-plot":"awsui_chart-container-chart-plot_1edmh_w3g10_274","chart-container-chart-plot--fit-height":"awsui_chart-container-chart-plot--fit-height_1edmh_w3g10_277","inner-content":"awsui_inner-content_1edmh_w3g10_283",segment__highlight:"awsui_segment__highlight_1edmh_w3g10_294","segment--dimmed":"awsui_segment--dimmed_1edmh_w3g10_309","segment--highlighted":"awsui_segment--highlighted_1edmh_w3g10_312","label--dimmed":"awsui_label--dimmed_1edmh_w3g10_329","label--align-right":"awsui_label--align-right_1edmh_w3g10_332","label-text":"awsui_label-text_1edmh_w3g10_340",label__description:"awsui_label__description_1edmh_w3g10_348","label-line":"awsui_label-line_1edmh_w3g10_355","label--highlighted":"awsui_label--highlighted_1edmh_w3g10_359","popover-header":"awsui_popover-header_1edmh_w3g10_363"},Ft=30,Ee=44,ye=12,He=8,Pe=Math.PI/20,Se={small:{innerRadius:33,outerRadius:50,innerLabelPadding:He,padding:He,paddingLabels:Ee},medium:{innerRadius:66,outerRadius:100,innerLabelPadding:ye,padding:ye,paddingLabels:Ee},large:{innerRadius:93,outerRadius:140,innerLabelPadding:ye,padding:ye,paddingLabels:Ee}},$e={small:Object.assign(Object.assign({},Se.small),{innerRadius:38,cornerRadius:3}),medium:Object.assign(Object.assign({},Se.medium),{innerRadius:75,cornerRadius:4}),large:Object.assign(Object.assign({},Se.large),{innerRadius:105,cornerRadius:5})};function We({size:e,hasLabels:n,visualRefresh:o}){if(typeof e=="string"){const r=$e[e];return Object.assign(Object.assign({},r),{size:e})}const l=$e,c=r=>r.outerRadius*2+r.padding*2+(n?r.paddingLabels:0)*2;let u="small";e>c(l.medium)&&(u="medium"),e>c(l.large)&&(u="large");const g=l[u].padding,t=n?l[u].paddingLabels:0,s=l[u].outerRadius/l[u].innerRadius,a=Math.max(Ft,(e-2*t-2*g)/2),f=a/s;return Object.assign(Object.assign({},l[u]),{outerRadius:a,innerRadius:f,size:u})}const It=(e,n)=>(o,l)=>[{key:e("i18nStrings.detailsValue",n.detailsValue)||"",value:o.value},{key:e("i18nStrings.detailsPercentage",n.detailsPercentage)||"",value:`${(o.value*100/l).toFixed(0)}%`}],Ve=(e,n,o,l)=>{var c;let g=null,t=o?e.length-1:0;for(;o&&t>=0||!o&&t<e.length;){const s=e[t],a=parseFloat(s.getAttribute("data-x")||"0"),f=parseFloat(s.getAttribute("data-y")||"0"),r={x:a,y:f,height:s.getBoundingClientRect().height},i=n[t];if(o?t--:t++,!g){g=r,s.setAttribute("transform","");continue}if(!o&&r.x<0||o&&r.x>=0)break;s.setAttribute("transform","");const _=g.y+g.height+10-r.y;if(_>0){const d=jt(r,_,l)*(o?-1:1);s.setAttribute("transform",`translate(${d} ${_})`);const v=(c=s.parentNode)===null||c===void 0?void 0:c.querySelector(`.${P["label-line"]}`);if(v){const{endY:m,endX:x}=i;v.setAttribute("y2",""+(m+_)),v.setAttribute("x2",""+(x+d))}r.y+=_,r.x+=d}g=r}},Le=e=>Math.pow(e[0],2)+Math.pow(e[1],2),jt=(e,n,o)=>{const l=[e.x,e.y+n],c=[e.x,e.y+e.height+n],u=Le(l)<Le(c)?l:c;return Le(u)<Math.pow(o,2)?Math.sqrt(Math.pow(o,2)-Math.pow(u[1],2))-Math.abs(u[0]):0},zt=(e,n,o=!1)=>{if(!o||n-e<2*Pe)return(n+e)/2;const l=e+Pe,c=n-Pe;if(l<0&&c>0)return 0;if(l<Math.PI&&c>Math.PI)return Math.PI;const u=Math.min(c,Math.abs(Math.PI-c),2*Math.PI-c),g=Math.min(l,Math.abs(Math.PI-l),2*Math.PI-l);return u<g?c:l};function Bt({x:e,y:n,hideTitles:o,hideDescriptions:l,rightSide:c,title:u,description:g,containerBoundaries:t}){return w.createElement("g",{className:P["label-text"],transform:"","data-x":e,"data-y":n},!o&&w.createElement(Be,{x:e,y:n,rightSide:c,containerBoundaries:t},u),!l&&g&&w.createElement(Be,{x:e,y:n+(o?0:18),rightSide:c,className:P.label__description,containerBoundaries:t},g))}const Ht=({pieData:e,dimensions:n,highlightedSegment:o,segmentDescription:l,visibleDataSum:c,hideTitles:u,hideDescriptions:g,containerRef:t})=>{const s=$t(t),a=s.right-s.left-(n.outerRadius+n.innerLabelPadding)*2<300,f=p.useMemo(()=>{const{outerRadius:i,innerLabelPadding:_}=n,d=xe().innerRadius(i-1).outerRadius(i-1),v=xe().innerRadius(i+_).outerRadius(i+_);return e.map((m,x)=>{const C=e[x],b=zt(C.startAngle,C.endAngle,a),y=.5*Math.cos(2*b)+.5;v.outerRadius(i+20*y),v.innerRadius(i+20*y);const[L,E]=d.centroid(Object.assign(Object.assign({},m),{startAngle:b,endAngle:b})),[D,T]=v.centroid(Object.assign(Object.assign({},m),{startAngle:b,endAngle:b})),A=b<Math.PI,k=a?D+20*(A?1:-1):(i+20)*(A?1:-1),O=k+5*(A?1:-1);return{startX:L,startY:E,breakX:D,breakY:T,endX:k,endY:T,textX:O,textY:T,rightSide:A,datum:m}})},[e,n,a]),r=p.useRef(null);return p.useLayoutEffect(()=>{if(!r.current)return;const i=r.current.querySelectorAll(`.${P["label-text"]}`);Ve(i,f,!1,n.outerRadius+n.innerLabelPadding),Ve(i,f,!0,n.outerRadius+n.innerLabelPadding)},[f,e,n]),w.createElement("g",{className:P.markers,"aria-hidden":"true",ref:r},f.map(({startX:i,startY:_,breakX:d,breakY:v,endX:m,endY:x,textX:C,textY:b,rightSide:y,datum:L})=>{const E=L.data.datum,D=l==null?void 0:l(E,c);return u&&!D||g&&!E.title?null:w.createElement("g",{key:L.data.index,className:de(P.label,{[P["label--highlighted"]]:o===E,[P["label--dimmed"]]:o!==null&&o!==E,[P["label--align-right"]]:!y})},w.createElement("line",{x1:i,y1:_,x2:d,y2:v}),w.createElement("line",{x1:d,y1:v,x2:m,y2:x,className:P["label-line"]}),w.createElement(Bt,{x:C,y:b,rightSide:y,title:E.title,description:D,hideTitles:u,hideDescriptions:g,containerBoundaries:s}))}))};function $t(e){const[n,o]=p.useState({left:0,right:0});return Qe(e,l=>{const c=l.target.getBoundingClientRect();o({left:c.left,right:c.right})}),n}function Vt({pieData:e,highlightedSegment:n,dimensions:o,variant:l,focusedSegmentRef:c,popoverTrackRef:u,segmentAriaRoleDescription:g,onMouseDown:t,onMouseOver:s,onTouchStart:a}){const f=qe("pie-chart"),{arcFactory:r,highlightedArcFactory:i}=p.useMemo(()=>{const d=o.outerRadius,v=l==="pie"?0:o.innerRadius,m=o.cornerRadius||0,x=xe().innerRadius(v).outerRadius(d).cornerRadius(m),C=xe().innerRadius(d+4).outerRadius(d+6);return{arcFactory:x,highlightedArcFactory:C}},[o,l]),_=p.useMemo(()=>{for(const d of e)if(d.data.datum===n){const[v,m]=r.centroid(d);return{cx:v,cy:m}}return null},[n,e,r]);return w.createElement("g",null,e.map(d=>{const v=n===d.data.datum,m=n!==null&&!v,x=r(d)||void 0,C=i(d)||void 0;return w.createElement("g",{key:d.data.index,onTouchStart:()=>a(),onMouseDown:b=>{t(d.data),b.preventDefault()},onMouseOver:()=>s(d.data),className:de(P.segment,{[P["segment--highlighted"]]:v,[P["segment--dimmed"]]:m}),ref:v?c:void 0,"aria-label":`${d.data.datum.title} (${d.data.datum.value})`,role:"button","aria-roledescription":f("i18nStrings.segmentAriaRoleDescription",g)},w.createElement("path",{d:x,fill:d.data.color,className:P.segment__path,"aria-hidden":"true"}),w.createElement("path",{d:C,fill:d.data.color,className:de(P.segment__path,P.segment__highlight),"aria-hidden":"true"}))}),w.createElement("circle",Object.assign({},_,{ref:u,r:"1",opacity:"0","aria-hidden":"true"})))}const qt=({fitHeight:e,height:n,variant:o,size:l,width:c,i18nStrings:u,ariaLabel:g,ariaLabelledby:t,ariaDescription:s,innerMetricValue:a,innerMetricDescription:f,hideTitles:r,hideDescriptions:i,detailPopoverContent:_,detailPopoverSize:d,detailPopoverFooter:v,segmentDescription:m,highlightedSegment:x,onHighlightChange:C,legendSegment:b,pieData:y,dataSum:L})=>{var E,D;const[T,A]=p.useState(null),k=p.useRef(null),O=p.useRef(null),h=p.useRef(null),R=p.useRef(null),F=p.useRef(null),B=!(r&&i),H=Ke(),$=(E=dt(()=>{var M,N;return(N=(M=k.current)===null||M===void 0?void 0:M.svg)!==null&&N!==void 0?N:null},!e))!==null&&E!==void 0?E:n,K=p.useMemo(()=>We({size:e?Math.min($,c):l,hasLabels:B,visualRefresh:H}),[e,$,c,l,B,H]),U=o==="donut"&&(a||f&&K.size!=="small"),W=et("awsui-pie-chart__inner"),[J,Z]=p.useState(!1),[I,q]=p.useState(),X=p.useMemo(()=>{for(let M=0;M<y.length;M++)if(y[M].data.datum===x)return M;return null},[y,x]),te=p.useMemo(()=>v&&x?v(x):null,[v,x]),Q=qe("pie-chart"),ne=_||It(Q,u),ie=I?ne(I.datum,L):[],oe=p.useRef(null),we=I&&w.createElement(gt,{details:ie,compactList:!0,ref:oe}),le=p.useRef(!1),me=p.useRef(!1),ae=p.useRef(!1),ee=p.useCallback(M=>{const N=M.datum;N!==x&&C(N),R.current&&(q({datum:M.datum,series:{color:M.color,index:M.index,label:M.datum.title,markerType:"rectangle"},trackRef:R}),Z(!0))},[x,Z,C]),ce=p.useCallback(()=>{Z(!1),C(null)},[C,Z]),S=M=>{T===null&&(De(F.current,M.relatedTarget)||De(h.current,M.relatedTarget)||ce())};p.useEffect(()=>{const M=N=>{N.key==="Escape"&&(ce(),me.current=!0)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[ce]);const ge=p.useCallback(M=>{T===M.datum?(A(null),ce()):(A(M.datum),ee(M))},[T,ce,A,ee]),fe=p.useCallback(M=>{if(me.current){me.current=!1;return}if(ae.current){ae.current=!1;return}T===null&&ee(M)},[T,ee]),re=p.useCallback(()=>{ae.current=!0},[]),Me=p.useCallback(M=>{const N=M.keyCode;if(N!==se.right&&N!==se.left&&N!==se.enter&&N!==se.space)return;M.preventDefault();let Y=X||0;const ve=y.length-1;N===se.right?(Y++,Y>ve&&(Y=0)):N===se.left&&(Y--,Y<0&&(Y=ve)),(N===se.enter||N===se.space)&&A(y[Y].data.datum),ee(y[Y].data)},[A,ee,y,X]),Ge=p.useCallback((M,N)=>{if(T!==null||le.current||N==="mouse")return;const Y=x||b||y[0].data.datum,ve=y.filter(Je=>Je.data.datum===Y);ee(ve[0].data)},[T,y,ee,x,b]),ke=p.useCallback(M=>{const N=M.relatedTarget||M.target;(N===null||!(N instanceof Element)||!Ze(O.current,N))&&(Z(!1),A(null))},[A]),Ue=M=>{Z(!1),A(null),M?C(null):setTimeout(()=>{le.current=!0,k.current.focusApplication(),le.current=!1},0)};return w.createElement("div",{className:de(P["chart-container"],e&&P["chart-container--fit-height"]),ref:O},w.createElement("div",{className:de(P["chart-container-chart-plot"],e&&P["chart-container-chart-plot--fit-height"])},w.createElement(ht,{ref:k,width:"100%",height:e?"100%":$,transform:`translate(${c/2} ${$/2})`,isPrecise:!0,isClickable:!J,ariaLabel:g,ariaLabelledby:t,ariaDescription:s,ariaDescribedby:U?W:void 0,ariaRoleDescription:u==null?void 0:u.chartAriaRoleDescription,activeElementRef:h,activeElementKey:X==null?void 0:X.toString(),onApplicationFocus:Ge,onApplicationBlur:ke,onKeyDown:Me,onMouseOut:S},w.createElement(Vt,{pieData:y,dimensions:K,variant:o,focusedSegmentRef:h,popoverTrackRef:R,highlightedSegment:x,segmentAriaRoleDescription:u==null?void 0:u.segmentAriaRoleDescription,onMouseDown:ge,onMouseOver:fe,onTouchStart:re}),B&&w.createElement(Ht,{pieData:y,dimensions:K,segmentDescription:m,visibleDataSum:L,hideTitles:r,hideDescriptions:i,highlightedSegment:x,containerRef:O}))),U&&w.createElement("div",{className:P["inner-content"],id:W},a&&w.createElement(Ae,{variant:K.size==="small"?"h3":"h1",tagOverride:"div",color:"inherit",padding:"n"},a),f&&K.size!=="small"&&w.createElement(Ae,{variant:"h3",color:"text-body-secondary",tagOverride:"div",padding:"n"},f)),J&&I&&w.createElement(mt,{ref:F,title:I.series&&w.createElement(Ae,{className:P["popover-header"],variant:"strong"},w.createElement(Xe,{color:I.series.color,type:I.series.markerType})," ",I.series.label),trackRef:I.trackRef,trackKey:I.series.index,dismissButton:T!==null,dismissAriaLabel:u.detailPopoverDismissAriaLabel,onDismiss:Ue,container:((D=k.current)===null||D===void 0?void 0:D.svg)||null,size:d,onMouseLeave:S,onBlur:ke,footer:te},we),w.createElement(tt,{sources:[oe]}))},Ye=function(n){var{fitHeight:o,variant:l="pie",size:c="medium",hideTitles:u=!1,hideDescriptions:g=!1,hideLegend:t=!1,hideFilter:s=!1,statusType:a="finished",data:f=[],i18nStrings:r={},highlightedSegment:i,visibleSegments:_,onHighlightChange:d,onFilterChange:v,additionalFilters:m,legendTitle:x,detailPopoverSize:C="medium"}=n,b=nt(n,["fitHeight","variant","size","hideTitles","hideDescriptions","hideLegend","hideFilter","statusType","data","i18nStrings","highlightedSegment","visibleSegments","onHighlightChange","onFilterChange","additionalFilters","legendTitle","detailPopoverSize"]);const{__internalRootRef:y=null}=at("PieChart",{props:{fitHeight:o,variant:l,size:c,hideTitles:u,hideDescriptions:g,hideLegend:t,hideFilter:s,detailPopoverSize:C}}),L=rt(b),E=p.useRef(null),[D,T]=st(),A=p.useMemo(()=>{const S=ft(f,void 0,ge=>ge.color||null);return f.map((ge,fe)=>({index:fe,color:S[fe],datum:ge}))},[f]),[k=null,O]=Oe(i,d,null,{componentName:"PieChart",controlledProp:"highlightedSegment",changeHandler:"onHighlightChange"}),[h,R]=p.useState(k);p.useEffect(()=>{R(i||null)},[i]);const[F,B]=Oe(_,v,f,{componentName:"PieChart",controlledProp:"visibleSegments",changeHandler:"onFilterChange"}),H=p.useMemo(()=>A.filter(S=>(F==null?void 0:F.indexOf(S.datum))!==-1),[A,F]),$=A==null?void 0:A.map(S=>({label:S.datum.title,marker:w.createElement(Xe,{color:S.color,type:"rectangle"}),datum:S.datum})),K=$.filter(S=>(F==null?void 0:F.indexOf(S.datum))!==-1),U=p.useCallback(S=>{B(S),Fe(v,{visibleSegments:S})},[B,v]),W=p.useCallback(S=>{R(S),O(S),Fe(d,{highlightedSegment:S})},[d,O]),J=S=>{S.relatedTarget&&!Ze(E.current,S.relatedTarget)&&(k&&W(null),R(null))},Z=it(E,T,y),{pieData:I,dataSum:q}=p.useMemo(()=>{const S=H.reduce((re,Me)=>re+Me.datum.value,0);return{pieData:Nt().value(re=>re.datum.value<S/100?S/100:re.datum.value).sort(null)(H.filter(re=>re.datum.value>0)),dataSum:S}},[H]),X=!f||f.length===0,{isEmpty:te,showChart:Q}=pt({externalData:A,visibleData:I,statusType:a}),ne=te&&H.length!==A.length,ie=a==="finished"&&!X&&(m||!s),oe=!Q&&!t,we=a!=="finished"&&!ne&&(!s||m),le=!(u&&g),me=Ke(),ae=We({size:c,hasLabels:le,visualRefresh:me}),ce=2*(ae.outerRadius+ae.padding+(le?ae.paddingLabels:0));return w.createElement(vt,Object.assign({ref:Z,fitHeight:!!o},L,{className:de(L.className,P.root),contentClassName:de(P.content,P[`content--${ae.size}`],{[P["content--without-labels"]]:!le,[P["content--fit-height"]]:o}),defaultFilter:ie&&!s?w.createElement(Rt,{series:$,onChange:U,selectedSeries:F,i18nStrings:r}):null,additionalFilters:ie?m:null,reserveFilterSpace:!!we,reserveLegendSpace:!!oe,chartStatus:w.createElement(yt,{isEmpty:te,isNoMatch:ne,showChart:Q,statusType:a,empty:b.empty,noMatch:b.noMatch,loadingText:b.loadingText,errorText:b.errorText,recoveryText:b.recoveryText,onRecoveryClick:b.onRecoveryClick}),chart:Q?w.createElement(qt,Object.assign({},b,{variant:l,size:c,height:ce,fitHeight:o,data:f,width:D,hideTitles:u,hideDescriptions:g,i18nStrings:r,onHighlightChange:W,highlightedSegment:k,legendSegment:h,detailPopoverSize:C,pieData:I,dataSum:q})):null,legend:!t&&!X&&a==="finished"&&w.createElement(bt,{series:K,highlightedSeries:h,legendTitle:x,ariaLabel:r==null?void 0:r.legendAriaLabel,onHighlightChange:W,plotContainerRef:E}),onBlur:J}))};ot(Ye,"PieChart");function Kt(){return Te.jsxDEV(lt,{variant:"h2",children:["Zone status - ",Te.jsxDEV("i",{children:"beta"},void 0,!1,{fileName:"/app/code/src/pages/dashboard/widgets/zone-status/index.tsx",lineNumber:15,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/pages/dashboard/widgets/zone-status/index.tsx",lineNumber:14,columnNumber:5},this)}function Zt(){return Te.jsxDEV(Ye,{hideFilter:!0,fitHeight:!0,size:"small",data:[{title:"Operating normally",value:18,color:_t},{title:"Disrupted",value:2,color:xt}],ariaLabel:"Zone status chart",ariaDescription:"Pie chart summarizing the status of all zones.",segmentDescription:(e,n)=>`${e.value} zones, ${Ie(e.value/n)}`,detailPopoverContent:(e,n)=>[{key:"Zone count",value:e.value},{key:"Percentage",value:Ie(e.value/n)}],i18nStrings:{filterLabel:"Filter displayed data",filterPlaceholder:"Filter data",filterSelectedAriaLabel:"selected",detailPopoverDismissAriaLabel:"Dismiss",legendAriaLabel:"Legend",chartAriaRoleDescription:"pie chart",segmentAriaRoleDescription:"segment"}},void 0,!1,{fileName:"/app/code/src/pages/dashboard/widgets/zone-status/index.tsx",lineNumber:22,columnNumber:5},this)}const on={definition:{defaultRowSpan:4,defaultColumnSpan:2,minRowSpan:3},data:{icon:"pieChart",title:"Zone status",description:"Zone status report",header:Kt,content:Zt,staticMinHeight:450}};export{on as zoneStatus};
