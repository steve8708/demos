import{r as x,j as e,C as n,B as t,H as d,I as v,a as y,S as m}from"./index-BE4yRgP3.js";import{S as E}from"./index-8wIlR2Xv.js";import{T as j}from"./index-BRBvNWU4.js";import{WEATHER_CODES as V}from"./types-D-Wn5bzp.js";import{WeatherService as a}from"./weather-service-BlQHCClz.js";import"./collection-preferences-metadata-context-CHYbH7hF.js";import"./internal-F9OK7PvO.js";import"./index-Le2aB-FB.js";import"./internal-BV8Tvtkr.js";function W({hourlyData:s,loading:h}){const[i,p]=x.useState(!1);if(h)return e.jsxDEV(n,{header:e.jsxDEV(d,{variant:"h2",children:"Hourly Forecast"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:28,columnNumber:26},this),children:e.jsxDEV(t,{textAlign:"center",padding:"xl",children:[e.jsxDEV(E,{size:"large"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:30,columnNumber:11},this),e.jsxDEV(t,{variant:"p",margin:{top:"s"},children:"Loading hourly forecast..."},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:31,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:28,columnNumber:7},this);if(!s||!s.time||s.time.length===0)return e.jsxDEV(n,{header:e.jsxDEV(d,{variant:"h2",children:"Hourly Forecast"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:41,columnNumber:26},this),children:e.jsxDEV(t,{textAlign:"center",padding:"xl",children:[e.jsxDEV(v,{name:"status-warning",size:"large"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:43,columnNumber:11},this),e.jsxDEV(t,{variant:"p",margin:{top:"s"},children:"Hourly forecast unavailable"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:44,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:42,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:41,columnNumber:7},this);const c=i?s.time.length:Math.min(24,s.time.length),u=new Date,f=s.time.slice(0,c).map((r,o)=>{const w=new Date(r),g=Math.abs(w.getTime()-u.getTime())<60*60*1e3,l=s.weathercode[o],N=V[l]||{description:"Unknown"};return{time:r,hour:a.formatTime(r),date:a.formatDate(r),temperature:s.temperature_2m[o],humidity:s.relative_humidity_2m[o],precipitation:s.precipitation[o],windSpeed:s.windspeed_10m[o],weatherCode:l,description:N.description,isCurrentHour:g}}),b=[{id:"time",header:"Time",cell:r=>e.jsxDEV(m,{size:"xs",children:[e.jsxDEV(t,{variant:r.isCurrentHour?"strong":"span",children:r.hour},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:82,columnNumber:11},this),e.jsxDEV(t,{variant:"small",color:"text-body-secondary",children:r.date},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:83,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:81,columnNumber:9},this),sortingField:"time",width:120},{id:"temperature",header:"Temperature",cell:r=>e.jsxDEV(t,{variant:r.isCurrentHour?"strong":"span",children:a.formatTemperature(r.temperature)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:95,columnNumber:9},this),sortingField:"temperature",width:120},{id:"weather",header:"Conditions",cell:r=>e.jsxDEV(m,{size:"xs",children:[e.jsxDEV(t,{variant:"small",children:r.description},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:105,columnNumber:11},this),e.jsxDEV(t,{variant:"small",color:"text-body-secondary",children:["Code: ",r.weatherCode]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:104,columnNumber:9},this),width:140},{id:"humidity",header:"Humidity",cell:r=>`${Math.round(r.humidity)}%`,sortingField:"humidity",width:100},{id:"precipitation",header:"Rain",cell:r=>`${r.precipitation.toFixed(1)} mm`,sortingField:"precipitation",width:100},{id:"wind",header:"Wind",cell:r=>a.formatWindSpeed(r.windSpeed),sortingField:"windSpeed",width:100}];return e.jsxDEV(n,{header:e.jsxDEV(d,{variant:"h2",description:`Hourly weather forecast - showing ${c} hours`,actions:e.jsxDEV(y,{variant:"normal",onClick:()=>p(!i),children:i?"Show 24h":"Show All"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:143,columnNumber:13},this),children:"Hourly Forecast"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:139,columnNumber:9},this),children:e.jsxDEV(j,{columnDefinitions:b,items:f,loadingText:"Loading forecast",trackBy:"time",variant:"borderless",stripedRows:!0,resizableColumns:!0,sortingDisabled:!0,empty:e.jsxDEV(t,{textAlign:"center",color:"inherit",children:e.jsxDEV(t,{variant:"strong",textAlign:"center",color:"inherit",children:"No hourly data available"},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:163,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:162,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:152,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/pages/weather-dashboard/components/widgets/hourly-forecast.tsx",lineNumber:137,columnNumber:5},this)}export{W as HourlyForecastWidget};
