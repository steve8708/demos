import{au as lt,r as I,bc as Yt,p as at,bk as $t,aP as qt,j as T,S as nt,a as ot,R as Ft}from"./index-DLMN1afU.js";import{j as L}from"./jsx-runtime-Cz3FP8BU.js";import{u as D,c as Gt,C as Xt,g as Ut,I as Zt,a as Kt,b as Qt}from"./index-CGWTpEjU.js";import{m as yt}from"./utilities.esm-DjAMEUky.js";import{L as Jt}from"./index-B1UNPsJs.js";import{EmptyState as te}from"./index-44UVzZHE.js";import{DashboardHeader as ee}from"./header-CNkpq9cm.js";import{ConfigurableWidget as ne}from"./index-Q0tZGH2Y.js";import{PageBanner as oe}from"./page-banner-D5e-q3G0.js";import{ResetButton as ie}from"./reset-button-CnIlnVQS.js";import{boardI18nStrings as re}from"./i18n-strings-CDFWuGV0.js";import{getDefaultLayout as It,getBoardWidgets as se,exportLayout as ce}from"./widgets-BXOUM09K.js";import"./index-9yUJLIcU.js";import"./external-link-group-DAHSOmTY.js";import"./index-Dz6VcXup.js";import"./info-link-Hx3ZDbF_.js";import"./help-panel-DZ5f7IRB.js";import"./index-2mdFlqo9.js";import"./remove-dialog-oM3FkLve.js";import"./index-CFlkabIj.js";import"./internal-CjecXZ_i.js";import"./reset-contexts-for-modal-BjjT4_Gz.js";import"./index-CZXXDhWH.js";import"./index-C1AwVX_8.js";import"./index-Cl0yh8Wf.js";import"./collection-preferences-metadata-context-C6GRGUgK.js";import"./internal-Dwr2Yqy5.js";import"./index-SUQSjT3m.js";import"./internal-BWpMHlT2.js";import"./apply-mode-BcR-LfXG.js";import"./local-storage-JknLDoWi.js";import"./index-D6hP8xPF.js";import"./data-VAeqP1Gb.js";import"./index-BBwLZv6o.js";import"./index-WT6Qg0ZW.js";import"./internal-DdS2MN2J.js";import"./aws-region-utils-DEwpaX2O.js";import"./index-HPBwlr1l.js";import"./index-Dh9gxrcr.js";import"./index-BJuC13Dt.js";import"./internal-eRWZLbJE.js";import"./index-Ct9nYAV0.js";import"./internal-B7gVIJJh.js";import"./index-CgWRm0rq.js";import"./use-select-CGMio23-.js";import"./dismiss-button-C-DcIRP0.js";import"./index-DJYuq0HF.js";import"./is-development-CxJkH8d1.js";import"./internal-BatzASRu.js";import"./index-5qndC0qu.js";import"./index-ByYgjtW3.js";import"./chart-commons-w6HGeXI2.js";import"./data-BAnOLeWl.js";import"./index-BsvojMLv.js";import"./index-q81zZMGS.js";import"./data-DSm-THGH.js";import"./index-B9Mtnz3q.js";import"./index-CrLnEVMr.js";import"./index-CRaad7Bu.js";import"./index-D6bOkW2v.js";import"./internal-BfYk3OGg.js";import"./index-CsjlbXnj.js";import"./chart-BZQD57Vh.js";import"./preferences-D4MD_dQ7.js";import"./internal-D3eiZoKd.js";import"./index-BzIL9zHG.js";import"./help-content-D_M5G5Tp.js";import"./index-DnS4423J.js";import"./index-Djh0GKP0.js";import"./index-D-NGCnrk.js";import"./index-BmsRyWbQ.js";import"./icons-DDNWDvMP.js";function le(){const[e,t]=lt(n=>n.contentBoxWidth<688?1:n.contentBoxWidth<912?2:n.contentBoxWidth<2100?4:6,[]);return[e??0,t]}const ae=2,de=1,xt=200,V={"show-grab-cursor":"awsui_show-grab-cursor_1fgk7_1xrvg_9","show-resize-cursor":"awsui_show-resize-cursor_1fgk7_1xrvg_13","disable-selection":"awsui_disable-selection_1fgk7_1xrvg_20"};function ue(e){throw new Error("Unexpected value: "+e)}function he({operation:e,interactionType:t}){switch(e){case"insert":case"reorder":document.body.classList.add(V["show-grab-cursor"]);break;case"resize":document.body.classList.add(V["show-resize-cursor"]);break;default:ue(e)}t==="pointer"&&document.body.classList.add(V["disable-selection"])}function bt(){document.body.classList.remove(V["show-grab-cursor"],V["show-resize-cursor"],V["disable-selection"])}function me(){D("start",he),D("discard",bt),D("submit",bt)}function Et(...e){return I.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}function fe(e,t){return(e.length>=t.length?e:t).map((o,i)=>[e[i],t[i]])}const Z={grid:"awsui_grid_1hw7z_109ya_5","grid-compact":"awsui_grid-compact_1hw7z_109ya_12","columns-1":"awsui_columns-1_1hw7z_109ya_17","columns-2":"awsui_columns-2_1hw7z_109ya_21","columns-4":"awsui_columns-4_1hw7z_109ya_25","columns-6":"awsui_columns-6_1hw7z_109ya_29",grid__item:"awsui_grid__item_1hw7z_109ya_33"},ge=({children:e,item:t})=>L.jsx("div",{className:Z.grid__item,style:{gridRowStart:t.y+1,gridRowEnd:`span ${t.height}`,gridColumnStart:t.x+1,gridColumnEnd:`span ${t.width}`},children:e}),pe=I.memo(ge),ve={comfortable:20,compact:16},we={comfortable:96,compact:76};function ye({layout:e,children:t,columns:n,isRtl:o}){const i=I.useRef(null),[r,a]=lt(m=>m.contentBoxWidth,[]),c=Yt(i),l=ve[c],s=we[c],d=m=>{m=Math.min(n,m);const y=((r||0)-(n-1)*l)/n;return m*y+(m-1)*l},u=m=>m*s+(m-1)*l,v={getWidth:d,getHeight:u,getColOffset:m=>{const y=d(m)+l;return o!=null&&o()?-y:y},getRowOffset:m=>u(m)+l},f=t==null?void 0:t(v),M=fe(e,I.Children.toArray(f)),_=Et(i,a);return L.jsx("div",{ref:_,className:at(Z.grid,Z[`grid-${c}`],Z[`columns-${n}`]),children:M.map(([m,y])=>L.jsx(pe,{item:m,children:y},m.id))})}function Ie(e,t){const n=[],o=Array(t).fill(0);function i(s){var d;const u=$(s,t),h=(d=s.columnSpan)!==null&&d!==void 0?d:B(s,t);return Math.min(t,Math.max(u,h))}function r(s){var d;const u=q(s),h=(d=s.rowSpan)!==null&&d!==void 0?d:j(s);return Math.max(u,h)}function a(s,d){var u,h;const g=i(s),v=r(s),f=(h=(u=s.columnOffset)===null||u===void 0?void 0:u[t])!==null&&h!==void 0?h:c(d,g,v);return f+g<=t?f:0}function c(s,d,u){for(let h=s;h+d<=t;h++)if(l(h,d)+u<=l(0,t))return h;for(let h=0;h+d<=t;h++)if(l(h,d)+u<=l(0,t))return h;return s}function l(s,d){let u=0;for(let h=s;h<s+d;h++)u=Math.max(u,o[h]);return u}for(let s=0,d=0,u=0;s<e.length;s++,u=0){const h=i(e[s]),g=r(e[s]);d=a(e[s],d),u=l(d,h),n.push({id:e[s].id,width:h,height:g,x:d,y:u});for(let v=d;v<d+h;v++)o[v]=u+g;d+=h}return n.sort(Rt),{items:n,columns:t,rows:l(0,t)}}function xe(e,t,n){const o=new Map(e.map(l=>[l.id,l])),i=l=>{const s=o.get(l);if(!s)throw new Error("Invariant violation: no matching source item found.");return s},r=t.items.slice().sort(Rt),a=[];let c=r.findIndex(({id:l},s)=>l!==e[s].id||l===n);c=c!==-1?c:r.length;for(let l=0;l<r.length;l++){const{id:s,x:d,width:u,height:h}=r[l],g={...i(s)};l>=c&&(g.columnOffset=void 0),g.columnOffset={...g.columnOffset,[t.columns]:d},g.id===n&&(g.columnSpan=u,g.rowSpan=h),a.push(g)}return a}function St(e,t){const n=[];for(let o=0;o<e;o++)for(let i=0;i<t;i++)n.push({id:`awsui-placeholder-${o}-${i}`,x:i,y:o,width:1,height:1});return{items:n,columns:t,rows:e}}function $(e,t){var n,o;return Math.min(t,Math.max(de,(o=(n=e.definition)===null||n===void 0?void 0:n.minColumnSpan)!==null&&o!==void 0?o:0))}function B(e,t){var n,o;return Math.min(t,Math.max($(e,t),(o=(n=e.definition)===null||n===void 0?void 0:n.defaultColumnSpan)!==null&&o!==void 0?o:0))}function q(e){var t,n;return Math.max(ae,(n=(t=e.definition)===null||t===void 0?void 0:t.minRowSpan)!==null&&n!==void 0?n:0)}function j(e){var t,n;return Math.max(q(e),(n=(t=e.definition)===null||t===void 0?void 0:t.defaultRowSpan)!==null&&n!==void 0?n:0)}function Rt(e,t){return e.y!==t.y?e.y>t.y?1:-1:e.x>t.x?1:-1}class S{constructor({x:t,y:n}){this.__type="Position",this.x=t,this.y=n}}function be(){const e=I.useRef("pointer");return I.useEffect(()=>{const n=()=>{e.current="pointer"},o=()=>{e.current="keyboard"};return window.addEventListener("pointerdown",n),window.addEventListener("keydown",o),()=>{window.removeEventListener("pointerdown",n),window.removeEventListener("keydown",o)}},[]),I.useCallback(()=>e.current,[])}function _e(){const[e,t]=I.useState("none"),n=I.useRef(null),o=be();I.useEffect(()=>{if(e==="none")return;const s=e==="up"?-1:1;let d;function u(){d=setTimeout(()=>{window.scrollBy({top:s*5}),u()},10)}return u(),()=>clearTimeout(d)},[e]);const i=I.useCallback(s=>{s.clientY>window.innerHeight-50?t("down"):s.clientY<50?t("up"):t("none")},[]),r=I.useCallback(()=>{t("none")},[]),a=I.useCallback(()=>{o()==="pointer"&&(window.addEventListener("pointermove",i),window.addEventListener("pointerup",r))},[o,i,r]),c=I.useCallback(()=>{window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",r)},[i,r]),l=I.useCallback(s=>{n.current&&clearTimeout(n.current);const d=document.activeElement;n.current=setTimeout(()=>{var u,h;document.activeElement&&document.activeElement===d&&o()==="keyboard"&&((h=(u=document.activeElement).scrollIntoView)===null||h===void 0||h.call(u,{behavior:"smooth",block:"nearest"}))},s)},[o]);return{addPointerEventHandlers:a,removePointerEventHandlers:c,scheduleActiveElementScrollIntoView:l}}const K={placeholder:"awsui_placeholder_1h7dk_knzlf_5","placeholder--active":"awsui_placeholder--active_1h7dk_knzlf_9","placeholder--hover":"awsui_placeholder--hover_1h7dk_knzlf_12",root:"awsui_root_1h7dk_knzlf_16",empty:"awsui_empty_1h7dk_knzlf_20"};function Ee({id:e,state:t,gridContext:n,columns:o}){const i=I.useRef(null);return Gt({itemId:e,context:{scale:(a,c)=>{var l,s;const d=(l=c==null?void 0:c.width)!==null&&l!==void 0?l:B(a,o),u=(s=c==null?void 0:c.height)!==null&&s!==void 0?s:j(a);return{width:n.getWidth(d),height:n.getHeight(u)}}},getElement:()=>i.current}),L.jsx("div",{ref:i,className:at(K.placeholder,K[`placeholder--${t}`])})}class dt{constructor(t){this.position=null,this.next=new Array,this.state=t}matches(t,n){for(const i of this.next)if(i.position.x===t.x&&i.position.y===t.y)return i;const o=new dt(n());return o.position=t,this.next.push(o),o}}class Se{constructor(t,n=new Array,o=null){this.grid=t,this.moves=n,this.conflicts=o}}function Nt(e){return e.sort((t,n)=>n.y-t.y===0?n.x-t.x:n.y-t.y)}function Re(e,t){t=Ot(e,t);const n=new Map;for(let r=0;r<t.length;r++)n.set(`${t[r].x}:${t[r].y}`,r);const o=[];let i=0;for(;i<t.length;){const r=n.get(`${t[i].x}:${t[i].y}`);o.push(t[r]),i=r+1}return Tt(e,o)}function Ne(e,t){if(t=Ot(e,t),t.length===0)return[];const n=[t[t.length-1]];for(let o=t.length-2;o>=0;o--){const i=n[n.length-1],r=t[o];(r.x<i.x||r.y<i.y)&&n.push(r)}return n.reverse(),Tt(e,n)}function z(e,t,n,o=0){const i=e==="RESIZE"?n.x-t.width:n.x-t.x,r=e==="RESIZE"?n.y-t.height:n.y-t.y;return{type:e,itemId:t.id,x:e!=="RESIZE"?n.x:t.x,y:e!=="RESIZE"?n.y:t.y,width:e==="RESIZE"?n.x:t.width,height:e==="RESIZE"?n.y:t.height,direction:i>0?"right":i<0?"left":r<0?"up":"down",distanceX:i,distanceY:r,score:o}}function ut(e){return{left:e.x-e.distanceX,right:e.x-e.distanceX+e.width-1,top:e.y-e.distanceY,bottom:e.y-e.distanceY+e.height-1}}function Mt(e){return{left:e.x,right:e.x+e.width-1,top:e.y,bottom:e.y+e.height-1}}function rt(e,t){return e.id===t.id?!1:e.x<=t.x+t.width-1&&t.x<=e.x+e.width-1&&e.y<=t.y+t.height-1&&t.y<=e.y+e.height-1}function st(e,t){return e==="down"&&t==="up"||e==="up"&&t==="down"||e==="left"&&t==="right"||e==="right"&&t==="left"}function Ot(e,t){let n=-1;for(let o=0;o<t.length;o++)t[o].x===e.x&&t[o].y===e.y&&(n=o);return t.slice(n+1)}function Tt(e,t){const n=[];let o=e.x,i=e.y;for(const r of t){const a=Math.sign(r.x-o),c=Math.sign(r.y-i);for(let l=o,s=i;l!==r.x||s!==r.y;)l!==r.x?l+=a:s+=c,n.push(new S({x:l,y:s}));o=r.x,i=r.y}return n}class Me{static clone(t){const n=new Q([],0);n._width=t._width,n._height=t._height;for(const o of t._items){const i={...o};n._itemsMap.set(i.id,i),n._items.push(i)}return n}constructor(t,n){this._items=new Array,this._itemsMap=new Map,this._width=n,this._height=0;for(const o of t){if(o.x<0||o.y<0||o.x+o.width>this._width)throw new Error("Invalid grid: items outside the boundaries.");if(o.width<1||o.height<1)throw new Error("Invalid grid: items of invalid size.");for(const r of this._items)if(rt(r,o))throw new Error("Invalid grid: items overlap.");const i={...o};this._itemsMap.set(i.id,i),this._items.push(i),this._height=Math.max(this.height,i.y+i.height)}}get width(){return this._width}get height(){return this._height}get items(){return this._items}getItem(t){const n=this._itemsMap.get(t);if(!n)throw new Error(`Item with id "${t}" not found in the grid.`);return n}getOverlaps(t){return this._items.filter(n=>rt(n,t))}}class Q extends Me{move(t,n,o){const i=this.getItem(t);i.x=n,i.y=o,this._height=Math.max(this.height,i.y+i.height)}resize(t,n,o){const i=this.getItem(t);i.width=n,i.height=o,this._height=Math.max(this.height,i.y+i.height)}insert(t){if(t.x<0||t.y<0||t.x+t.width>this._width)throw new Error("Inserting item is outside the boundaries.");if(t.width<1||t.height<1)throw new Error("Inserting item has invalid size.");const n={...t};this._itemsMap.set(n.id,n),this._items.push(n),this._height=Math.max(this.height,t.y+t.height)}remove(t){this._itemsMap.delete(t),this._items=this._items.filter(n=>n.id!==t)}}const Oe=["down","right","left","up"];class ht{constructor(t,n,o){this.moveIndex=0,this.overlaps=new Map,this.score=0,this.grid=Q.clone(t),this.moves=[...n],this.moveIndex=n.length,this.conflicts=o}static clone({grid:t,moves:n,moveIndex:o,conflicts:i,overlaps:r,score:a}){return{grid:Q.clone(t),moves:[...n],moveIndex:o,conflicts:i,overlaps:new Map([...r]),score:a}}}function Te(e){const t=[];for(const[n,o]of e.overlaps)for(const i of Oe){const r=Pe(e,n,o,i);r!==null&&t.push([ht.clone(e),r])}return t}function Pe(e,t,n,o){var i;const r=e.grid.getItem(e.moves[0].itemId),a=e.grid.getItem(t),c=e.grid.getItem(n),l=Le(a,c,o);if(l.x<0||l.y<0||l.x+l.width>e.grid.width)return null;const s=_t(e,a.id);if(s&&st(s.direction,o))return null;const d=Ae(e,l,c);for(const k of d)if(k.id===r.id||!((i=e.conflicts)===null||i===void 0)&&i.items.has(k.id)||e.overlaps.has(k.id))return null;const u=_t(e,c.id);if(!u)throw new Error("Invariant violation: overlap issuer has no associated moves.");const h=u.direction,g=ke(l,u),v=o!==h,f=st(o,h),M=De(e),_=ze(e),m=g?0:20,y=!g&&v?10:0,C=!g&&f?500:0,R=m+y+C,A=d.size*50,J=a.y+a.height-1<M.top?500:0,N=a.x+a.width-1<M.left?50:0,tt=a.x>M.right?50:0,F=J+N+tt,H=l.distanceX*_.x<0?_.x*2:0,W=l.distanceY*_.y<0?_.y*2:0,G=H+W,Y=1+R+A+G+F;return{...l,score:Y}}function Le(e,t,n){switch(n){case"up":return z("OVERLAP",e,new S({x:e.x,y:t.y-e.height}));case"down":return z("OVERLAP",e,new S({x:e.x,y:t.y+t.height}));case"left":return z("OVERLAP",e,new S({x:t.x-e.width,y:e.y}));case"right":return z("OVERLAP",e,new S({x:t.x+t.width,y:e.y}))}}function _t(e,t){let n=null;for(let o=e.moves.length-1;o>=e.moveIndex;o--)if(e.moves[o].itemId===t){n=e.moves[o];break}return n}function ze(e){const t={x:0,y:0};for(let n=e.moveIndex;n<e.moves.length;n++){const o=e.moves[n];o.type==="OVERLAP"&&(t.x+=o.distanceX*o.height,t.y+=o.distanceY*o.width)}return t}function De(e){const t=e.moves[0],n=e.moves[e.moveIndex];if(!t||!n||t.itemId!==n.itemId)throw new Error("Invariant violation: unexpected user move.");const o=ut(n),i=Mt(n);return{top:Math.min(o.top,i.top),right:Math.max(o.right,i.right),bottom:Math.max(o.bottom,i.bottom),left:Math.min(o.left,i.left)}}function Ae(e,t,n){const{left:o,right:i,top:r,bottom:a}=ut(t),c=t.distanceX<=0?t.x:i+1,l=t.distanceX<0?o-1:i+t.distanceX,s=t.distanceY<=0?t.y:a+1,d=t.distanceY<0?r-1:a+t.distanceY,u=new Set(e.grid.getOverlaps({id:t.itemId,x:c,width:1+l-c,y:s,height:1+d-s}));return u.delete(n),u}function ke(e,t){if(t.type!=="MOVE"||!st(e.direction,t.direction))return!1;const n=ut(e),o=Mt(t);switch(t.direction){case"up":return n.top===o.top;case"right":return n.right===o.right;case"down":return n.bottom===o.bottom;case"left":return n.left===o.left}}const Ce=100,Ve=5;function U(e,t){const n=He(e.grid,e.conflicts,t),o=new ht(e.grid,e.moves,n),i=[o,t],r=new Map,a=([d,u])=>`${u.itemId} ${u.x}:${u.y}:${d.score+u.score}`;let c=[i],l=null,s=Ce;for(;c.length>0;){let d=[];for(let u=0;u<Math.min(Ve,c.length);u++){const[h,g]=c[u];if(!(l&&h.score+g.score>=l.score))if(mt(h,g),h.overlaps.size===0)l=h;else for(const v of Te(h)){const f=a(v);r.get(f)||(d.push(v),r.set(f,v))}}if(c=d.sort((u,h)=>u[0].score+u[1].score-(h[0].score+h[1].score)),d=[],s--,s<=0)break}return l||(l=o.conflicts?o:Be(o)),l.conflicts?l:je(l,t)}function Be(e){for(;e.overlaps.size>0;){const t=Nt([...e.overlaps].map(([n])=>e.grid.getItem(n)));for(const n of t){let o=n.y+1;for(;e.grid.getOverlaps({...n,y:o}).length>0;)o++;mt(e,z("OVERLAP",n,new S({x:n.x,y:o})))}}return e}function je(e,t){const n=new ht(e.grid,e.moves,e.conflicts);function o(){let i=!1;for(const r of n.grid.items){if(r.id===(t==null?void 0:t.itemId))continue;let a=r.y-1,c=null;for(;a>=0;){const l=z("FLOAT",r,new S({x:r.x,y:a}));if(n.grid.getOverlaps({id:r.id,...l}).length>0)break;a--,c=l}c&&(mt(n,c),i=!0)}i&&o()}return o(),n}function He(e,t,n){var o;if(n.type!=="MOVE")return null;const i=(o=t==null?void 0:t.direction)!==null&&o!==void 0?o:n.direction,a=e.getOverlaps({...n,id:n.itemId}).filter(c=>{switch(i){case"left":return c.x<n.x;case"right":return c.x+c.width-1>n.x+n.width-1;case"up":return c.y<n.y;case"down":return c.y+c.height-1>n.y+n.height-1}});return a.length>0?{direction:i,items:new Set(a.map(c=>c.id))}:null}function mt(e,t){We(e,t),Ye(e,t),e.moves.push(t),e.score+=t.score}function We({grid:e},t){switch(t.type){case"MOVE":case"OVERLAP":case"FLOAT":return e.move(t.itemId,t.x,t.y);case"INSERT":return e.insert({id:t.itemId,...t});case"REMOVE":return e.remove(t.itemId);case"RESIZE":return e.resize(t.itemId,t.width,t.height)}}function Ye(e,t){var n;for(const o of e.grid.getOverlaps({...t,id:t.itemId}))!((n=e.conflicts)===null||n===void 0)&&n.items.has(o.id)||e.overlaps.set(o.id,t.itemId);for(const[o,i]of e.overlaps)rt(e.grid.getItem(o),e.grid.getItem(i))||e.overlaps.delete(o)}class Pt{constructor(t){this.layout=t,this.cache=new dt(new Se(new Q(t.items,t.columns)))}move(t,n=this.cache){const o=this.validateMovePath({...t},n.state);for(let i=0;i<o.length;i++){const r=n.state.grid.getItem(t.itemId),a=z("MOVE",r,o[i]);n=n.matches(o[i],()=>U(n.state,a))}return this.getLayoutShift(n.state)}resize(t){const n=this.validateResizePath(t,this.cache.state);let o=this.cache;for(let i=0;i<n.length;i++){const r=o.state.grid.getItem(t.itemId),a=n[i].x-r.x,c=n[i].y-r.y,l=z("RESIZE",r,new S({x:a,y:c}));o=o.matches(n[i],()=>U(o.state,l))}return this.getLayoutShift(o.state)}insert({itemId:t,width:n,height:o,path:[i,...r]}){const a=z("INSERT",{id:t,x:i.x,y:i.y,width:n,height:o},i),c=this.cache.matches(i,()=>U(this.cache.state,a));return this.move({itemId:t,path:r},c)}remove(t){const{x:n,y:o,width:i,height:r}=this.cache.state.grid.getItem(t),a=z("REMOVE",{id:t,x:n,y:o,width:i,height:r},new S({x:n,y:o})),c=U(this.cache.state,a);return this.getLayoutShift(c)}getLayoutShift(t){return{current:this.layout,next:{items:Nt(t.grid.items),columns:t.grid.width,rows:t.grid.height},moves:t.moves,conflicts:t.conflicts?[...t.conflicts.items]:[]}}validateMovePath({itemId:t,path:n},o){const i=o.grid.getItem(t);for(const r of n)if(r.x<0||r.y<0||r.x+i.width>o.grid.width)throw new Error("Invalid move: outside grid.");return Re(new S({x:i.x,y:i.y}),n)}validateResizePath({itemId:t,path:n},o){const i=o.grid.getItem(t),r=i.x+i.width,a=i.y+i.height;for(const c of n){if(c.x<1||c.y<1)throw new Error("Invalid resize: can't resize to 0.");if(c.x>o.grid.width)throw new Error("Invalid resize: outside grid.")}return Ne(new S({x:r,y:a}),n)}}function Lt(e,t){var n,o;const{operation:i,layoutShift:r,itemsLayout:a}=e,c=(n=a.items.find(f=>f.id===e.draggableItem.id))!==null&&n!==void 0?n:null;if(!r)return null;const l=r.moves[0],s=(o=l==null?void 0:l.itemId)!==null&&o!==void 0?o:c==null?void 0:c.id;if(!s)return null;const d=r.moves.filter(f=>f.itemId===s),u=d[d.length-1],h=u??c,g=new Set(r.conflicts),v=new Set(r.moves.map(f=>f.itemId));return v.delete(s),{type:"dnd-action",item:e.draggableItem,operation:i,placement:{x:h.x,y:h.y,width:h.width,height:h.height},direction:t,conflicts:g,disturbed:v}}function $e(e,t,n,o){if(!e)return"";const i=e.item,r=s=>t.find(d=>(d==null?void 0:d.id)===s),a=s=>s?s==="left"||s==="right"?"horizontal":"vertical":null;function c(s){const d=s.placement,u=a(s.direction),h=[...s.conflicts].map(r),g=[...s.disturbed].map(r);switch(s.operation){case"reorder":return n.liveAnnouncementDndItemReordered({item:i,placement:d,direction:u,conflicts:h,disturbed:g});case"resize":return n.liveAnnouncementDndItemResized({item:i,placement:d,direction:u,isMinimalColumnsReached:d.width===$(i,o),isMinimalRowsReached:d.height===q(i),conflicts:h,disturbed:g});case"insert":return n.liveAnnouncementDndItemInserted({item:i,placement:d,conflicts:h,disturbed:g})}}function l(s){return n.liveAnnouncementItemRemoved({item:i,disturbed:[...s.disturbed].map(r)})}switch(e.type){case"dnd-started":return n.liveAnnouncementDndStarted(e.operation);case"dnd-action":return c(e);case"dnd-committed":return n.liveAnnouncementDndCommitted(e.operation);case"dnd-discarded":return n.liveAnnouncementDndDiscarded(e.operation);case"item-removed":return l(e)}}function zt(e,t){return e.map(o=>t.find(i=>i.id===o)).reduce((o,i)=>({top:Math.min(o.top,i.y),left:Math.min(o.left,i.x),bottom:Math.max(o.bottom,i.y+i.height),right:Math.max(o.right,i.x+i.width)}),{top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,right:Number.NEGATIVE_INFINITY})}function qe(e,t,n,o){let i=-1;for(let r=0;r<e.length;r++)switch(t){case"left":{e[r].x===0&&(i=r);break}case"right":{e[r].x===n-1&&(i=r);break}case"up":{e[r].y===0&&(i=r);break}case"down":{e[r].y===o-1&&(i=r);break}}return e.slice(i)}function Dt(e,t){return kt(e,new S({x:t.left,y:t.top}))}function At(e,t){return kt(e,new S({x:t.right,y:t.bottom}))}function kt(e,t){const n=[...e],o=e[e.length-1];if(!o)return[t];const i=Math.sign(t.x-o.x),r=Math.sign(t.y-o.y);let{x:a,y:c}=o,l=0;for(;a!==t.x||c!==t.y;){if(++l===100)throw new Error("Infinite loop in appendPath.");a!==t.x?a+=i:c+=r,n.push(new S({x:a,y:c}))}return n}function ct(e){return e.itemsLayout.columns}function ft(e){var t,n,o;const i=(n=(t=e.layoutShift)===null||t===void 0?void 0:t.next)!==null&&n!==void 0?n:e.itemsLayout,r=i.items.find(c=>c.id===e.draggableItem.id),a=(o=r==null?void 0:r.height)!==null&&o!==void 0?o:j(e.draggableItem);return e.operation==="resize"?Math.max(i.rows,r?r.y+r.height+1:0):Math.max(i.rows,e.itemsLayout.rows+a)}function Ct(e){const t=ft(e),n=ct(e);return St(t,n)}function Vt(e){return e.x<0?"right":e.x>0?"left":e.y<0?"down":e.y>0?"up":"right"}function gt(e,t,n){if(t.length===0)return null;const o=B(e.draggableItem,ct(e)),i=j(e.draggableItem),r=ft(e),a=ct(e);switch(e.operation){case"resize":return e.layoutEngine.resize({itemId:e.draggableItem.id,path:t});case"reorder":return e.layoutEngine.move({itemId:e.draggableItem.id,path:t});case"insert":return e.layoutEngine.insert({itemId:e.draggableItem.id,width:o,height:i,path:qe(t,n??"right",a,r)})}}function Fe({isRtl:e}){return I.useReducer(Xe({isRtl:e}),{transition:null,removeTransition:null,announcement:null})}function Ge(e){return e.transition?ft(e.transition):0}function Xe({isRtl:e}){return function(n,o){switch(o.type){case"init":return Ue(o);case"init-remove":return Ze(o);case"submit":return Ke(n);case"discard":return Qe(n);case"update-with-pointer":return Je(n,o);case"update-with-keyboard":return tn(n,o,{isRtl:e});case"acquire-item":return en(n,o)}}}function Ue({operation:e,interactionType:t,itemsLayout:n,draggableItem:o,draggableRect:i,collisionIds:r}){const a={operation:e,interactionType:t,itemsLayout:n,layoutEngine:new Pt(n),insertionDirection:null,draggableItem:o,draggableRect:i,acquiredItem:null,collisionIds:new Set,layoutShift:null,path:[]},c=Ct(a),l=n.items.find(d=>d.id===o.id);let s=[];if(t==="pointer"||e==="insert"){const d=zt(r,c.items);s=l?(e==="resize"?At:Dt)([],d):[]}else l&&(s=e==="resize"?[new S({x:l.x+l.width,y:l.y+l.height})]:[new S({x:l.x,y:l.y})]);return{transition:{...a,path:s},removeTransition:null,announcement:l?{type:"dnd-started",item:o,operation:e}:null}}function Ze({items:e,removedItem:t,itemsLayout:n}){const o=new Pt(n).remove(t.id);return{transition:null,removeTransition:{items:e,removedItem:t,layoutShift:o},announcement:null}}function Ke(e){var t;const{transition:n,removeTransition:o}=e;if(o){const s=new Set(o.layoutShift.moves.map(d=>d.itemId));return s.delete(o.removedItem.id),{transition:null,removeTransition:null,announcement:{type:"item-removed",item:o.removedItem,disturbed:s}}}if(!n)throw new Error("Invariant violation: no transition.");const{operation:i,itemsLayout:r,draggableItem:a,acquiredItem:c}=n,l=a.id===(c==null?void 0:c.id)||r.items.some(s=>s.id===a.id);return((t=n.layoutShift)===null||t===void 0?void 0:t.conflicts.length)===0?{transition:null,removeTransition:null,announcement:l?{type:"dnd-committed",item:a,operation:i}:null}:{transition:null,removeTransition:null,announcement:l?{type:"dnd-discarded",item:a,operation:i}:null}}function Qe(e){const{transition:t,removeTransition:n}=e;if(n)throw new Error("Can't discard remove transition.");if(!t)throw new Error("Invariant violation: no transition.");const{operation:o,itemsLayout:i,draggableItem:r,acquiredItem:a}=t;return{transition:null,removeTransition:null,announcement:r.id===(a==null?void 0:a.id)||i.items.some(l=>l.id===r.id)?{type:"dnd-discarded",item:r,operation:o}:null}}function Je(e,{collisionIds:t,positionOffset:n,draggableRect:o}){var i,r,a;const{transition:c}=e;if(!c)throw new Error("Invariant violation: no transition.");const l=(r=(i=c.layoutShift)===null||i===void 0?void 0:i.next)!==null&&r!==void 0?r:c.itemsLayout,s=l.items.find(C=>C.id===c.draggableItem.id),d=s?s.width:B(c.draggableItem,l.columns),u=s?s.height:j(c.draggableItem),h=d*u;if(c.operation!=="resize"?t.length<h:t.length===0)return{transition:{...c,draggableRect:o,collisionIds:new Set,layoutShift:null,insertionDirection:null},removeTransition:null,announcement:null};const v=Ct(c),f=zt(t,v.items),_=(c.operation==="resize"?At:Dt)(c.path,f),m=(a=c.insertionDirection)!==null&&a!==void 0?a:Vt(n),y=gt(c,_,m);return{transition:{...c,draggableRect:o,collisionIds:new Set(t),layoutShift:y,path:_,insertionDirection:m},removeTransition:null,announcement:null}}function tn(e,{direction:t},{isRtl:n}){const{transition:o}=e;if(!o)throw new Error("Invariant violation: no transition.");const i=(r,a)=>{var c,l;const s=a==="left"?-1:a==="right"?1:0,d=a==="up"?-1:a==="down"?1:0,u=r.path[r.path.length-1],h=new S({x:u.x+s,y:u.y+d}),g=[...r.path,h],f=((l=(c=r.layoutShift)===null||c===void 0?void 0:c.next)!==null&&l!==void 0?l:r.itemsLayout).items.find(m=>m.id===r.draggableItem.id),M=$(r.draggableItem,r.itemsLayout.columns),_=q(r.draggableItem);if(r.operation==="resize"&&f&&(f.width+s<M||f.height+d<_))return e;try{const m=gt(r,g),y={...r,layoutShift:m,path:g};return{transition:y,removeTransition:null,announcement:Lt(y,a)}}catch{return e}};switch(t){case"left":return i(o,n()?"right":"left");case"right":return i(o,n()?"left":"right");case"up":return i(o,"up");case"down":return i(o,"down")}}function en(e,{position:t,layoutElement:n,acquiredItemElement:o}){const{transition:i}=e;if(!i)throw new Error("Invariant violation: no transition.");const{columns:r}=i.itemsLayout,a=$t(n),c=i.draggableRect,l=c.left-a.insetInlineStart,s=new Xt({x:l,y:c.top-a.insetBlockStart}),d=Vt(s),u=B(i.draggableItem,r);t=new S({x:Math.min(r-u,t.x),y:t.y});const h=[...i.path,t],g=gt(i,h,d),v={...i.draggableItem,columnOffset:0,columnSpan:1,rowSpan:1},f={...i,collisionIds:new Set,layoutShift:g,path:h,acquiredItem:v,acquiredItemElement:o};return{transition:f,removeTransition:null,announcement:Lt(f,null)}}function nn(e,t,n){const o={};for(const i of t){const r=e.items.find(a=>a.id===i.itemId);i.type==="REMOVE"?o[i.itemId]={type:"remove"}:r&&(o[r.id]={type:"move",x:n.getColOffset(i.x-r.x),y:n.getRowOffset(i.y-r.y),width:n.getWidth(i.width),height:n.getHeight(i.height)})}return o}class on{constructor(t=null){this.detail=t,this.defaultPrevented=!1,this.cancelBubble=!1}preventDefault(){}stopPropagation(){}}function rn(e){return new on(e)}function it(e,t){var n,o,i,r,a,c,l,s;const d=(o=(n=t.moves.find(f=>f.type==="INSERT"))===null||n===void 0?void 0:n.itemId)!==null&&o!==void 0?o:null,u=(r=(i=t.moves.find(f=>f.type==="MOVE"))===null||i===void 0?void 0:i.itemId)!==null&&r!==void 0?r:null,h=(c=(a=t.moves.find(f=>f.type==="REMOVE"))===null||a===void 0?void 0:a.itemId)!==null&&c!==void 0?c:null,g=(s=(l=t.moves.find(f=>f.type==="RESIZE"))===null||l===void 0?void 0:l.itemId)!==null&&s!==void 0?s:null,v=xe(e,t.next,g??d);return rn({items:v,addedItem:v.find(f=>f.id===d),removedItem:e.find(f=>f.id===h),resizedItem:v.find(f=>f.id===g),movedItem:d?void 0:v.find(f=>f.id===u)})}function sn({items:e,renderItem:t,onItemsChange:n,empty:o,i18nStrings:i,__internalRootRef:r,...a}){var c,l;const s=I.useRef(null),[d,u]=le(),h=Et(s,u),g=I.useRef({}),v=()=>qt(s.current);me();const f=_e(),[M,_]=Fe({isRtl:v}),m=M.transition,y=M.removeTransition,C=M.announcement,R=(c=m==null?void 0:m.acquiredItem)!==null&&c!==void 0?c:null,A=m==null?void 0:m.acquiredItemElement,J=m?m.itemsLayout.columns:d;e=(l=y==null?void 0:y.items)!==null&&l!==void 0?l:e,e=R?[...e,R]:e;const N=Ie(e,J),tt=new Map(N.items.map(p=>[p.id,p])),F=new Map(N.items.map((p,x)=>[p.id,x]));e=[...e].sort((p,x)=>{var E,b;return((E=F.get(p.id))!==null&&E!==void 0?E:-1)-((b=F.get(x.id))!==null&&b!==void 0?b:-1)});const H=I.useRef(null);I.useEffect(()=>{const p=H.current;p&&g.current[p].focusDragHandle(),H.current=null}),I.useEffect(()=>{if(!y)return;const p=setTimeout(()=>{var x;_({type:"submit"});const E=e.findIndex(O=>O.id===y.removedItem.id),b=E!==e.length-1?E:e.length-2,P=it(e,y.layoutShift),w=(x=P.detail.items[b])===null||x===void 0?void 0:x.id;w&&g.current[w].focusDragHandle(),n(P)},xt);return()=>clearTimeout(p)},[y,e,n]);const W=yt(R==null?void 0:R.id),G=yt(A);I.useEffect(()=>{var p;W&&G&&!A&&((p=g.current[W])===null||p===void 0||p.focusDragHandle())},[W,G,A]);const Y=Ge(M)||N.rows,k=St(Y,N.columns);function pt(p){const x=s.current,E=X=>x===X||x.contains(X),b=v()?document.documentElement.clientWidth-p.left:p.left,P=v()?document.documentElement.clientWidth-p.right:p.right,{top:w,bottom:O}=p;return E(document.elementFromPoint(b,w))||E(document.elementFromPoint(P,w))||E(document.elementFromPoint(P,O))||E(document.elementFromPoint(b,O))}D("start",({operation:p,interactionType:x,draggableItem:E,collisionRect:b,collisionIds:P})=>{_({type:"init",operation:p,interactionType:x,itemsLayout:N,draggableItem:E,draggableRect:b,collisionIds:x==="pointer"&&pt(b)?P:[]}),f.addPointerEventHandlers()}),D("update",({interactionType:p,collisionIds:x,positionOffset:E,collisionRect:b})=>{_({type:"update-with-pointer",collisionIds:p==="pointer"&&pt(b)?x:[],positionOffset:E,draggableRect:b})}),D("submit",()=>{if(_({type:"submit"}),f.removePointerEventHandlers(),!m)throw new Error("Invariant violation: no transition.");if(!m.layoutShift||m.layoutShift.conflicts.length>0||m.layoutShift.moves.length===0)return null;m.operation==="insert"?n(it([...e,m.draggableItem],m.layoutShift)):n(it(e,m.layoutShift))}),D("discard",()=>{_({type:"discard"}),f.removePointerEventHandlers()}),D("acquire",({droppableId:p,draggableItem:x,renderAcquiredItem:E})=>{const b=k.items.find(P=>P.id===p);b&&(_({type:"acquire-item",position:new S({x:b.x,y:b.y}),layoutElement:s.current,acquiredItemElement:E()}),H.current=x.id)});const jt=p=>{_({type:"init-remove",items:e,itemsLayout:N,removedItem:p})};function Ht(p){m&&(_({type:"update-with-keyboard",direction:p}),f.scheduleActiveElementScrollIntoView(xt))}const Wt=C?$e(C,e,i,N.columns):"";return L.jsxs("div",{ref:r,...Ut(a),children:[L.jsx("div",{ref:h,className:at(K.root,{[K.empty]:Y===0}),children:Y>0?L.jsx(ye,{isRtl:v,columns:N.columns,layout:[...k.items,...N.items],children:p=>{var x;const E=(x=m==null?void 0:m.layoutShift)!==null&&x!==void 0?x:y==null?void 0:y.layoutShift,b=E?nn(N,E.moves,p):{};m&&m.interactionType==="pointer"&&delete b[m.draggableItem.id];const P=[];return k.items.forEach(w=>{var O;return P.push(L.jsx(Ee,{id:w.id,state:m?!((O=m.collisionIds)===null||O===void 0)&&O.has(w.id)?"hover":"active":"default",gridContext:p,columns:N.columns},w.id))}),e.forEach(w=>{const O=tt.get(w.id),X=(m==null?void 0:m.operation)==="resize"&&(m==null?void 0:m.draggableItem.id)===w.id,et=O??{width:B(w,N.columns),height:j(w)},vt=X&&O?{width:N.columns-O.x,height:999}:et;P.push(L.jsx(Zt,{ref:wt=>{wt?g.current[w.id]=wt:delete g.current[w.id]},item:w,transform:b[w.id],inTransition:!!m||!!y,placed:w.id!==(R==null?void 0:R.id),acquired:w.id===(R==null?void 0:R.id),getItemSize:()=>({width:p.getWidth(et.width),minWidth:p.getWidth($(w,N.columns)),maxWidth:p.getWidth(vt.width),height:p.getHeight(et.height),minHeight:p.getHeight(q(w)),maxHeight:p.getHeight(vt.height)}),onKeyMove:Ht,isRtl:v,children:w.id===(R==null?void 0:R.id)&&A?()=>A:()=>t(w,{removeItem:()=>jt(w)})},w.id))}),P}}):o}),L.jsx(Jt,{children:Wt})]})}function Bt(e){const t=Kt("Board");return L.jsx(sn,{...e,...t})}Qt(Bt,"Board");function Ro({layout:e,setLayout:t,resetLayout:n,setSplitPanelOpen:o}){const[i,r]=lt(s=>s.contentBoxWidth),a=I.useRef(e!==null);I.useEffect(()=>{a.current||!i||n(It(i))},[n,i]);function c(s){a.current=!0,t(s)}function l(){a.current=!1,n(It(i))}return T.jsxDEV(nt,{size:"m",children:[T.jsxDEV(ee,{actions:T.jsxDEV(nt,{size:"xs",direction:"horizontal",children:[T.jsxDEV(ie,{onReset:l,children:"Reset to default layout"},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:52,columnNumber:13},this),T.jsxDEV(ot,{iconName:"add-plus",onClick:()=>o(!0),children:"Add widget"},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:53,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:51,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:49,columnNumber:7},this),T.jsxDEV(oe,{},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:59,columnNumber:7},this),T.jsxDEV("div",{ref:r,children:T.jsxDEV(Bt,{empty:T.jsxDEV(te,{title:"No widgets",description:"There are no widgets on the dashboard.",verticalCenter:!0,action:T.jsxDEV(nt,{direction:"horizontal",size:"xs",children:[T.jsxDEV(ot,{onClick:l,children:"Reset to default layout"},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:69,columnNumber:19},this),T.jsxDEV(ot,{iconName:"add-plus",onClick:()=>o(!0),children:"Add widget"},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:70,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:68,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:63,columnNumber:13},this),i18nStrings:re,items:se(e??[]),onItemsChange:({detail:{items:s}})=>{c(ce(s))},renderItem:(s,d)=>{const u=s.data.provider??Ft.Fragment;return T.jsxDEV(u,{children:T.jsxDEV(ne,{config:s.data,onRemove:d.removeItem},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:86,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:85,columnNumber:15},this)}},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:61,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/src/pages/configurable-dashboard/content.tsx",lineNumber:48,columnNumber:5},this)}export{Ro as Content};
