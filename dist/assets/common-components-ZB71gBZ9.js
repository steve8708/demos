import{p as R,r as p,b7 as P,w as T,I as te,R as a,br as B,ay as K,K as W,_ as G,O as ae,a7 as se,bC as ie,n as X,Y as re,c7 as le,P as j,c8 as ce,b8 as de,c9 as J,ca as ue,u as pe,G as fe,c as me,j as I}from"./index-DLMN1afU.js";import{j as w}from"./jsx-runtime-Cz3FP8BU.js";import{b as ge,g as ve,u as be,a as he}from"./use-merge-refs-BuXKjLp5.js";import{f as _e}from"./index-D-NGCnrk.js";import{I as Ne}from"./internal-CRvFCTzT.js";import{S as z}from"./index-C1AwVX_8.js";import"./index-DJYuq0HF.js";import"./is-development-CxJkH8d1.js";const D={"gen-ai":"awsui_gen-ai_12y5i_wem9e_19",dot:"awsui_dot_12y5i_wem9e_81",root:"awsui_root_12y5i_wem9e_162",typing:"awsui_typing_12y5i_wem9e_176"};function we({color:e,width:n}){const o=`calc(.14px * ${n})`;return w.jsx("div",{className:R(D.root,{[D["gen-ai"]]:e==="gen-ai"}),children:w.jsxs("div",{className:D.typing,children:[w.jsx("div",{className:D.dot,style:{blockSize:o,inlineSize:o}}),w.jsx("div",{className:D.dot,style:{blockSize:o,inlineSize:o}}),w.jsx("div",{className:D.dot,style:{blockSize:o,inlineSize:o}})]})})}const L={root:"awsui_root_1qkal_bavty_15","avatar-color-default":"awsui_avatar-color-default_1qkal_bavty_50","avatar-color-gen-ai":"awsui_avatar-color-gen-ai_1qkal_bavty_53",initials:"awsui_initials_1qkal_bavty_56",image:"awsui_image_1qkal_bavty_83",content:"awsui_content_1qkal_bavty_87"},xe=({color:e,loading:n,initials:o,iconName:t,iconSvg:i,iconUrl:f,ariaLabel:c,width:r,imgUrl:l})=>{if(n)return w.jsx(we,{color:e,width:r});if(l)return w.jsx("img",{className:L.image,src:l,style:{height:r,width:r}});if(o){const m=o.length>2?o.slice(0,2):o;return o.length>2&&T("Avatar",'"initials" is longer than 2 characters. Only the first two characters are shown.'),w.jsx("span",{style:{fontSize:`clamp(${_e}, calc(0.4px * ${r}), calc(0.4px * ${r}))`},children:m})}return w.jsx(te,{name:t,svg:i,url:f,alt:c,size:"inherit"})};function ye({color:e,tooltipText:n,initials:o,loading:t=!1,ariaLabel:i,iconName:f,iconSvg:c,iconUrl:r,imgUrl:l,width:m=28,__internalRootRef:_=null,...b}){const h=p.useRef(null),[x,E]=p.useState(!1),u=ge(h,_),y=m<28?28:m,C={onFocus:()=>{E(!0)},onBlur:()=>{E(!1)},onMouseEnter:()=>{E(!0)},onMouseLeave:()=>{E(!1)},onTouchStart:()=>{E(!0)},onTouchEnd:()=>{E(!1)}};return w.jsxs("div",{...ve(b),ref:u,tabIndex:0,className:R(L.root,L[`avatar-color-${e}`],{[L.initials]:o}),role:"img","aria-label":i,...C,style:{height:y,width:y},children:[x&&n&&w.jsx(P,{value:n,trackRef:h,contentAttributes:{onPointerDown:()=>E(!1)}}),w.jsx("div",{className:L.content,"aria-hidden":"true",style:{lineHeight:`calc(.8px * ${y})`},children:w.jsx(xe,{color:e,ariaLabel:i,initials:o,loading:t,iconName:f,iconSvg:c,iconUrl:r,imgUrl:l,width:y})})]})}function M({color:e="default",iconName:n="user-profile",...o}){const t=be("Avatar",{props:{color:e,iconName:n}});return w.jsx(ye,{color:e,iconName:n,...o,...t})}he(M,"Avatar");const v={"button-group":"awsui_button-group_1v2mg_1s3dt_5","button-group-item":"awsui_button-group-item_1v2mg_1s3dt_9","button-group-tooltip":"awsui_button-group-tooltip_1v2mg_1s3dt_13",item:"awsui_item_1v2mg_1s3dt_17",tooltip:"awsui_tooltip_1v2mg_1s3dt_21"},ke=p.forwardRef(({item:e,showTooltip:n,onTooltipDismiss:o,onFilesChange:t},i)=>{const[f,c]=p.useState([]),r=a.useRef(null),l=!!n;return a.createElement("div",{ref:r},a.createElement(Ne,{className:R(v["button-group-item"]),ref:i,variant:"icon",ariaLabel:e.text,accept:e.accept,multiple:e.multiple,value:f,onChange:m=>{B(t,{id:e.id,files:m.detail.value}),c(m.detail.value)},"data-testid":e.id,__inputNativeAttributes:{"data-itemid":e.id},__inputClassName:v.item}),l&&a.createElement(P,{trackRef:r,trackKey:e.id,value:e.text,className:R(v.tooltip,v["button-group-tooltip"]),onDismiss:o}))}),Ee=p.forwardRef(({item:e,showTooltip:n,showFeedback:o,onTooltipDismiss:t,onItemClick:i},f)=>{const c=a.useRef(null),r=e.iconName||e.iconUrl||e.iconSvg;r||T("ButtonGroup",`Missing icon for item with id: ${e.id}`);const l=!!(n&&!e.disabled&&!e.loading),m=!!(n&&o&&e.popoverFeedback);return a.createElement("div",{ref:c},a.createElement(K,{variant:"icon",loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,disabledReason:o?void 0:e.disabledReason,__focusable:m,iconName:r?e.iconName:"close",iconUrl:e.iconUrl,iconSvg:e.iconSvg,iconAlt:e.text,ariaLabel:e.text,onClick:_=>B(i,{id:e.id},_),ref:f,"data-testid":e.id,"data-itemid":e.id,className:R(v.item,v["button-group-item"]),__title:""},e.text),(l||m)&&a.createElement(P,{trackRef:c,trackKey:e.id,value:o&&a.createElement(W,{tagName:"span"},e.popoverFeedback)||e.text,className:R(v.tooltip,v["button-group-tooltip"]),onDismiss:t}))});function q(e,n,o){return e?o??n:n}const Q={"variant-normal":"awsui_variant-normal_1a743_qq3jc_9",pressed:"awsui_pressed_1a743_qq3jc_9","variant-icon":"awsui_variant-icon_1a743_qq3jc_15"},Ie=a.forwardRef((e,n)=>{var{pressed:o,iconName:t,pressedIconName:i,iconSvg:f,pressedIconSvg:c,iconUrl:r,pressedIconUrl:l,variant:m,onChange:_,className:b}=e,h=G(e,["pressed","iconName","pressedIconName","iconSvg","pressedIconSvg","iconUrl","pressedIconUrl","variant","onChange","className"]);return t&&!i&&T("ToggleButton","`pressedIconName` must be provided for `pressed` state."),f&&!c&&T("ToggleButton","`pressedIconSvg` must be provided for `pressed` state."),r&&!l&&T("ToggleButton","`pressedIconUrl` must be provided for `pressed` state."),a.createElement(K,Object.assign({className:R(b,Q[`variant-${m}`],{[Q.pressed]:o}),variant:m,formAction:"none",iconName:q(o,t,i),iconUrl:q(o,r,l),iconSvg:q(o,f,c),"aria-pressed":o,onClick:x=>{x.preventDefault(),ae(_,{pressed:!o})}},h,{ref:n}))}),Re=p.forwardRef(({item:e,showTooltip:n,showFeedback:o,onTooltipDismiss:t,onItemClick:i},f)=>{var c;const r=a.useRef(null),l=e.iconName||e.iconUrl||e.iconSvg,m=e.pressedIconName||e.pressedIconUrl||e.pressedIconSvg;l||T("ButtonGroup",`Missing icon for item with id: ${e.id}`),m||T("ButtonGroup",`Missing pressed icon for item with id: ${e.id}`);const _=e.pressed&&(c=e.pressedPopoverFeedback)!==null&&c!==void 0?c:e.popoverFeedback,b=n&&!e.disabled&&!e.loading,h=n&&o&&_;return a.createElement("div",{ref:r},a.createElement(Ie,{variant:"icon",pressed:e.pressed,loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,disabledReason:o?void 0:e.disabledReason,iconName:l?e.iconName:"close",iconUrl:e.iconUrl,iconSvg:e.iconSvg,pressedIconName:l?e.pressedIconName:"close",pressedIconUrl:e.pressedIconUrl,pressedIconSvg:e.pressedIconUrl,ariaLabel:e.text,onChange:x=>B(i,{id:e.id,pressed:x.detail.pressed}),ref:f,"data-testid":e.id,"data-itemid":e.id,className:R(v.item,v["button-group-item"]),__title:""},e.text),(b||h)&&a.createElement(P,{trackRef:r,trackKey:e.id,value:o&&a.createElement(W,{tagName:"span"},_)||e.text,className:R(v.tooltip,v["button-group-tooltip"]),onDismiss:t}))}),Se=a.forwardRef(({item:e,showTooltip:n,onItemClick:o,onTooltipDismiss:t,expandToViewport:i},f)=>{const c=a.useRef(null),r=l=>{B(o,{id:l.detail.id,checked:l.detail.checked},l)};return a.createElement(se,{ref:f,variant:"icon",items:e.items,onItemClick:r,expandToViewport:i,ariaLabel:e.text,className:v["button-group-item"],"data-testid":e.id,customTriggerBuilder:({onClick:l,isOpen:m,triggerRef:_,ariaLabel:b,ariaExpanded:h,testUtilsClass:x})=>a.createElement("div",{ref:c},!m&&n&&!e.disabled&&!e.loading&&a.createElement(P,{trackRef:c,trackKey:e.id,value:e.text,className:R(v.tooltip,v["button-group-tooltip"]),onDismiss:t}),a.createElement(K,{ref:_,variant:"icon",ariaLabel:b,"data-itemid":e.id,ariaExpanded:h,className:R(v.item,x),iconName:"ellipsis",loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,disabledReason:e.disabledReason,onClick:l,__title:""}))})}),H={root:"awsui_root_vdkpj_15z3a_181","item-wrapper":"awsui_item-wrapper_vdkpj_15z3a_217",group:"awsui_group_vdkpj_15z3a_221",divider:"awsui_divider_vdkpj_15z3a_225"},Ce=p.forwardRef(({item:e,dropdownExpandToViewport:n,tooltip:o,setTooltip:t,onItemClick:i,onFilesChange:f},c)=>{const r=p.useRef(null),l=p.useRef(null),m=p.useRef(null),_=p.useRef(null);p.useImperativeHandle(c,()=>({focus:()=>{var u,y,C;(u=l.current)===null||u===void 0||u.focus(),(y=m.current)===null||y===void 0||y.focus(),(C=_.current)===null||C===void 0||C.focus()}})),p.useEffect(()=>{if((o==null?void 0:o.item)!==e.id)return;const u=()=>{t(null)},y=F=>{var U;F.target&&(!((U=r.current)===null||U===void 0)&&U.contains(F.target))||u()},C=F=>{F.key==="Escape"&&u()},A=new AbortController;return window.addEventListener("pointerdown",y,{signal:A.signal}),window.addEventListener("keydown",C,{signal:A.signal}),()=>{A.abort()}},[e.id,o,t]);const b=u=>{o!=null&&o.feedback||t(u?{item:e.id,feedback:!1}:null)},h=u=>{!u&&e.id!==(o==null?void 0:o.item)||t(u?{item:e.id,feedback:!1}:null)},x=u=>{"popoverFeedback"in e&&e.popoverFeedback&&t({item:e.id,feedback:!0}),B(i,u.detail,u)},E=u=>{B(f,u.detail,u),t(null)};return a.createElement("div",{key:e.id,className:H["item-wrapper"],ref:r,onPointerEnter:()=>b(!0),onPointerLeave:()=>b(!1),onFocus:u=>{u&&u.relatedTarget&&ie(r.current,u.relatedTarget)||h(!0)},onBlur:()=>h(!1)},e.type==="icon-button"&&a.createElement(Ee,{ref:l,item:e,onItemClick:x,showTooltip:(o==null?void 0:o.item)===e.id,showFeedback:!!(o!=null&&o.feedback),onTooltipDismiss:()=>t(null)}),e.type==="icon-toggle-button"&&a.createElement(Re,{ref:l,item:e,onItemClick:x,showTooltip:(o==null?void 0:o.item)===e.id,showFeedback:!!(o!=null&&o.feedback),onTooltipDismiss:()=>t(null)}),e.type==="icon-file-input"&&a.createElement(ke,{ref:m,item:e,onFilesChange:E,showTooltip:(o==null?void 0:o.item)===e.id,onTooltipDismiss:()=>t(null)}),e.type==="menu-dropdown"&&a.createElement(Se,{ref:_,item:e,showTooltip:(o==null?void 0:o.item)===e.id,onItemClick:x,expandToViewport:n,onTooltipDismiss:()=>t(null)}))}),Te=p.forwardRef((e,n)=>{var{items:o=[],onItemClick:t,onFilesChange:i,ariaLabel:f,dropdownExpandToViewport:c,__internalRootRef:r=null}=e,l=G(e,["items","onItemClick","onFilesChange","ariaLabel","dropdownExpandToViewport","__internalRootRef"]);const m=X(l),_=p.useRef(null),b=p.useRef(null),h=p.useRef(null),x=re(h,r),E=p.useRef({}),[u,y]=p.useState(null);p.useImperativeHandle(n,()=>({focus:s=>{var d;(d=E.current[s])===null||d===void 0||d.focus()}}));function C(){var s,d;if(h.current){const N=Array.from(h.current.querySelectorAll(`.${v.item}`)).filter(g=>!g.disabled);return(d=(s=N.find(g=>g.dataset.itemid===_.current))!==null&&s!==void 0?s:N[0])!==null&&d!==void 0?d:null}return null}function A(s){var d;const k=(d=b.current)===null||d===void 0?void 0:d.getFocusTarget();k&&k.dataset.itemid!==s.dataset.itemid&&k.focus()}p.useEffect(()=>{var s;(s=b.current)===null||s===void 0||s.updateFocusTarget()});function F(s){var d;s.target instanceof HTMLElement&&s.target.dataset.itemid&&(_.current=s.target.dataset.itemid),(d=b.current)===null||d===void 0||d.updateFocusTarget()}function U(){var s;(s=b.current)===null||s===void 0||s.updateFocusTarget()}function Z(s){var d;const k=(d=b.current)===null||d===void 0?void 0:d.getFocusTarget(),N=[j.right,j.left,j.end,j.home,j.pageUp,j.pageDown];if(ce(s)||N.indexOf(s.keyCode)===-1||!h.current||!k||document.activeElement&&!document.activeElement.matches(`.${v.item}`))return;s.preventDefault();const g=ee(h.current),S=g.indexOf(k);de(s,{onHome:()=>$(g[0]),onEnd:()=>$(g[g.length-1]),onInlineStart:()=>$(g[J(S-1,[0,g.length-1])]),onInlineEnd:()=>$(g[J(S+1,[0,g.length-1])])})}function $(s){s.focus()}function ee(s){function d(N){var g,S;return(S=(g=b.current)===null||g===void 0?void 0:g.isRegistered(N))!==null&&S!==void 0?S:!1}function k(N){return N instanceof HTMLButtonElement?N.disabled:!1}return ue(s).filter(N=>d(N)&&!k(N))}return a.createElement("div",Object.assign({},m,{className:R(H.root,v["button-group"],m.className),ref:x,role:"toolbar","aria-label":f,onFocus:F,onBlur:U,onKeyDown:Z}),a.createElement(le,{ref:b,navigationActive:!0,getNextFocusTarget:C,onUnregisterActive:A},o.map((s,d)=>{var k;const N=V=>a.createElement(Ce,{key:V.id,item:V,dropdownExpandToViewport:c,tooltip:u,setTooltip:y,onItemClick:t,onFilesChange:i,ref:ne=>E.current[V.id]=ne}),g=((k=o[d-1])===null||k===void 0?void 0:k.type)==="group",S=o[d],Y=(S==null?void 0:S.type)==="group",oe=g||!g&&Y&&d!==0;return Y&&S.items.length===0&&T("ButtonGroup","Empty group detected. Empty groups are not allowed."),a.createElement(a.Fragment,{key:s.type==="group"?d:s.id},oe&&a.createElement("div",{className:H.divider}),s.type==="group"?a.createElement("div",{key:d,role:"group","aria-label":s.text,className:H.group},s.items.map(V=>N(V))):N(s))})))}),O=a.forwardRef((e,n)=>{var{variant:o,dropdownExpandToViewport:t=!1}=e,i=G(e,["variant","dropdownExpandToViewport"]);const f=X(i),c=Fe(i.items),r=pe("ButtonGroup",{props:{variant:o,dropdownExpandToViewport:t},metadata:{iconButtonsCount:c["icon-button"],iconToggleButtonsCount:c["icon-toggle-button"],iconFileInputsCount:c["icon-file-input"],menuDropdownsCount:c["menu-dropdown"],groupsCount:c.group}}),l=fe(i);return a.createElement(Te,Object.assign({},f,r,l,{ref:n,variant:o,dropdownExpandToViewport:t}))});function Fe(e=[]){const n={"icon-button":0,"icon-toggle-button":0,"icon-file-input":0,"menu-dropdown":0,group:0};function o(t){for(const i of t)n[i.type]+=1,i.type==="group"&&o(i.items)}return o(e),n}me(O,"ButtonGroup");function $e({type:e,name:n,initials:o,loading:t}){return e==="gen-ai"?I.jsxDEV(M,{color:"gen-ai",iconName:"gen-ai",tooltipText:n,ariaLabel:n,loading:t},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:13,columnNumber:12},this):I.jsxDEV(M,{initials:o,tooltipText:n,ariaLabel:n},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:16,columnNumber:10},this)}function ze({contentToCopy:e}){return I.jsxDEV(O,{ariaLabel:"Code snippet actions",variant:"icon",onItemClick:({detail:n})=>{n.id!=="copy"||!navigator.clipboard||navigator.clipboard.writeText(e).catch(o=>console.log("Failed to copy",o.message))},items:[{type:"group",text:"Feedback",items:[{type:"icon-button",id:"run-command",iconName:"play",text:"Run command"},{type:"icon-button",id:"send-cloudshell",iconName:"script",text:"Send to IDE"}]},{type:"icon-button",id:"copy",iconName:"copy",text:"Copy",popoverFeedback:I.jsxDEV(z,{type:"success",children:"Message copied"},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:56,columnNumber:28},this)}]},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:21,columnNumber:5},this)}const He=({children:e})=>I.jsxDEV("div",{style:{position:"relative",flexGrow:1},children:I.jsxDEV("div",{style:{position:"absolute",inset:0},children:e},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:66,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:65,columnNumber:5},void 0),qe=p.forwardRef(function({children:n},o){return I.jsxDEV("div",{style:{position:"relative",blockSize:"100%"},children:I.jsxDEV("div",{style:{position:"absolute",inset:0,overflowY:"auto"},ref:o,"data-testid":"chat-scroll-container",children:n},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:76,columnNumber:5},this)});function Me({contentToCopy:e,onNotHelpfulFeedback:n}){const[o,t]=p.useState(""),[i,f]=p.useState(""),c=[{type:"group",text:"Vote",items:[{type:"icon-button",id:"helpful",iconName:o==="helpful"?"thumbs-up-filled":"thumbs-up",text:"Helpful",disabled:!!o.length||i==="not-helpful",disabledReason:i.length?"":o==="helpful"?'"Helpful" feedback has been submitted.':'"Helpful" option is unavailable after "Not helpful" feedback submitted.',loading:i==="helpful",popoverFeedback:o==="helpful"?I.jsxDEV(z,{type:"success",children:"Feedback submitted"},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:113,columnNumber:15},this):"Submitting feedback"},{type:"icon-button",id:"not-helpful",iconName:o==="not-helpful"?"thumbs-down-filled":"thumbs-down",text:"Not helpful",disabled:!!o.length||i==="helpful",disabledReason:i.length?"":o==="not-helpful"?'"Not helpful" feedback has been submitted.':'"Not helpful" option is unavailable after "Helpful" feedback submitted.',loading:i==="not-helpful",popoverFeedback:o==="helpful"?I.jsxDEV(z,{type:"success",children:"Feedback submitted"},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:132,columnNumber:15},this):"Submitting feedback"}]},{type:"icon-button",id:"copy",iconName:"copy",text:"Copy",popoverFeedback:I.jsxDEV(z,{type:"success",children:"Message copied"},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:144,columnNumber:24},this)}];return I.jsxDEV(O,{ariaLabel:"Chat actions",variant:"icon",items:c,onItemClick:({detail:r})=>{if(r.id==="copy"&&navigator.clipboard)return navigator.clipboard.writeText(e).catch(l=>console.log("Failed to copy",l.message));f(r.id),setTimeout(()=>{t(r.id),f(""),r.id==="not-helpful"&&n()},2e3)}},void 0,!1,{fileName:"/app/code/src/pages/chat/common-components.tsx",lineNumber:149,columnNumber:5},this)}export{$e as ChatBubbleAvatar,ze as CodeViewActions,Me as FeedbackActions,He as FittedContainer,qe as ScrollableContainer};
