import{r as n}from"./index-DWytQeHI.js";const h=o=>new Promise((t,c)=>{try{window.FakeServer.fetchDistributionFilteringOptions(o,({filteringOptions:e,filteringProperties:a})=>{t({filteringOptions:e,filteringProperties:a})})}catch(e){c(e)}});function y(o){const t=n.useRef({filteringText:""}),[c,e]=n.useState([]),[a,p]=n.useState(o),[l,u]=n.useState("pending"),f=async(i,r)=>{try{const{filteringOptions:s,filteringProperties:d}=await h({filteringText:i,filteringPropertyKey:r?r.key:void 0});if(!t.current||t.current.filteringText!==i||t.current.filteringProperty!==r)return;e(s),p(d),u("finished")}catch{u("error")}},g=({detail:{filteringProperty:i,filteringText:r,firstPage:s}})=>{u("loading"),s&&e([]),t.current={filteringProperty:i,filteringText:r},f(r,i)};return n.useEffect(()=>{f("")},[]),{status:l,filteringOptions:c,filteringProperties:a,handleLoadItems:g}}export{y as useDistributionsPropertyFiltering};
